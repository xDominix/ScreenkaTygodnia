/*! For license information please see main.147873bb.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ce(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Te(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ie(e,t,n)}finally{De=!1,(null!==_e||null!==Se)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var je={};Object.defineProperty(je,"passive",{get:function(){Re=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ce){Re=!1}function Oe(e,t,n,r,i,a,o,u,s){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,Me=null,Ue=!1,Fe=null,ze={onError:function(e){Le=!0,Me=e}};function Ve(e,t,n,r,i,a,o,u,s){Le=!1,Me=null,Oe.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,Et,Ct=!1,Tt=[],It=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Rt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function zt(){Ct=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Dt&&Ut(Dt)&&(Dt=null),At.forEach(Ft),Pt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),null!==Dt&&Vt(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var i=kt,a=Ht.transition;Ht.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,Ht.transition=a}}function Gt(e,t,n,r){var i=kt,a=Ht.transition;Ht.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,Ht.transition=a}}function Kt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Lt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=M({},ln,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},fn,{relatedTarget:0})),yn=an(M({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Sn}var Cn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(M({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),Rn=[9,13,27,32],jn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Ln=c&&"TextEvent"in window&&!On,Mn=c&&(!jn||On&&8<On&&11>=On),Un=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Ur(e,0)}function Yn(e){if(K(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];qn(t,Kn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Ir=Er("animationstart"),Nr=Er("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var jr=Ar[Rr];Pr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,l){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,l=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,l),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,l=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,l),a=s}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var i=qt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":l="focus",s=mn;break;case"focusout":l="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Cr:case Tr:case Ir:s=yn;break;case Nr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==u?u+"Capture":null:u;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&c.push(qr(p,v,d)))),f)break;p=p.return}0<c.length&&(u=new s(u,l,null,n,i),o.push({event:u,listeners:c}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(f=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(s=null,l=r),s!==l)){if(c=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==l?u:bi(l),(u=new c(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=d,c.relatedTarget=f,v=c),f=v,s&&l)e:{for(h=l,p=0,d=c=s;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)c=Kr(c),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Kr(c),h=Kr(h)}c=null}else c=null;null!==s&&Qr(o,u,s,c,!1),null!==l&&null!==f&&Qr(o,f,l,c,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Wn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(jn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!jn&&zn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Pe(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,l=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==l&&(u=l,i?null!=(s=Pe(n,a))&&o.unshift(qr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(qr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ci(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ii=Si(Ti),Ni=Si(!1),Di=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ni),Ei(Ii)}function ji(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ii),Ci(Ii,e)):Ei(Ni),Ci(Ni,n)}var Ui=null,Fi=!1,zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,Bi),i}finally{kt=t,zi=!1}}return null}var Hi=[],Wi=0,qi=null,Gi=0,Ki=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){Hi[Wi++]=Gi,Hi[Wi++]=qi,qi=e,Gi=t}function Zi(e,t,n){Ki[Qi++]=$i,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===qi;)qi=Hi[--Wi],Hi[Wi]=null,Gi=Hi[--Wi],Hi[Wi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,$i=Ki[--Qi],Ki[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,l=s.next;s.next=null,null===o?a=l:o.next=l,o=s;var c=e.alternate;null!==c&&((u=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===u?c.firstBaseUpdate=l:u.next=l,c.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,c=l=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===c?(l=c=d,s=f):c=c.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(s=f),i.baseState=s,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Fa=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,i))&&(rl(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,i))&&(rl(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ja(e,i,r))&&(rl(t,e,r,n),Oa(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ha(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Di:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function qa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fa,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Di:Ii.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fa&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case x:return(t=Fl(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:f(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return f(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,u,s){for(var l=null,c=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),l;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===c?l=f:c.sibling=f,c=f);return ia&&Ji(i,v),l}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function m(i,u,s,l){var c=O(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var f=c=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,l);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?c=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),c;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,l))&&(u=o(g,u,m),null===f?c=g:f.sibling=g,f=g);return ia&&Ji(i,m),c}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?c=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===_){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ga(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===_?((a=Ll(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Ol(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(c=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(O(o))return m(r,a,o,s);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ul(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ci(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=lu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,l=null,c=o;do{var f=c.lane;if((po&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=h,u=r):l=l.next=h,vo.lanes|=f,Ms|=f}c=c.next}while(null!==c&&c!==o);null===l?u=r:l.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Fo(9,jo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function Oo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Vo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Fo(t,n,a,r))}vo.flags|=e,i.memoizedState=Fo(1|t,n,a,r)}function Ho(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function qo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){rl(n,e,r,tl()),au(n,t,r)}}function nu(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(rl(n,e,r,i=tl()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ho(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,jo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Ds.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:qo,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:zo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},lu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:qo,useLayoutEffect:Go,useMemo:Xo,useReducer:Do,useRef:zo,useState:function(){return Do(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Io)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function cu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return qu(e,t,i)}return t.flags|=1,(e=jl(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,qu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(js,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(js,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(js,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(js,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Cu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Di:Ii.current;return a=Ai(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qu(e,t,i))}function Iu(e,t,n,r,i){if(Pi(n)){var a=!0;Li(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Wu(e,t),Ha(t,n,r),qa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ea(l):l=Ai(t,l=Pi(n)?Di:Ii.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==l)&&Wa(t,o,r,l),Da=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Da?("function"===typeof c&&(za(t,n,c,r),s=t.memoizedState),(u=Da||Ba(t,n,u,r,h,s,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=l,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,l=t.type===t.elementType?u:ma(t.type,u),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ai(t,s=Pi(n)?Di:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Da?("function"===typeof d&&(za(t,n,d,r),p=t.memoizedState),(l=Da||Ba(t,n,l,r,h,p,s)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Cu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),qu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,ju,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(uo,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Ml(s,i,0,null),e=Ll(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Fu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,zu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(o=Ll(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return zu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,zu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rl(r,e,i,-1))}return ml(),zu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Qi++]=$i,Ki[Qi++]=Xi,Ki[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Fu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=jl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=jl(r,u):(u=Ll(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=jl(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fu(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Hu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=jl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Ku(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ul(aa),aa=null))),Ru(e,t),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)ju(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var l=o[s];"children"===s?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):u.hasOwnProperty(s)&&null!=l&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",e):null!=c&&k(e,o,c,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Ou(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(ul(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),Ru(e,t),null===e&&Br(t.stateNode.containerInfo),Ku(t),null;case 10:return xa(t.type._context),Ku(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Hs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*Xe()-o.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ci(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},ju=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(u.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(u.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Fr("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){El(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){El(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){El(e,e.return,m)}try{rs(5,e,e.return)}catch(m){El(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){El(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var c=ke(s,o);for(u=0;u<l.length;u+=2){var f=l[u],h=l[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,c)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){El(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){El(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){El(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(c=Xu)||f,ms(t,e),Xu=c):ms(t,e),gs(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){El(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,s.style.display=ve("display",u))}catch(m){El(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){El(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ls(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){El(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var l=Xu;if($u=o,(Xu=s)&&!l)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=l}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){El(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){El(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){El(t,i,s)}}var a=t.return;try{as(t)}catch(s){El(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){El(t,o,s)}}}catch(s){El(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Cs=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Ns=0,Ds=null,As=null,Ps=0,Rs=0,js=Si(0),Os=0,Ls=null,Ms=0,Us=0,Fs=0,zs=null,Vs=null,Bs=0,Hs=1/0,Ws=null,qs=!1,Gs=null,Ks=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,el=0;function tl(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===el&&(el=vt()),el):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===Ds||(e===Ds&&(0===(2&Ns)&&(Us|=n),4===Os&&sl(e,Ps)),il(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(Hs=Xe()+500,Fi&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(ll.bind(null,e)):Vi(ll.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Zs=-1,el=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Ns;Ns|=2;var o=vl();for(Ds===e&&Ps===t||(Ws=null,Hs=Xe()+500,dl(e,t));;)try{kl();break}catch(s){pl(e,s)}wa(),Cs.current=o,Ns=i,null!==As?t=0:(Ds=null,Ps=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Ls,dl(e,0),sl(e,r),il(e,Xe()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Ls,dl(e,0),sl(e,r),il(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xl(e,Vs,Ws);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xl.bind(null,e,Vs,Ws),t);break}xl(e,Vs,Ws);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xl.bind(null,e,Vs,Ws),r);break}xl(e,Vs,Ws);break;default:throw Error(a(329))}}}return il(e,Xe()),e.callbackNode===n?al.bind(null,e):null}function ol(e,t){var n=zs;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Vs,Vs=n,null!==t&&ul(t)),e}function ul(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function sl(e,t){for(t&=~Fs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Ns))throw Error(a(327));_l();var t=ht(e,0);if(0===(1&t))return il(e,Xe()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Ls,dl(e,0),sl(e,t),il(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Vs,Ws),il(e,Xe()),null}function cl(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(Hs=Xe()+500,Fi&&Bi())}}function fl(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&_l();var t=Ns;Ns|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Ns=t))&&Bi()}}function hl(){Rs=js.current,Ei(js)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ni),Ei(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Ds=e,As=e=jl(e.current,null),Ps=Rs=t,Os=0,Ls=null,Fs=Us=Ms=0,Vs=zs=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pl(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,l=t;if(t=Ps,s.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){mu(o,c,t),ml();break e}l=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(cu(l,s));break e}}o=l=cu(l,s),4!==Os&&(Os=2),null===zs?zs=[o]:zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(0,l,t));break e;case 1:s=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function vl(){var e=Cs.current;return Cs.current=ou,null===e?ou:e}function ml(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ds||0===(268435455&Ms)&&0===(268435455&Us)||sl(Ds,Ps)}function yl(e,t){var n=Ns;Ns|=2;var r=vl();for(Ds===e&&Ps===t||(Ws=null,dl(e,t));;)try{gl();break}catch(i){pl(e,i)}if(wa(),Ns=n,Cs.current=r,null!==As)throw Error(a(261));return Ds=null,Ps=0,Os}function gl(){for(;null!==As;)bl(As)}function kl(){for(;null!==As&&!Ye();)bl(As)}function bl(e){var t=Ss(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wl(e):As=t,Ts.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function xl(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{_l()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(As=Ds=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Dl(tt,(function(){return _l(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,l=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(l=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===i&&(s=u),d===o&&++f===r&&(l=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){El(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Is.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qs)throw qs=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&_l(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function _l(){if(null!==Ys){var e=bt($s),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(Zu=c;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===c){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){El(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function Sl(e,t,n){e=ja(e,t=pu(0,t=cu(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),il(e,t))}function El(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=ja(t,e=vu(t,e=cu(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),il(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ps&n)===n&&(4===Os||3===Os&&(130023424&Ps)===Ps&&500>Xe()-Bs?dl(e,0):Fs|=n),il(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Na(e,t))&&(yt(e,t,n),il(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tl(e,n)}function Dl(e,t){return Ke(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Al(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rl(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Ll(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Pl(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pl(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Pl(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return Ml(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:u=10;break e;case T:u=9;break e;case I:u=11;break e;case A:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pl(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ll(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,a,o,u,s){return e=new zl(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bl(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function Hl(e,t,n,r,i,a,o,u,s){return(e=Vl(n,r,!0,e,0,a,0,u,s)).context=Bl(null),n=e.current,(a=Ra(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,ja(n,a,i),e.current.lanes=i,yt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,a=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(i,t,o))&&(rl(e,i,o,a),Oa(e,i,o)),o}function ql(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ci(uo,1&uo.current),null!==(e=qu(e,t,n))?e.sibling:null);Ci(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return qu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,qa(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=cu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=cu(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=qu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Cu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&la(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ci(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=qu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ra(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Wu(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Sa(t,n),Ha(t,r,i),qa(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Hu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=ql(o);u.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=ql(o);a.call(e)}}var o=Hl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=ql(s);u.call(e)}}var s=Vl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fl((function(){Wl(t,s,n,r)})),s}(n,t,e,i,r);return ql(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fl((function(){Wl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),il(t,Xe()),0===(6&Ns)&&(Hs=Xe()+500,Bi()))}break;case 13:fl((function(){var t=Na(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Kl(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rl(t,e,134217728,tl());Kl(e,134217728)}},_t=function(e){if(13===e.tag){var t=nl(e),n=Na(e,t);if(null!==n)rl(n,e,t,tl());Kl(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cl,Ne=fl;var tc={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Te,cl]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return fl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(fl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:u.current}}t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+I(u=e[l],l);s+=N(u,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,c=a+I(u,l++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},j={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)x.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],l=u+1,c=e[l];if(0>a(s,n))l<i&&0>a(c,s)?(e[r]=c,e[l]=n,r=l):(e[r]=s,e[u]=n,r=u);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var l=[],c=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,b(e),!v)if(null!==r(l))v=!0,R(x);else{var t=r(c);null!==t&&j(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var a=d;try{for(b(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(l)&&i(l),b(n)}else i(l);h=r(l)}if(null!==h)var s=!0;else{var f=r(c);null!==f&&j(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function D(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof k)_=function(){k(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){y(D,0)};function R(e){E=e,S||(S=!0,_())}function j(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(g(C),C=-1):m=!0,j(w,a-o))):(e.sortIndex=u,n(l,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),function(){var e,t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return u}}(e,t)||o(e,t)||u()}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||l(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t=k();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function x(e,t,n){return x=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},x.apply(null,arguments)}function _(e){var t="function"===typeof Map?new Map:void 0;return _=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},_(e)}function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var C,T="popstate";function I(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function N(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t,n,r){return void 0===n&&(n=null),E({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?R(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function R(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j(t,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,l=void 0!==s&&s,c=u.history,f=e.Pop,h=null,d=p();function p(){return(c.state||{idx:null}).idx}function v(){f=e.Pop;var t=p(),n=null==t?null:t-d;d=t,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:P(e);return I(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(E({},c.state,{idx:d}),""));var y={get action(){return f},get location(){return t(u,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(T,v),h=e,function(){u.removeEventListener(T,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;var i=A(y.location,t,n);r&&r(i,t);var a=D(i,d=p()+1),o=y.createHref(i);try{c.pushState(a,"",o)}catch(s){u.location.assign(o)}l&&h&&h({action:f,location:y.location,delta:1})},replace:function(t,n){f=e.Replace;var i=A(y.location,t,n);r&&r(i,t);var a=D(i,d=p()),o=y.createHref(i);c.replaceState(a,"",o),l&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function O(e,t,n){void 0===n&&(n="/");var r=Y(("string"===typeof t?R(t):t).pathname||"/",n);if(null==r)return null;var i=L(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=G(i[o],Q(r));return a}function L(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(I(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=Z([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(I(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),L(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:q(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=S(M(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function M(e){var t=e.split("/");if(0===t.length)return[];var n,r=i(n=t)||l(n)||o(n)||u(),a=r[0],s=r.slice(1),f=a.endsWith("?"),h=a.replace(/\?$/,"");if(0===s.length)return f?[h,""]:[h];var d=M(s.join("/")),p=[];return p.push.apply(p,c(d.map((function(e){return""===e?h:[h,e].join("/")})))),f&&p.push.apply(p,c(d)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var U=/^:\w+$/,F=3,z=2,V=1,B=10,H=-2,W=function(e){return"*"===e};function q(e,t){var n=e.split("/"),r=n.length;return n.some(W)&&(r+=H),t&&(r+=z),n.filter((function(e){return!W(e)})).reduce((function(e,t){return e+(U.test(t)?F:""===t?V:B)}),r)}function G(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=K({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);var f=u.route;a.push({params:r,pathname:Z([i,c.pathname]),pathnameBase:ee(Z([i,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(i=Z([i,c.pathnameBase]))}return a}function K(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);N("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],l=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";l=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return N(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:l,pattern:e}}function Q(e){try{return decodeURI(e)}catch(t){return N(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Y(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function J(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=R(e):(I(!(i=E({},e)).pathname||!i.pathname.includes("?"),$("?","pathname","search",i)),I(!i.pathname||!i.pathname.includes("#"),$("#","pathname","hash",i)),I(!i.search||!i.search.includes("#"),$("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var l=u.split("/");".."===l[0];)l.shift(),s-=1;i.pathname=l.join("/")}a=s>=0?t[s]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?R(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:te(a),hash:ne(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!f&&!h||(c.pathname+="/"),c}var Z=function(e){return e.join("/").replace(/\/\/+/g,"/")},ee=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},te=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ne=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},re=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n)}(_(Error));function ie(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ae=["post","put","patch","delete"],oe=(new Set(ae),["get"].concat(ae));new Set(oe),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}var se=t.createContext(null);var le=t.createContext(null);var ce=t.createContext(null);var fe=t.createContext(null);var he=t.createContext(null);var de=t.createContext({outlet:null,matches:[],isDataRoute:!1});var pe=t.createContext(null);function ve(){return null!=t.useContext(he)}function me(){return ve()||I(!1),t.useContext(he).location}function ye(e){t.useContext(fe).static||t.useLayoutEffect(e)}function ge(){return t.useContext(de).isDataRoute?function(){var e=Ie(xe.UseNavigateStable).router,n=De(_e.UseNavigateStable),r=t.useRef(!1);ye((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,ue({fromRouteId:n},i)))}),[e,n]);return i}():function(){ve()||I(!1);var e=t.useContext(fe),n=e.basename,r=e.navigator,i=t.useContext(de).matches,a=me().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);ye((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=J(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:Z([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}()}function ke(){var e=t.useContext(de).matches,n=e[e.length-1];return n?n.params:{}}function be(n,r,i){ve()||I(!1);var a,o=t.useContext(fe).navigator,u=t.useContext(de).matches,s=u[u.length-1],l=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,me());if(r){var h,d="string"===typeof r?R(r):r;"/"===c||(null==(h=d.pathname)?void 0:h.startsWith(c))||I(!1),a=d}else a=f;var p=a.pathname||"/",v=O(n,{pathname:"/"===c?p:p.slice(c.length)||"/"});var m=Te(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Z([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Z([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return r&&m?t.createElement(he.Provider,{value:{location:ue({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:e.Pop}},m):m}function we(){var e=function(){var e,n=t.useContext(pe),r=Ne(_e.UseRouteError),i=De(_e.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=ie(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var xe,_e,Se=t.createElement(we,null),Ee=function(e){y(r,e);var n=w(r);function r(e){var t;return f(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return v(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(de.Provider,{value:this.props.routeContext},t.createElement(pe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function Ce(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(se);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(de.Provider,{value:n},i)}function Te(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||I(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,l=null;r&&(l=i.route.errorElement||Se);var c=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?l:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Ce,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(Ee,{location:r.location,revalidation:r.revalidation,component:l,error:s,children:f(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):f()}),null)}function Ie(e){var n=t.useContext(se);return n||I(!1),n}function Ne(e){var n=t.useContext(le);return n||I(!1),n}function De(e){var n=function(e){var n=t.useContext(de);return n||I(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||I(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(xe||(xe={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(_e||(_e={}));var Ae;function Pe(e){I(!1)}function Re(n){var r=n.basename,i=void 0===r?"/":r,a=n.children,o=void 0===a?null:a,u=n.location,s=n.navigationType,l=void 0===s?e.Pop:s,c=n.navigator,f=n.static,h=void 0!==f&&f;ve()&&I(!1);var d=i.replace(/^\/*/,"/"),p=t.useMemo((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof u&&(u=R(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,x=v.state,_=void 0===x?null:x,S=v.key,E=void 0===S?"default":S,C=t.useMemo((function(){var e=Y(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:_,key:E},navigationType:l}}),[d,y,k,w,_,E,l]);return null==C?null:t.createElement(fe.Provider,{value:p},t.createElement(he.Provider,{children:o,value:C}))}function je(e){var t=e.children,n=e.location;return be(Le(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ae||(Ae={}));var Oe=new Promise((function(){}));t.Component;function Le(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(c(n),[i]);if(e.type!==t.Fragment){e.type!==Pe&&I(!1),e.props.index&&e.props.children&&I(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Le(e.props.children,a)),r.push(o)}else r.push.apply(r,Le(e.props.children,a))}})),r}function Me(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),j((function(e,t){var n=R(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return A("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:P(t))}),(function(e,t){N("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var u=o.current,l=s(t.useState({action:u.action,location:u.location}),2),c=l[0],f=l[1];return t.useLayoutEffect((function(){return u.listen(f)}),[u]),t.createElement(Re,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ue,Fe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ue||(Ue={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Fe||(Fe={}));var ze=n(184),Ve=function(){return(0,ze.jsx)("div",{children:(0,ze.jsx)("div",{className:"centered",children:"Page Not Found ://"})})};function Be(){Be=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new C(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=c(e[r],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function He(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(r,i)}function We(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){He(a,r,i,o,u,"next",e)}function u(e){He(a,r,i,o,u,"throw",e)}o(void 0)}))}}function qe(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=function e(n){var r=n.autofocus,i=n.reff,a=n.placeholder,o=n.readOnly,u=void 0!==o&&o,l=n.onEnter,c=void 0===l?function(){}:l,f=n.onChange,h=void 0===f?function(){}:f,d=n.isRed,p=n.isLoading,v=n.value,m=void 0===v?void 0:v,y=n.longer,g=void 0!==y&&y,k=n.file,b=n.paste,w=void 0!==b&&b,x=s((0,t.useState)(!1),2),_=x[0],S=x[1],E=function(e){_||S(!0),"Enter"!==e.key||g||(i.current.blur(),S(!1),u||c())};if(w&&navigator.clipboard){var C=Ke(Ke({},n),{},{paste:!1});return(0,ze.jsxs)("div",{className:"input-paste",children:[(0,ze.jsx)(e,Ke({},C)),(0,ze.jsx)(Ye,{disabled:p,onClick:function(){navigator.clipboard.readText().then((function(e){i.current.value=e}))}})]})}return k?(0,ze.jsx)("input",{className:d&&!p?"bcolor-red":"",style:Ke({},p?{opacity:"0.4"}:{}),readOnly:p||u,type:"file",accept:"image/*",tilte:"file...",onChange:h}):g?(0,ze.jsx)("textarea",{className:!d||_||p?"":"bcolor-red",cols:"8",rows:"5",placeholder:a,ref:i,value:m,readOnly:p||u,style:Ke({},p?{opacity:"0.4"}:{}),autoFocus:r,onKeyDown:E,onChange:h}):(0,ze.jsx)("input",{className:!d||_||p?"":"bcolor-red",placeholder:a,readOnly:p||u,style:Ke({},p?{opacity:"0.4"}:{}),autoFocus:r,ref:i,value:m,onKeyDown:E,onChange:h})},Ye=function(e){var t=e.onClick,n=e.disabled;return(0,ze.jsx)("button",{disabled:n,className:"paste",onClick:t,children:"PASTE"})},$e=function(){return new Date(Date.now())},Xe=function(e){return"".concat("/ScreenkaTygodnia","/assets/").concat(e)},Je=function(e){return Xe((arguments.length>1&&void 0!==arguments[1]?arguments[1]:64)<=64?"app-logos-128/"+e.toLowerCase().replace(" ","_")+"64.jpg":"app-logos-128/"+e.toLowerCase().replace(" ","_")+".jpg")};function Ze(e){return new Promise((function(t){setTimeout(t,e)}))}var et={Monday:0,Tuesday:1,Wednesday:2,Thursday:3,Friday:4,Saturday:5,Sunday:6},tt=function(e){return"string"===typeof e?et[e]:e>=0&&e<=6?Object.keys(et).find((function(t){return et[t]===e})):void 0},nt=function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e()).getDay()+6)%7;return tt(e)},rt=["January","February","March","April","May","June","July","August","September","October","November","December"],it=function(e){return($e().getDay()+6)%7===e};function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(e=e?new Date(e):$e()).setHours(0,0,0,0);var t=e.getDay(),n=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(n))}function ot(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function ut(e,t){return 0===ct(e,t)}var st=function(e,t){var n=$e().getHours();return e<=n&&n<t},lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&ft(e,15)?"NOW":t&&ft(e,59)?"".concat(ht(e),"MIN AGO"):t&&ft(e,119)?"1H AGO":e.getHours().toLocaleString("en-US",{minimumIntegerDigits:1,useGrouping:!1})+":"+e.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},ct=function(e,t){e=at(e),t=at(t);var n=Math.ceil((e.getTime()-t.getTime())/864e5);return n=Math.abs(n),Math.floor(n/7)},ft=function(e,t){if(null==e||null==t)return!1;var n=ht(e);return!(n<0)&&t>=n},ht=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e())-e;return Math.floor(t/1e3/60)},dt=function(e){function t(e){return(e<10?"0":"")+e}return e||(e=$e()),e.getFullYear()%100+"_"+t(e.getMonth()+1)+t(e.getDate())+"_"+t(e.getHours())+t(e.getMinutes())},pt=function(e){return e&&0!==e.length?e[Math.floor(Math.random()*e.length)]:null},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Map;return Object.entries(e).forEach((function(e){var n=s(e,2),r=n[0],i=n[1];t.set(r,i)})),t},mt=function(e){var t=e.split(" ");return(t=t.map((function(e,t){return 0===t?e:e.charAt(0)+"."}))).join(" ")},yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{me:!1,friends:!1,screenka:!1};return e?{me:null==e.me?t.me:!0===e.me,friends:null==e.friends?t.friends:!0===e.friends,screenka:null==e.screenka?t.screenka:!0===e.screenka}:t},gt="1.1.0",kt=function(e){var t=e.logo;return void 0!==t&&t?(0,ze.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,ze.jsxs)("div",{className:"centered",children:[" ",(0,ze.jsx)("img",{className:"fromdown",alt:"logo",src:Xe("st-logo.png"),style:{width:"200px"}})]}),(0,ze.jsxs)("footer",{className:"center",children:["v",gt]})]}):(0,ze.jsx)("div",{children:(0,ze.jsx)("div",{className:"centered",children:"Loading..."})})},bt=v((function e(t,n,r,i,a,o,u){var s=this,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{me:!1,friends:!1,screenka:!1},c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null;f(this,e),this.toDoc=function(){return{host_id:s.host_id,week_name:s.week_name,upload_date:s.upload_date,app:s.app,content:s.content,context:s.context,permissions:s.permissions,week_tag:s.week_tag,view:null}},this.id=t,this.host_id=n,this.week_name=r,this.upload_date=i,this.app=a,this.content=o,this.context=u,this.permissions=l,this.comment=h,this.view=d,this.week_tag=c,this.top_number=p,this.is_highlighted=v}));bt.fromDoc=function(e){return e?new bt(e.id,e.host_id,e.week_name,e.upload_date.toDate(),e.app,e.content,e.context,e.permissions,e.week_tag,e.comment,e.view,e.top_number,e.is_highlighted):null};var wt=v((function e(t,n,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Map,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Map;f(this,e),this.getFriends=function(e){var t=[];return a.groups.forEach((function(n){n.includes(e)&&n.forEach((function(n){n===e||t.includes(n)||t.push(n)}))})),t},this.getMyGroups=function(e){if(!e)return null;var t=[];return a.groups.forEach((function(n,r){n.includes(e)&&t.push(r)})),t},this.id=t,this.fullname=n,this.start_date=r,this.popular_apps=i,this.personalized_apps=o,this.group_apps=u,this.groups=s,this.subscribers=l,this.max_tickets=3}));wt.fromDoc=function(e){if(!e)return null;var t=vt(e.subscribers);return t.forEach((function(e){return e.join_date=e.join_date.toDate()})),t.forEach((function(e){var t;return e.leave_date=null===(t=e.leave_date)||void 0===t?void 0:t.toDate()})),new wt(e.id,e.fullname,e.start_date.toDate(),e.popular_apps,e.personalized_apps,e.group_apps,vt(e.groups),t)};var xt=v((function e(t,n,r,i,a){var o=this,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];f(this,e),this.getName=function(){var e;return null===(e=o.fullname.split(" "))||void 0===e?void 0:e.at(0)},this.getShortenFullname=function(){return mt(o.fullname)},this.fullname=t,this.funnyname=n,this.username=r,this.hosts=i,this.preferences=a||{me:!1,friends:!1,screenka:!1},this.personalized_apps=u,this.super_personalized_apps=s}));xt.fromDoc=function(e){return e?new xt(e.id?e.id:e.fullname,e.funnyname,e.username,e.hosts,e.preferences,e.personalized_apps,e.super_personalized_apps):null};var _t=v((function e(t,n,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];f(this,e),this.setTodayAppsCounts=function(e){if(e){a.total_uploads=Object.values(e).reduce((function(e,t){return e+Object.values(t).reduce((function(e,t){return e+t}),0)}),0),a.apps_counts=function(e){return Object.values(e).reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=s(t,2),r=n[0],i=n[1];e.has(r)?e.set(r,e.get(r)+i):e.set(r,i)})),e}),new Map)}(e);var t=e[nt($e())];return t&&(a.today_apps_counts=vt(t)),a}},this.setTodayParticipants=function(e){if(e){var t=e[nt($e())];return t&&(a.today_participants=t),a}},this.name=t,this.start_date=n,this.description=r,this.emoji=i,this.blocked_apps=o,this.extra_apps=u,this.max_tickets=l,this.force_st=c,this.today_participants=[],this.today_apps_counts=new Map,this.apps_counts=new Map,this.total_uploads=0,this.latest_post={},this.screenka_views=new Map,this.screenka_comments=[],this.events=[]}));_t.DefaultWeek=new _t("Week",$e(),"Default Week",""),_t.fromDoc=function(e){if(!e)return null;var t=vt(e.screenka_views);t.forEach((function(e){return e.view_date=e.view_date.toDate()}));var n=e.latest_post;n&&(n.date=n.date.toDate());var r=new _t(e.id,e.start_date.toDate(),e.description,e.emoji,e.blocked_apps,e.extra_apps,e.max_tickets,e.force_st);return r.latest_post=n,r.screenka_views=t,r.screenka_comments=e.screenka_comments,r.events=e.events,r.setTodayAppsCounts(e.day_apps_counts),r.setTodayParticipants(e.day_participants),r};var St=new Date(2023,3,24,20,17),Et="Demo User",Ct="demo_user",Tt=new Map([[Et,[new bt("dsnanaaiaocsn","-1","Glassy Week",new Date(2023,3,24,14,0),"Photos",null,"To wszystko sie tu zaczelo!",{me:!0,friends:!0,screenka:!0},!0,null,"Tola Bajka",1),new bt("dsnanaaiasasa","-1","Glassy Week",new Date(2023,3,24,15,0),"Safari","https://open.spotify.com/track/2dHHgzDwk4BJdRwy9uXhTO","Ta storna to majstersztyk",!1,{me:!0,friends:!0,screenka:!1},null,null,null,null),new bt("dsnasddsxccsn","-1","Glassy Week",new Date(2023,3,24,16,16),"Notes","Ciekawski","Ciekawe slowo w sumie",{me:!0,friends:!0,screenka:!0},!1,null,null,null,null)]],["Tola Bajka",[new bt("123123","-1","Glassy Week",new Date(2023,3,24,20,10),"Maps","Paryz Francja","Piekne miejsce! Polecam! Cieplutko!",{me:!0,friends:!0,screenka:!0},!1,null,Et,2)]],["Mia Muller",[new bt("123","-1","Glassy Week",new Date(2023,3,24,14,30),"Spotify","https://open.spotify.com/track/2dHHgzDwk4BJdRwy9uXhTO","Hejka!",{me:!0,friends:!0,screenka:!0},!0,null,null,null)]]]),It=[new xt(Et,Ct,"DemoUser",["-1"],{me:!0,friends:!0,screenka:!0},["Maps"]),new xt("Tola Bajka","bayka","Bayka",["-1"],{me:!0,friends:!0,screenka:!0}),new xt("Mia Muller","miam","Miam",["-1"],{me:!0,friends:!0,screenka:!0})],Nt=new _t("Glassy Week",new Date(2023,3,24,8,0),"New week, new you. Have fun. We are waiting for some new fresh and dope things! Use your glasses against burning sun! ...","\ud83d\udd76\ufe0f",null,null,null,!0);Nt.today_participants=[Et,"Mia Muller"],Nt.today_apps_counts=vt({Spotify:1,Maps:1,Safari:1,Photos:1}),Nt.total_uploads=4,Nt.apps_counts=vt({Spotify:1,Maps:1,Safari:1,Photos:1});var Dt=[Nt],At=new Map([[Et,{join_date:new Date(2023,3,17),role:"host"}],["Tola Bajka",{join_date:new Date(2023,3,17)}],["Mia Muller",{join_date:new Date(2023,3,17)}]]),Pt=[new wt("-1",Et,new Date(2023,3,10),["Notes","Safari","Photos","Youtube","Spotify","Contacts"],["Maps","Instagram","Camera"],null,new Map([["SuperGroup",[Et,"Tola Bajka"]]]),At)],Rt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Rt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Ot;var l=a<<2|o>>4;if(r.push(l),64!==u){var c=o<<4&240|u>>2;if(r.push(c),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ot=function(e){y(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return v(n)}(_(Error)),Lt=function(e){return function(e){var t=Rt(e);return jt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Mt=function(e){try{return jt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};var Ut=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Ft=function(){try{return Ut()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/ScreenkaTygodnia",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Mt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},zt=function(e){var t=function(e){var t,n;return null===(n=null===(t=Ft())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Vt=function(){var e;return null===(e=Ft())||void 0===e?void 0:e.config},Bt=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ht(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Lt(JSON.stringify({alg:"none",type:"JWT"})),Lt(JSON.stringify(a)),""].join(".")}function Wt(){var e,t=null===(e=Ft())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function qt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Gt=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),Kt.prototype.create),a}return v(n)}(_(Error)),Kt=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Qt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Gt(n,a,t)}}]),e}();var Qt=/\{\$([^}]+)}/g;function Yt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if($t(u)&&$t(s)){if(!Yt(u,s))return!1}else if(u!==s)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function $t(e){return null!==e&&"object"===typeof e}function Xt(e){return e&&e._delegate?e._delegate:e}var Jt=function(){function e(t,n,r){f(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Zt="[DEFAULT]",en=function(){function e(t,n){f(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Bt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Zt})}catch(l){}var t,n=S(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(l){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(c(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),c(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=S(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),l=u[0],c=u[1];r===this.normalizeInstanceIdentifier(l)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(wp){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Zt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(wp){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;return this.component?this.component.multipleInstances?e:Zt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var tn,nn,rn=function(){function e(t){f(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new en(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),an=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(nn||(nn={}));var on={debug:nn.DEBUG,verbose:nn.VERBOSE,info:nn.INFO,warn:nn.WARN,error:nn.ERROR,silent:nn.SILENT},un=nn.INFO,sn=(qe(tn={},nn.DEBUG,"log"),qe(tn,nn.VERBOSE,"log"),qe(tn,nn.INFO,"info"),qe(tn,nn.WARN,"warn"),qe(tn,nn.ERROR,"error"),tn),ln=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=sn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},cn=function(){function e(t){f(this,e),this.name=t,this._logLevel=un,this._logHandler=ln,this._userLogHandler=null,an.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in nn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?on[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nn.DEBUG].concat(t)),this._logHandler.apply(this,[this,nn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,nn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nn.INFO].concat(t)),this._logHandler.apply(this,[this,nn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nn.WARN].concat(t)),this._logHandler.apply(this,[this,nn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,nn.ERROR].concat(t)),this._logHandler.apply(this,[this,nn.ERROR].concat(t))}}]),e}();var fn,hn,dn=function(e,t){return t.some((function(t){return e instanceof t}))};var pn=new WeakMap,vn=new WeakMap,mn=new WeakMap,yn=new WeakMap,gn=new WeakMap;var kn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||mn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function bn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(hn||(hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_n(this),n),xn(pn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xn(e.apply(_n(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[_n(this),t].concat(r));return mn.set(a,t.sort?t.sort():[t]),xn(a)}}function wn(e){return"function"===typeof e?bn(e):(e instanceof IDBTransaction&&function(e){if(!vn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));vn.set(e,t)}}(e),dn(e,fn||(fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,kn):e)}function xn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(xn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&pn.set(t,e)})).catch((function(){})),gn.set(t,e),t}(e);if(yn.has(e))return yn.get(e);var t=wn(e);return t!==e&&(yn.set(e,t),gn.set(t,e)),t}var _n=function(e){return gn.get(e)};var Sn,En,Cn=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],In=new Map;function Nn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(In.get(t))return In.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Tn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Cn.includes(n))){var a=function(){var e=We(Be().mark((function e(t){var a,o,u,s,l,c,f=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=f[c];return r&&(u=u.index(l.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return In.set(t,a),a}}}kn=function(e){return Ke(Ke({},e),{},{get:function(t,n,r){return Nn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Nn(t,n)||e.has(t,n)}})}(kn);var Dn=function(){function e(t){f(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var An="@firebase/app",Pn="0.9.8",Rn=new cn("@firebase/app"),jn="[DEFAULT]",On=(qe(Sn={},An,"fire-core"),qe(Sn,"@firebase/app-compat","fire-core-compat"),qe(Sn,"@firebase/analytics","fire-analytics"),qe(Sn,"@firebase/analytics-compat","fire-analytics-compat"),qe(Sn,"@firebase/app-check","fire-app-check"),qe(Sn,"@firebase/app-check-compat","fire-app-check-compat"),qe(Sn,"@firebase/auth","fire-auth"),qe(Sn,"@firebase/auth-compat","fire-auth-compat"),qe(Sn,"@firebase/database","fire-rtdb"),qe(Sn,"@firebase/database-compat","fire-rtdb-compat"),qe(Sn,"@firebase/functions","fire-fn"),qe(Sn,"@firebase/functions-compat","fire-fn-compat"),qe(Sn,"@firebase/installations","fire-iid"),qe(Sn,"@firebase/installations-compat","fire-iid-compat"),qe(Sn,"@firebase/messaging","fire-fcm"),qe(Sn,"@firebase/messaging-compat","fire-fcm-compat"),qe(Sn,"@firebase/performance","fire-perf"),qe(Sn,"@firebase/performance-compat","fire-perf-compat"),qe(Sn,"@firebase/remote-config","fire-rc"),qe(Sn,"@firebase/remote-config-compat","fire-rc-compat"),qe(Sn,"@firebase/storage","fire-gcs"),qe(Sn,"@firebase/storage-compat","fire-gcs-compat"),qe(Sn,"@firebase/firestore","fire-fst"),qe(Sn,"@firebase/firestore-compat","fire-fst-compat"),qe(Sn,"fire-js","fire-js"),qe(Sn,"firebase","fire-js-all"),Sn),Ln=new Map,Mn=new Map;function Un(e,t){try{e.container.addComponent(t)}catch(n){Rn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Fn(e){var t=e.name;if(Mn.has(t))return Rn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Mn.set(t,e);var n,r=S(Ln.values());try{for(r.s();!(n=r.n()).done;){Un(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function zn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Vn=(qe(En={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),qe(En,"bad-app-name","Illegal App name: '{$appName}"),qe(En,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),qe(En,"app-deleted","Firebase App named '{$appName}' already deleted"),qe(En,"no-options","Need to provide options, when not being deployed to hosting via source."),qe(En,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),qe(En,"invalid-log-argument","First argument to `onLog` must be null or a function."),qe(En,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),qe(En,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),qe(En,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),qe(En,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),En),Bn=new Kt("app","Firebase",Vn),Hn=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jt("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}]),e}(),Wn="9.20.0";function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:jn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Bn.create("bad-app-name",{appName:String(i)});if(n||(n=Vt()),!n)throw Bn.create("no-options");var a=Ln.get(i);if(a){if(Yt(n,a.options)&&Yt(r,a.config))return a;throw Bn.create("duplicate-app",{appName:i})}var o,u=new rn(i),s=S(Mn.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u.addComponent(l)}}catch(f){s.e(f)}finally{s.f()}var c=new Hn(n,r,u);return Ln.set(i,c),c}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=Ln.get(e);if(!t&&e===jn)return qn();if(!t)throw Bn.create("no-app",{appName:e});return t}function Kn(e,t,n){var r,i=null!==(r=On[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Rn.warn(u.join(" "))}Fn(new Jt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Qn="firebase-heartbeat-database",Yn=1,$n="firebase-heartbeat-store",Xn=null;function Jn(){return Xn||(Xn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=xn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(xn(u.result),e.oldVersion,e.newVersion,xn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(Qn,Yn,{upgrade:function(e,t){if(0===t)e.createObjectStore($n)}}).catch((function(e){throw Bn.create("idb-open",{originalErrorMessage:e.message})}))),Xn}function Zn(e){return er.apply(this,arguments)}function er(){return er=We(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn();case 3:return n=e.sent,e.abrupt("return",n.transaction($n).objectStore($n).get(rr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Gt?Rn.warn(e.t0.message):(r=Bn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Rn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),er.apply(this,arguments)}function tr(e,t){return nr.apply(this,arguments)}function nr(){return nr=We(Be().mark((function e(t,n){var r,i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn();case 3:return r=e.sent,i=r.transaction($n,"readwrite"),a=i.objectStore($n),e.next=8,a.put(n,rr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Gt?Rn.warn(e.t0.message):(o=Bn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Rn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),nr.apply(this,arguments)}function rr(e){return"".concat(e.name,"!").concat(e.options.appId)}var ir=function(){function e(t){var n=this;f(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new sr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=We(Be().mark((function e(){var t,n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ar(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=We(Be().mark((function e(){var t,n,r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ar(),n=or(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Lt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ar(){return(new Date).toISOString().substring(0,10)}function or(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=S(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),lr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),lr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ur,sr=function(){function e(t){f(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Zn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=We(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=We(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(c(r.heartbeats),c(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function lr(e){return Lt(JSON.stringify({version:2,heartbeats:e})).length}ur="",Fn(new Jt("platform-logger",(function(e){return new Dn(e)}),"PRIVATE")),Fn(new Jt("heartbeat",(function(e){return new ir(e)}),"PRIVATE")),Kn(An,Pn,ur),Kn(An,Pn,"esm2017"),Kn("fire-js","");function cr(){return cr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},cr.apply(this,arguments)}Kn("firebase","9.20.0","app");var fr,hr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},dr={},pr=pr||{},vr=hr||self;function mr(){}function yr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var kr="closure_uid_"+(1e9*Math.random()>>>0),br=0;function wr(e,t,n){return e.call.apply(e.bind,arguments)}function xr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _r(e,t,n){return(_r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wr:xr).apply(null,arguments)}function Sr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Er(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Cr(){this.s=this.s,this.o=this.o}Cr.prototype.s=!1,Cr.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,kr)&&e[kr]||(e[kr]=++br))},Cr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Tr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ir(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(yr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Dr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Dr.prototype.h=function(){this.defaultPrevented=!0};var Ar=function(){if(!vr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{vr.addEventListener("test",mr,t),vr.removeEventListener("test",mr,t)}catch(n){}return e}();function Pr(e){return/^[\s\xa0]*$/.test(e)}var Rr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function jr(e,t){return e<t?-1:e>t?1:0}function Or(){var e=vr.navigator;return e&&(e=e.userAgent)?e:""}function Lr(e){return-1!=Or().indexOf(e)}function Mr(e){return Mr[" "](e),e}Mr[" "]=mr;var Ur,Fr=Lr("Opera"),zr=Lr("Trident")||Lr("MSIE"),Vr=Lr("Edge"),Br=Vr||zr,Hr=Lr("Gecko")&&!(-1!=Or().toLowerCase().indexOf("webkit")&&!Lr("Edge"))&&!(Lr("Trident")||Lr("MSIE"))&&!Lr("Edge"),Wr=-1!=Or().toLowerCase().indexOf("webkit")&&!Lr("Edge");function qr(){var e=vr.document;return e?e.documentMode:void 0}e:{var Gr="",Kr=function(){var e=Or();return Hr?/rv:([^\);]+)(\)|;)/.exec(e):Vr?/Edge\/([\d\.]+)/.exec(e):zr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Wr?/WebKit\/(\S+)/.exec(e):Fr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Kr&&(Gr=Kr?Kr[1]:""),zr){var Qr=qr();if(null!=Qr&&Qr>parseFloat(Gr)){Ur=String(Qr);break e}}Ur=Gr}var Yr,$r={};function Xr(){return function(e){var t=$r;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Rr(String(Ur)).split("."),n=Rr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=jr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||jr(0==a[2].length,0==o[2].length)||jr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(vr.document&&zr){var Jr=qr();Yr=Jr||(parseInt(Ur,10)||void 0)}else Yr=void 0;var Zr=Yr;function ei(e,t){if(Dr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Hr){e:{try{Mr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ti[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ei.X.h.call(this)}}Er(ei,Dr);var ti={2:"touch",3:"pen",4:"mouse"};ei.prototype.h=function(){ei.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ni="closure_listenable_"+(1e6*Math.random()|0),ri=0;function ii(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ri,this.ba=this.ea=!1}function ai(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function oi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ui(e){var t={};for(var n in e)t[n]=e[n];return t}var si="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function li(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<si.length;a++)n=si[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ci(e){this.src=e,this.g={},this.h=0}function fi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Tr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ai(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function hi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}ci.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=hi(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new ii(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var di="closure_lm_"+(1e6*Math.random()|0),pi={};function vi(e,t,n,r,i){if(r&&r.once)return yi(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)vi(e,t[a],n,r,i);return null}return n=Si(n),e&&e[ni]?e.N(t,n,gr(r)?!!r.capture:!!r,i):mi(e,t,n,!1,r,i)}function mi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gr(i)?!!i.capture:!!i,u=xi(e);if(u||(e[di]=u=new ci(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=wi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ar||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yi(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)yi(e,t[a],n,r,i);return null}return n=Si(n),e&&e[ni]?e.O(t,n,gr(r)?!!r.capture:!!r,i):mi(e,t,n,!0,r,i)}function gi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)gi(e,t[a],n,r,i);else r=gr(r)?!!r.capture:!!r,n=Si(n),e&&e[ni]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=hi(a=e.g[t],n,r,i))&&(ai(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=xi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=hi(t,n,r,i)),(n=-1<e?t[e]:null)&&ki(n))}function ki(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ni])fi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xi(t))?(fi(n,e),0==n.h&&(n.src=null,t[di]=null)):ai(e)}}}function bi(e){return e in pi?pi[e]:pi[e]="on"+e}function wi(e,t){if(e.ba)e=!0;else{t=new ei(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ki(e),e=n.call(r,t)}return e}function xi(e){return(e=e[di])instanceof ci?e:null}var _i="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(e){return"function"===typeof e?e:(e[_i]||(e[_i]=function(t){return e.handleEvent(t)}),e[_i])}function Ei(){Cr.call(this),this.i=new ci(this),this.P=this,this.I=null}function Ci(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Dr(t,e);else if(t instanceof Dr)t.target=t.target||e;else{var i=t;li(t=new Dr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ti(o,r,!0,t)&&i}if(i=Ti(o=t.g=e,r,!0,t)&&i,i=Ti(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ti(o=t.g=n[a],r,!1,t)&&i}function Ti(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&fi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Er(Ei,Cr),Ei.prototype[ni]=!0,Ei.prototype.removeEventListener=function(e,t,n,r){gi(this,e,t,n,r)},Ei.prototype.M=function(){if(Ei.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ai(n[r]);delete t.g[e],t.h--}}this.I=null},Ei.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ei.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ii=vr.JSON.stringify;function Ni(){var e=Mi,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Di,Ai=function(){function e(){f(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=Pi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Pi=new(function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ri}),(function(e){return e.reset()})),Ri=function(){function e(){f(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ji(e){vr.setTimeout((function(){throw e}),0)}function Oi(e,t){Di||function(){var e=vr.Promise.resolve(void 0);Di=function(){e.then(Ui)}}(),Li||(Di(),Li=!0),Mi.add(e,t)}var Li=!1,Mi=new Ai;function Ui(){for(var e;e=Ni();){try{e.h.call(e.g)}catch(n){ji(n)}var t=Pi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Li=!1}function Fi(e,t){Ei.call(this),this.h=e||1,this.g=t||vr,this.j=_r(this.lb,this),this.l=Date.now()}function zi(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Vi(e,t,n){if("function"===typeof e)n&&(e=_r(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_r(e.handleEvent,e)}return 2147483647<Number(t)?-1:vr.setTimeout(e,t||0)}function Bi(e){e.g=Vi((function(){e.g=null,e.i&&(e.i=!1,Bi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Er(Fi,Ei),(fr=Fi.prototype).ca=!1,fr.R=null,fr.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ci(this,"tick"),this.ca&&(zi(this),this.start()))}},fr.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fr.M=function(){Fi.X.M.call(this),zi(this),delete this.g};var Hi=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Bi(this)}},{key:"M",value:function(){cr(g(n.prototype),"M",this).call(this),this.g&&(vr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Cr);function Wi(e){Cr.call(this),this.h=e,this.g={}}Er(Wi,Cr);var qi=[];function Gi(e,t,n,r){Array.isArray(n)||(n&&(qi[0]=n.toString()),n=qi);for(var i=0;i<n.length;i++){var a=vi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ki(e){oi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ki(e)}),e),e.g={}}function Qi(){this.g=!0}function Yi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ii(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Wi.prototype.M=function(){Wi.X.M.call(this),Ki(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qi.prototype.Aa=function(){this.g=!1},Qi.prototype.info=function(){};var $i={},Xi=null;function Ji(){return Xi=Xi||new Ei}function Zi(e){Dr.call(this,$i.Pa,e)}function ea(e){var t=Ji();Ci(t,new Zi(t))}function ta(e,t){Dr.call(this,$i.STAT_EVENT,e),this.stat=t}function na(e){var t=Ji();Ci(t,new ta(t,e))}function ra(e,t){Dr.call(this,$i.Qa,e),this.size=t}function ia(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return vr.setTimeout((function(){e()}),t)}$i.Pa="serverreachability",Er(Zi,Dr),$i.STAT_EVENT="statevent",Er(ta,Dr),$i.Qa="timingevent",Er(ra,Dr);var aa={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},oa={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ua(){}function sa(e){return e.h||(e.h=e.i())}function la(){}ua.prototype.h=null;var ca,fa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ha(){Dr.call(this,"d")}function da(){Dr.call(this,"c")}function pa(){}function va(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Wi(this),this.O=ya,e=Br?125:void 0,this.T=new Fi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ma}function ma(){this.i=null,this.g="",this.h=!1}Er(ha,Dr),Er(da,Dr),Er(pa,ua),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},ca=new pa;var ya=45e3,ga={},ka={};function ba(e,t,n){e.K=1,e.v=Fa(ja(t)),e.s=n,e.P=!0,wa(e,null)}function wa(e,t){e.F=Date.now(),Ea(e),e.A=ja(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ja(n.i,"t",r),e.C=0,n=e.l.H,e.h=new ma,e.g=eu(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Hi(_r(e.La,e,e.g),e.N)),Gi(e.S,e.g,"readystatechange",e.ib),t=e.H?ui(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),ea(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var l=u[s].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&"type"==f[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function xa(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function _a(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Sa(e,n))==ka){4==t&&(e.o=4,na(14),i=!1),Yi(e.j,e.m,null,"[Incomplete Response]");break}if(r==ga){e.o=4,na(15),Yi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Yi(e.j,e.m,r,null),Da(e,r)}xa(e)&&r!=ka&&r!=ga&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,na(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Go(t),t.K=!0,na(11))):(Yi(e.j,e.m,n,"[Invalid Chunked Response]"),Na(e),Ia(e))}function Sa(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ka:(n=Number(t.substring(n,r)),isNaN(n)?ga:(r+=1)+n>t.length?ka:(t=t.substr(r,n),e.C=r+n,t))}function Ea(e){e.V=Date.now()+e.O,Ca(e,e.O)}function Ca(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ia(_r(e.gb,e),t)}function Ta(e){e.B&&(vr.clearTimeout(e.B),e.B=null)}function Ia(e){0==e.l.G||e.I||Yo(e.l,e)}function Na(e){Ta(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,zi(e.T),Ki(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Da(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||oo(n.h,e)))if(!e.J&&oo(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qo(n),Uo(n)}qo(n),na(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=ia(_r(n.cb,n),6e3));if(1>=ao(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Xo(n,11)}else if((e.J||n.g==e)&&Qo(n),!Pr(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=r.h;f.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(uo(f,f.h),f.h=null))}if(r.D){var h=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Ua(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Zo(r,r.H?r.ka:null,r.V),d.J){so(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Ta(p),Ea(p)),r.g=d}else Wo(r);0<n.i.length&&zo(n)}else"stop"!=a[0]&&"close"!=a[0]||Xo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xo(n,7):Mo(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}ea()}catch(a){}}function Aa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(yr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(yr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(fr=va.prototype).setTimeout=function(e){this.O=e},fr.ib=function(e){e=e.target;var t=this.L;t&&3==Ao(e)?t.l():this.La(e)},fr.La=function(e){try{if(e==this.g)e:{var t=Ao(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Br||this.g&&(this.h.h||this.g.fa()||Po(this.g)))){this.I||4!=t||7==n||ea(),Ta(this);var r=this.g.aa();this.Y=r;t:if(xa(this)){var i=Po(this.g);e="";var a=i.length,o=4==Ao(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Na(this),Ia(this);var u="";break t}this.h.i=new vr.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pr(s)){var c=s;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,na(12),Na(this),Ia(this);break e}Yi(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Da(this,r)}this.P?(_a(this,t,u),Br&&this.i&&3==t&&(Gi(this.S,this.T,"tick",this.hb),this.T.start())):(Yi(this.j,this.m,u,null),Da(this,u)),4==t&&Na(this),this.i&&!this.I&&(4==t?Yo(this.l,this):(this.i=!1,Ea(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,na(12)):(this.o=0,na(13)),Na(this),Ia(this)}}}catch(t){}},fr.hb=function(){if(this.g){var e=Ao(this.g),t=this.g.fa();this.C<t.length&&(Ta(this),_a(this,e,t),this.i&&4!=e&&Ea(this))}},fr.cancel=function(){this.I=!0,Na(this)},fr.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ea(),na(17)),Na(this),this.o=2,Ia(this)):Ca(this,this.V-e)};var Pa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ra){this.h=void 0!==t?t:e.h,Oa(this,e.j),this.s=e.s,this.g=e.g,La(this,e.m),this.l=e.l,t=e.i;var n=new Qa;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ma(this,n),this.o=e.o}else e&&(n=String(e).match(Pa))?(this.h=!!t,Oa(this,n[1]||"",!0),this.s=za(n[2]||""),this.g=za(n[3]||"",!0),La(this,n[4]),this.l=za(n[5]||"",!0),Ma(this,n[6]||"",!0),this.o=za(n[7]||"")):(this.h=!!t,this.i=new Qa(null,this.h))}function ja(e){return new Ra(e)}function Oa(e,t,n){e.j=n?za(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function La(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ma(e,t,n){t instanceof Qa?(e.i=t,function(e,t){t&&!e.j&&(Ya(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($a(this,t),Ja(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Va(t,Ga)),e.i=new Qa(t,e.h))}function Ua(e,t,n){e.i.set(t,n)}function Fa(e){return Ua(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function za(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Va(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ba),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ba(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ra.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Va(t,Ha,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Va(t,Ha,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Va(n,"/"==n.charAt(0)?qa:Wa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Va(n,Ka)),e.join("")};var Ha=/[#\/\?@]/g,Wa=/[#\?:]/g,qa=/[#\?]/g,Ga=/[#\?@]/g,Ka=/#/g;function Qa(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ya(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $a(e,t){Ya(e),t=Za(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Xa(e,t){return Ya(e),t=Za(e,t),e.g.has(t)}function Ja(e,t,n){$a(e,t),0<n.length&&(e.i=null,e.g.set(Za(e,t),Ir(n)),e.h+=n.length)}function Za(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(fr=Qa.prototype).add=function(e,t){Ya(this),this.i=null,e=Za(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},fr.forEach=function(e,t){Ya(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},fr.oa=function(){Ya(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},fr.W=function(e){Ya(this);var t=[];if("string"===typeof e)Xa(this,e)&&(t=t.concat(this.g.get(Za(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},fr.set=function(e,t){return Ya(this),this.i=null,Xa(this,e=Za(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},fr.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},fr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var eo=v((function e(t,n){f(this,e),this.h=t,this.g=n}));function to(e){this.l=e||ro,vr.PerformanceNavigationTiming?e=0<(e=vr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(vr.g&&vr.g.Ga&&vr.g.Ga()&&vr.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var no,ro=10;function io(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ao(e){return e.h?1:e.g?e.g.size:0}function oo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function uo(e,t){e.g?e.g.add(t):e.h=t}function so(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lo(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=S(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ir(e.i)}function co(){}function fo(){this.g=new co}function ho(e,t,n){var r=n||"";try{Aa(e,(function(e,n){var i=e;gr(e)&&(i=Ii(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function po(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function vo(e){this.l=e.ac||null,this.j=e.jb||!1}function mo(e,t){Ei.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=yo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}to.prototype.cancel=function(){if(this.i=lo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=S(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},co.prototype.stringify=function(e){return vr.JSON.stringify(e,void 0)},co.prototype.parse=function(e){return vr.JSON.parse(e,void 0)},Er(vo,ua),vo.prototype.g=function(){return new mo(this.l,this.j)},vo.prototype.i=(no={},function(){return no}),Er(mo,Ei);var yo=0;function go(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function ko(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bo(e)}function bo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(fr=mo.prototype).open=function(e,t){if(this.readyState!=yo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bo(this)},fr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||vr).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},fr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ko(this)),this.readyState=yo},fr.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof vr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;go(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},fr.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ko(this):bo(this),3==this.readyState&&go(this)}},fr.Va=function(e){this.g&&(this.response=this.responseText=e,ko(this))},fr.Ua=function(e){this.g&&(this.response=e,ko(this))},fr.ga=function(){this.g&&ko(this)},fr.setRequestHeader=function(e,t){this.v.append(e,t)},fr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},fr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var wo=vr.JSON.parse;function xo(e){Ei.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_o,this.K=this.L=!1}Er(xo,Ei);var _o="",So=/^https?$/i,Eo=["POST","PUT"];function Co(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,To(e),No(e)}function To(e){e.D||(e.D=!0,Ci(e,"complete"),Ci(e,"error"))}function Io(e){if(e.h&&"undefined"!=typeof pr&&(!e.C[1]||4!=Ao(e)||2!=e.aa()))if(e.v&&4==Ao(e))Vi(e.Ha,0,e);else if(Ci(e,"readystatechange"),4==Ao(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Pa)[1]||null;if(!a&&vr.self&&vr.self.location){var o=vr.self.location.protocol;a=o.substr(0,o.length-1)}i=!So.test(a?a.toLowerCase():"")}t=i}if(t)Ci(e,"complete"),Ci(e,"success");else{e.m=6;try{var u=2<Ao(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",To(e)}}finally{No(e)}}}function No(e,t){if(e.g){Do(e);var n=e.g,r=e.C[0]?mr:null;e.g=null,e.C=null,t||Ci(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Do(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(vr.clearTimeout(e.A),e.A=null)}function Ao(e){return e.g?e.g.readyState:0}function Po(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case _o:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(yu){return null}}function Ro(e){var t="";return oi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function jo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ro(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ua(e,t,n))}function Oo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Lo(e){this.Ca=0,this.i=[],this.j=new Qi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Oo("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Oo("baseRetryDelayMs",5e3,e),this.bb=Oo("retryDelaySeedMs",1e4,e),this.$a=Oo("forwardChannelMaxRetries",2,e),this.ta=Oo("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new to(e&&e.concurrentRequestLimit),this.Fa=new fo,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Mo(e){if(Fo(e),3==e.G){var t=e.U++,n=ja(e.F);Ua(n,"SID",e.I),Ua(n,"RID",t),Ua(n,"TYPE","terminate"),Bo(e,n),(t=new va(e,e.j,t,void 0)).K=2,t.v=Fa(ja(n)),n=!1,vr.navigator&&vr.navigator.sendBeacon&&(n=vr.navigator.sendBeacon(t.v.toString(),"")),!n&&vr.Image&&((new Image).src=t.v,n=!0),n||(t.g=eu(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ea(t)}Jo(e)}function Uo(e){e.g&&(Go(e),e.g.cancel(),e.g=null)}function Fo(e){Uo(e),e.u&&(vr.clearTimeout(e.u),e.u=null),Qo(e),e.h.cancel(),e.m&&("number"===typeof e.m&&vr.clearTimeout(e.m),e.m=null)}function zo(e){io(e.h)||e.m||(e.m=!0,Oi(e.Ja,e),e.C=0)}function Vo(e,t){var n;n=t?t.m:e.U++;var r=ja(e.F);Ua(r,"SID",e.I),Ua(r,"RID",n),Ua(r,"AID",e.T),Bo(e,r),e.o&&e.s&&jo(r,e.o,e.s),n=new va(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Ho(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),uo(e.h,n),ba(n,r,t)}function Bo(e,t){e.ia&&oi(e.ia,(function(e,n){Ua(t,n,e)})),e.l&&Aa({},(function(e,n){Ua(t,n,e)}))}function Ho(e,t,n){n=Math.min(e.i.length,n);var r=e.l?_r(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].h,c=i[s].g;if(0>(l-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ho(c,o,"req"+l+"_")}catch(Tu){r&&r(c)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Wo(e){e.g||e.u||(e.Z=1,Oi(e.Ia,e),e.A=0)}function qo(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=ia(_r(e.Ia,e),$o(e,e.A)),e.A++,!0)}function Go(e){null!=e.B&&(vr.clearTimeout(e.B),e.B=null)}function Ko(e){e.g=new va(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=ja(e.sa);Ua(t,"RID","rpc"),Ua(t,"SID",e.I),Ua(t,"CI",e.L?"0":"1"),Ua(t,"AID",e.T),Ua(t,"TYPE","xmlhttp"),Bo(e,t),e.o&&e.s&&jo(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Fa(ja(t)),n.s=null,n.P=!0,wa(n,e)}function Qo(e){null!=e.v&&(vr.clearTimeout(e.v),e.v=null)}function Yo(e,t){var n=null;if(e.g==t){Qo(e),Go(e),e.g=null;var r=2}else{if(!oo(e.h,t))return;n=t.D,so(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ci(r=Ji(),new ra(r,n)),zo(e)}else Wo(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(ao(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=ia(_r(e.Ja,e,t),$o(e,e.C)),e.C++,!0))}(e,t)||2==r&&qo(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Xo(e,5);break;case 4:Xo(e,10);break;case 3:Xo(e,6);break;default:Xo(e,2)}}function $o(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Xo(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=_r(e.kb,e);n||(n=new Ra("//www.google.com/images/cleardot.gif"),vr.location&&"http"==vr.location.protocol||Oa(n,"https"),Fa(n)),function(e,t){var n=new Qi;if(vr.Image){var r=new Image;r.onload=Sr(po,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Sr(po,n,r,"TestLoadImage: error",!1,t),r.onabort=Sr(po,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Sr(po,n,r,"TestLoadImage: timeout",!1,t),vr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else na(2);e.G=0,e.l&&e.l.va(t),Jo(e),Fo(e)}function Jo(e){if(e.G=0,e.la=[],e.l){var t=lo(e.h);0==t.length&&0==e.i.length||(Nr(e.la,t),Nr(e.la,e.i),e.h.i.length=0,Ir(e.i),e.i.length=0),e.l.ua()}}function Zo(e,t,n){var r=n instanceof Ra?ja(n):new Ra(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),La(r,r.m);else{var i=vr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ra(null,void 0);r&&Oa(a,r),t&&(a.g=t),i&&La(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Ua(r,n,t),Ua(r,"VER",e.ma),Bo(e,r),r}function eu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new xo(new vo({jb:!0})):new xo(e.ra)).Ka(e.H),t}function tu(){}function nu(){if(zr&&!(10<=Number(Zr)))throw Error("Environmental error: no available transport.")}function ru(e,t){Ei.call(this),this.g=new Lo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Pr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ou(this)}function iu(e){ha.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function au(){da.call(this),this.status=1}function ou(e){this.g=e}(fr=xo.prototype).Ka=function(e){this.L=e},fr.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ca.g(),this.C=this.u?sa(this.u):sa(ca),this.g.onreadystatechange=_r(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Co(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=S(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=vr.FormData&&e instanceof vr.FormData,!(0<=Tr(Eo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,c=S(n);try{for(c.s();!(l=c.n()).done;){var f=s(l.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Do(this),0<this.B&&((this.K=function(e){return zr&&Xr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_r(this.qa,this)):this.A=Vi(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Co(this,u)}},fr.qa=function(){"undefined"!=typeof pr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ci(this,"timeout"),this.abort(8))},fr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ci(this,"complete"),Ci(this,"abort"),No(this))},fr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),No(this,!0)),xo.X.M.call(this)},fr.Ha=function(){this.s||(this.F||this.v||this.l?Io(this):this.fb())},fr.fb=function(){Io(this)},fr.aa=function(){try{return 2<Ao(this)?this.g.status:-1}catch(no){return-1}},fr.fa=function(){try{return this.g?this.g.responseText:""}catch(no){return""}},fr.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wo(t)}},fr.Ea=function(){return this.m},fr.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(fr=Lo.prototype).ma=8,fr.G=1,fr.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new va(this,this.j,e,void 0),n=this.s;if(this.S&&(n?li(n=ui(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ho(this,t,r),Ua(i=ja(this.F),"RID",e),Ua(i,"CVER",22),this.D&&Ua(i,"X-HTTP-Session-Id",this.D),Bo(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Ro(n)))+"&"+r:this.o&&jo(i,this.o,n)),uo(this.h,t),this.Ya&&Ua(i,"TYPE","init"),this.O?(Ua(i,"$req",r),Ua(i,"SID","null"),t.Z=!0,ba(t,i,null)):ba(t,i,r),this.G=2}}else 3==this.G&&(e?Vo(this,e):0==this.i.length||io(this.h)||Vo(this))},fr.Ia=function(){if(this.u=null,Ko(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=ia(_r(this.eb,this),e)}},fr.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,na(10),Uo(this),Ko(this))},fr.cb=function(){null!=this.v&&(this.v=null,Uo(this),qo(this),na(19))},fr.kb=function(e){e?(this.j.info("Successfully pinged google.com"),na(2)):(this.j.info("Failed to ping google.com"),na(1))},(fr=tu.prototype).xa=function(){},fr.wa=function(){},fr.va=function(){},fr.ua=function(){},fr.Ra=function(){},nu.prototype.g=function(e,t){return new ru(e,t)},Er(ru,Ei),ru.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;na(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Zo(e,null,e.V),zo(e)},ru.prototype.close=function(){Mo(this.g)},ru.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ii(e),e=n);t.i.push(new eo(t.ab++,e)),3==t.G&&zo(t)},ru.prototype.M=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,ru.X.M.call(this)},Er(iu,ha),Er(au,da),Er(ou,tu),ou.prototype.xa=function(){Ci(this.g,"a")},ou.prototype.wa=function(e){Ci(this.g,new iu(e))},ou.prototype.va=function(e){Ci(this.g,new au)},ou.prototype.ua=function(){Ci(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,ru.prototype.send=ru.prototype.u,ru.prototype.open=ru.prototype.m,ru.prototype.close=ru.prototype.close,aa.NO_ERROR=0,aa.TIMEOUT=8,aa.HTTP_ERROR=6,oa.COMPLETE="complete",la.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",Ei.prototype.listen=Ei.prototype.N,xo.prototype.listenOnce=xo.prototype.O,xo.prototype.getLastError=xo.prototype.Oa,xo.prototype.getLastErrorCode=xo.prototype.Ea,xo.prototype.getStatus=xo.prototype.aa,xo.prototype.getResponseJson=xo.prototype.Sa,xo.prototype.getResponseText=xo.prototype.fa,xo.prototype.send=xo.prototype.da,xo.prototype.setWithCredentials=xo.prototype.Ka;var uu=dr.createWebChannelTransport=function(){return new nu},su=dr.getStatEventTarget=function(){return Ji()},lu=dr.ErrorCode=aa,cu=dr.EventType=oa,fu=dr.Event=$i,hu=dr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},du=dr.FetchXmlHttpFactory=vo,pu=dr.WebChannel=la,vu=dr.XhrIo=xo,mu="@firebase/firestore",yu=function(){function e(t){f(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yu.UNAUTHENTICATED=new yu(null),yu.GOOGLE_CREDENTIALS=new yu("google-credentials-uid"),yu.FIRST_PARTY=new yu("first-party-uid"),yu.MOCK_USER=new yu("mock-user");var gu="9.20.0",ku=new cn("@firebase/firestore");function bu(){return ku.logLevel}function wu(e){if(ku.logLevel<=nn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Su);ku.debug.apply(ku,["Firestore (".concat(gu,"): ").concat(e)].concat(c(i)))}}function xu(e){if(ku.logLevel<=nn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Su);ku.error.apply(ku,["Firestore (".concat(gu,"): ").concat(e)].concat(c(i)))}}function _u(e){if(ku.logLevel<=nn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Su);ku.warn.apply(ku,["Firestore (".concat(gu,"): ").concat(e)].concat(c(i)))}}function Su(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Eu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gu,") INTERNAL ASSERTION FAILED: ")+e;throw xu(t),new Error(t)}function Cu(e,t){e||Eu()}function Tu(e,t){return e}var Iu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nu=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(Gt),Du=v((function e(){var t=this;f(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Au=v((function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Pu=function(){function e(){f(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ru=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ju=function(){function e(t){f(this,e),this.t=t,this.currentUser=yu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Du;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Du,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){wu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(wu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Du)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(wu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Cu("string"==typeof n.accessToken),new Au(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Cu(null===e||"string"==typeof e),new yu(e)}}]),e}(),Ou=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=yu.FIRST_PARTY,this.g=new Map}return v(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Lu=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new Ou(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Mu=v((function e(t){f(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Uu=function(){function e(t){f(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&wu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,wu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){wu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):wu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Cu("string"==typeof t.token),e.T=t.token,new Mu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Fu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var zu=function(){function e(){f(this,e)}return v(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Fu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Vu(e,t){return e<t?-1:e>t?1:0}function Bu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Hu=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Nu(Iu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Nu(Iu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Nu(Iu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nu(Iu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Vu(this.nanoseconds,e.nanoseconds):Vu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Wu=function(){function e(t){f(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Hu(0,0))}},{key:"max",value:function(){return new e(new Hu(253402300799,999999999))}}]),e}(),qu=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&Eu(),void 0===r?r=t.length-n:r>t.length-n&&Eu(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Gu=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,c(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qu),Ku=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qu=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ku.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Nu(Iu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Nu(Iu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Nu(Iu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qu),Yu=function(){function e(t){f(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Gu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Gu.fromString(t))}},{key:"fromName",value:function(t){return new e(Gu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Gu.emptyPath())}},{key:"comparator",value:function(e,t){return Gu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Gu(t.slice()))}}]),e}(),$u=v((function e(t,n,r,i){f(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));$u.UNKNOWN_ID=-1;function Xu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Wu.fromTimestamp(1e9===r?new Hu(n+1,0):new Hu(n,r));return new Zu(i,Yu.empty(),t)}function Ju(e){return new Zu(e.readTime,e.key,-1)}var Zu=function(){function e(t,n,r){f(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e(Wu.min(),Yu.empty(),-1)}},{key:"max",value:function(){return new e(Wu.max(),Yu.empty(),-1)}}]),e}();function es(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Yu.comparator(e.documentKey,t.documentKey))?n:Vu(e.largestBatchId,t.largestBatchId)}var ts="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ns=function(){function e(){f(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function rs(e){return is.apply(this,arguments)}function is(){return is=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Iu.FAILED_PRECONDITION&&t.message===ts){e.next=2;break}throw t;case 2:wu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}var as=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Eu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=S(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function os(e){return"IndexedDbTransactionError"===e.name}var us=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function ss(e){return null==e}function ls(e){return 0===e&&1/e==-1/0}function cs(e){return"number"==typeof e&&Number.isInteger(e)&&!ls(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}us.ct=-1;var fs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),hs=([].concat(c(fs),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),ds=hs;[].concat(ds,["indexConfiguration","indexState","indexEntries"]);function ps(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ms(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ys=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||ks.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ks.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ks.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new gs(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new gs(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new gs(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new gs(this.root,e,this.comparator,!0)}}]),e}(),gs=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ks=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Eu();if(this.right.isRed())throw Eu();var e=this.left.check();if(e!==this.right.check())throw Eu();return e+(this.isRed()?0:1)}}]),e}();ks.EMPTY=null,ks.RED=!0,ks.BLACK=!1,ks.EMPTY=new(function(){function e(){f(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw Eu()}},{key:"value",get:function(){throw Eu()}},{key:"color",get:function(){throw Eu()}},{key:"left",get:function(){throw Eu()}},{key:"right",get:function(){throw Eu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ks(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var bs=function(){function e(t){f(this,e),this.comparator=t,this.data=new ys(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ws(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ws(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ws=function(){function e(t){f(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var xs=function(){function e(t){f(this,e),this.fields=t,t.sort(Qu.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new bs(Qu.comparator),i=S(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,u=S(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(l){u.e(l)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=S(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Bu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),_s=function(e){y(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return v(n)}(_(Error));var Ss=function(e){function t(e){f(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Vu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new _s("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ss.EMPTY_BYTE_STRING=new Ss("");var Es=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(e){if(Cu(!!e),"string"==typeof e){var t=0,n=Es.exec(e);if(Cu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ts(e.seconds),nanos:Ts(e.nanos)}}function Ts(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Is(e){return"string"==typeof e?Ss.fromBase64String(e):Ss.fromUint8Array(e)}function Ns(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ds(e){var t=e.mapValue.fields.__previous_value__;return Ns(t)?Ds(t):t}function As(e){var t=Cs(e.mapValue.fields.__local_write_time__.timestampValue);return new Hu(t.seconds,t.nanos)}var Ps=v((function e(t,n,r,i,a,o,u,s){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Rs=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),js={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Os(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ns(e)?4:Ys(e)?9007199254740991:10:Eu()}function Ls(e,t){if(e===t)return!0;var n=Os(e);if(n!==Os(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return As(e).isEqual(As(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Cs(e.timestampValue),r=Cs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Is(e.bytesValue).isEqual(Is(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ts(e.geoPointValue.latitude)===Ts(t.geoPointValue.latitude)&&Ts(e.geoPointValue.longitude)===Ts(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ts(e.integerValue)===Ts(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ts(e.doubleValue),r=Ts(t.doubleValue);return n===r?ls(n)===ls(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bu(e.arrayValue.values||[],t.arrayValue.values||[],Ls);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ps(n)!==ps(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ls(n[i],r[i])))return!1;return!0}(e,t);default:return Eu()}}function Ms(e,t){return void 0!==(e.values||[]).find((function(e){return Ls(e,t)}))}function Us(e,t){if(e===t)return 0;var n=Os(e),r=Os(t);if(n!==r)return Vu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ts(e.integerValue||e.doubleValue),r=Ts(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fs(e.timestampValue,t.timestampValue);case 4:return Fs(As(e),As(t));case 5:return Vu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Is(e),r=Is(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Vu(n[i],r[i]);if(0!==a)return a}return Vu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Vu(Ts(e.latitude),Ts(t.latitude));return 0!==n?n:Vu(Ts(e.longitude),Ts(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Us(n[i],r[i]);if(a)return a}return Vu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===js.mapValue&&t===js.mapValue)return 0;if(e===js.mapValue)return 1;if(t===js.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Vu(r[o],a[o]);if(0!==u)return u;var s=Us(n[r[o]],i[a[o]]);if(0!==s)return s}return Vu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Eu()}}function Fs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vu(e,t);var n=Cs(e),r=Cs(t),i=Vu(n.seconds,r.seconds);return 0!==i?i:Vu(n.nanos,r.nanos)}function zs(e){return Vs(e)}function Vs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Cs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Is(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Yu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=S(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Vs(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=S(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Vs(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Eu();var t,n}function Bs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Hs(e){return!!e&&"integerValue"in e}function Ws(e){return!!e&&"arrayValue"in e}function qs(e){return!!e&&"nullValue"in e}function Gs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ks(e){return!!e&&"mapValue"in e}function Qs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return vs(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Qs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Qs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ys(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var $s=function(){function e(t){f(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ks(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qs(t)}},{key:"setAll",value:function(e){var t=this,n=Qu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Qs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ks(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ls(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ks(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){vs(t,(function(t,n){return e[t]=n}));var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Qs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Xs(e){var t=[];return vs(e.fields,(function(e,n){var r=new Qu([e]);if(Ks(n)){var i=Xs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=S(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new xs(t)}var Js=function(){function e(t,n,r,i,a,o,u){f(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Wu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=$s.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=$s.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Wu.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Wu.min(),Wu.min(),Wu.min(),$s.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Wu.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Wu.min(),Wu.min(),$s.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Wu.min(),Wu.min(),$s.empty(),2)}}]),e}(),Zs=v((function e(t,n){f(this,e),this.position=t,this.inclusive=n}));function el(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Yu.comparator(Yu.fromName(o.referenceValue),n.key):Us(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ls(e.position[n],t.position[n]))return!1;return!0}var nl=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n}));function rl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var il=v((function e(){f(this,e)})),al=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Us(t,this.value)):null!==t&&Os(this.value)===Os(t)&&this.matchesComparison(Us(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Eu()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new dl(e,t,r):"array-contains"===t?new yl(e,r):"in"===t?new gl(e,r):"not-in"===t?new kl(e,r):"array-contains-any"===t?new bl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new pl(e,n):new vl(e,n)}}]),n}(il),ol=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return v(n,[{key:"matches",value:function(e){return ul(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=S(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(il);function ul(e){return"and"===e.op}function sl(e){return ll(e)&&ul(e)}function ll(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof ol)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function cl(e){if(e instanceof al)return e.field.canonicalString()+e.op.toString()+zs(e.value);if(sl(e))return e.filters.map((function(e){return cl(e)})).join(",");var t=e.filters.map((function(e){return cl(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function fl(e,t){return e instanceof al?function(e,t){return t instanceof al&&e.op===t.op&&e.field.isEqual(t.field)&&Ls(e.value,t.value)}(e,t):e instanceof ol?function(e,t){return t instanceof ol&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&fl(n,t.filters[r])}),!0)}(e,t):void Eu()}function hl(e){return e instanceof al?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(zs(e.value))}(e):e instanceof ol?function(e){return e.op.toString()+" {"+e.getFilters().map(hl).join(" ,")+"}"}(e):"Filter"}var dl=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=Yu.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=Yu.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(al),pl=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=ml("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(al),vl=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=ml("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(al);function ml(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Yu.fromName(e.referenceValue)}))}var yl=function(e){y(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ws(t)&&Ms(t.arrayValue,this.value)}}]),n}(al),gl=function(e){y(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ms(this.value.arrayValue,t)}}]),n}(al),kl=function(e){y(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ms(this.value.arrayValue,t)}}]),n}(al),bl=function(e){y(n,e);var t=w(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ws(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ms(t.value.arrayValue,e)}))}}]),n}(al),wl=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function xl(e){return new wl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function _l(e){var t=Tu(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return cl(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ss(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return zs(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return zs(e)})).join(",")),t.ft=n}return t.ft}function Sl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!rl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!fl(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tl(e.startAt,t.startAt)&&tl(e.endAt,t.endAt)}function El(e){return Yu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Cl=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function Tl(e,t,n,r,i,a,o,u){return new Cl(e,t,n,r,i,a,o,u)}function Il(e){return new Cl(e)}function Nl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Dl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Al(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Pl(e){return null!==e.collectionGroup}function Rl(e){var t=Tu(e);if(null===t.dt){t.dt=[];var n=Al(t),r=Dl(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new nl(n)),t.dt.push(new nl(Qu.keyField(),"asc"));else{var i,a=!1,o=S(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new nl(Qu.keyField(),s))}}}return t.dt}function jl(e){var t=Tu(e);if(!t.wt)if("F"===t.limitType)t.wt=xl(t.path,t.collectionGroup,Rl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=S(Rl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new nl(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var u=t.endAt?new Zs(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Zs(t.startAt.position,t.startAt.inclusive):null;t.wt=xl(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Ol(e,t){t.getFirstInequalityField(),Al(e);var n=e.filters.concat([t]);return new Cl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ll(e,t,n){return new Cl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ml(e,t){return Sl(jl(e),jl(t))&&e.limitType===t.limitType}function Ul(e){return"".concat(_l(jl(e)),"|lt:").concat(e.limitType)}function Fl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return hl(e)})).join(", "),"]")),ss(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return zs(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return zs(e)})).join(",")),"Target(".concat(t,")")}(jl(e)),"; limitType=").concat(e.limitType,")")}function zl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=S(Rl(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=S(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=el(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Rl(e),t))&&!(e.endAt&&!function(e,t,n){var r=el(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Rl(e),t))}(e,t)}function Vl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bl(e){return function(t,n){var r,i=!1,a=S(Rl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Hl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Hl(e,t,n){var r=e.field.isKeyField()?Yu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Us(r,i):Eu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Eu()}}var Wl=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){vs(this.inner,(function(t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ms(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ql=new ys(Yu.comparator);function Gl(){return ql}var Kl=new ys(Yu.comparator);function Ql(){for(var e=Kl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Yl(e){var t=Kl;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function $l(){return Jl()}function Xl(){return Jl()}function Jl(){return new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Zl=new ys(Yu.comparator),ec=new bs(Yu.comparator);function tc(){for(var e=ec,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var nc=new bs(Vu);function rc(){return nc}function ic(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ls(t)?"-0":t}}function ac(e){return{integerValue:""+e}}function oc(e,t){return cs(t)?ac(t):ic(e,t)}var uc=v((function e(){f(this,e),this._=void 0}));function sc(e,t,n){return e instanceof fc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof hc?dc(e,t):e instanceof pc?vc(e,t):function(e,t){var n=cc(e,t),r=yc(n)+yc(e._t);return Hs(n)&&Hs(e._t)?ac(r):ic(e.serializer,r)}(e,t)}function lc(e,t,n){return e instanceof hc?dc(e,t):e instanceof pc?vc(e,t):n}function cc(e,t){return e instanceof mc?Hs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var fc=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n)}(uc),hc=function(e){y(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return v(n)}(uc);function dc(e,t){var n,r=gc(t),i=S(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ls(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var pc=function(e){y(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return v(n)}(uc);function vc(e,t){var n,r=gc(t),i=S(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ls(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var mc=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return v(n)}(uc);function yc(e){return Ts(e.integerValue||e.doubleValue)}function gc(e){return Ws(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var kc=v((function e(t,n){f(this,e),this.field=t,this.transform=n}));var bc=v((function e(t,n){f(this,e),this.version=t,this.transformResults=n})),wc=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function xc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var _c=v((function e(){f(this,e)}));function Sc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Lc(e.key,wc.none()):new Nc(e.key,e.data,wc.none());var n,r=e.data,i=$s.empty(),a=new bs(Qu.comparator),o=S(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(l){o.e(l)}finally{o.f()}return new Dc(e.key,i,new xs(a.toArray()),wc.none())}function Ec(e,t,n){e instanceof Nc?function(e,t,n){var r=e.value.clone(),i=Pc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dc?function(e,t,n){if(xc(e.precondition,t)){var r=Pc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ac(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cc(e,t,n,r){return e instanceof Nc?function(e,t,n,r){if(!xc(e.precondition,t))return n;var i=e.value.clone(),a=Rc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dc?function(e,t,n,r){if(!xc(e.precondition,t))return n;var i=Rc(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ac(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return xc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tc(e,t){var n,r=null,i=S(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=cc(a.transform,o||null);null!=u&&(null===r&&(r=$s.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ic(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof hc&&t instanceof hc||e instanceof pc&&t instanceof pc?Bu(e.elements,t.elements,Ls):e instanceof mc&&t instanceof mc?Ls(e._t,t._t):e instanceof fc&&t instanceof fc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Nc=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(_c),Dc=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(_c);function Ac(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Pc(e,t,n){var r=new Map;Cu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,lc(o,u,n[i]))}return r}function Rc(e,t,n){var r,i=new Map,a=S(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,sc(u,s,t))}}catch(l){a.e(l)}finally{a.f()}return i}var jc,Oc,Lc=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(_c),Mc=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(_c),Uc=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ec(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=S(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Cc(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=S(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Cc(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Xl();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Sc(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Wu.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),tc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Bu(this.mutations,e.mutations,(function(e,t){return Ic(e,t)}))&&Bu(this.baseMutations,e.baseMutations,(function(e,t){return Ic(e,t)}))}}]),e}(),Fc=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){Cu(t.mutations.length===r.length);for(var i=Zl,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),zc=function(){function e(t,n){f(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Vc=v((function e(t){f(this,e),this.count=t}));function Bc(e){switch(e){default:return Eu();case Iu.CANCELLED:case Iu.UNKNOWN:case Iu.DEADLINE_EXCEEDED:case Iu.RESOURCE_EXHAUSTED:case Iu.INTERNAL:case Iu.UNAVAILABLE:case Iu.UNAUTHENTICATED:return!1;case Iu.INVALID_ARGUMENT:case Iu.NOT_FOUND:case Iu.ALREADY_EXISTS:case Iu.PERMISSION_DENIED:case Iu.FAILED_PRECONDITION:case Iu.ABORTED:case Iu.OUT_OF_RANGE:case Iu.UNIMPLEMENTED:case Iu.DATA_LOSS:return!0}}function Hc(e){if(void 0===e)return xu("GRPC error has no .code"),Iu.UNKNOWN;switch(e){case jc.OK:return Iu.OK;case jc.CANCELLED:return Iu.CANCELLED;case jc.UNKNOWN:return Iu.UNKNOWN;case jc.DEADLINE_EXCEEDED:return Iu.DEADLINE_EXCEEDED;case jc.RESOURCE_EXHAUSTED:return Iu.RESOURCE_EXHAUSTED;case jc.INTERNAL:return Iu.INTERNAL;case jc.UNAVAILABLE:return Iu.UNAVAILABLE;case jc.UNAUTHENTICATED:return Iu.UNAUTHENTICATED;case jc.INVALID_ARGUMENT:return Iu.INVALID_ARGUMENT;case jc.NOT_FOUND:return Iu.NOT_FOUND;case jc.ALREADY_EXISTS:return Iu.ALREADY_EXISTS;case jc.PERMISSION_DENIED:return Iu.PERMISSION_DENIED;case jc.FAILED_PRECONDITION:return Iu.FAILED_PRECONDITION;case jc.ABORTED:return Iu.ABORTED;case jc.OUT_OF_RANGE:return Iu.OUT_OF_RANGE;case jc.UNIMPLEMENTED:return Iu.UNIMPLEMENTED;case jc.DATA_LOSS:return Iu.DATA_LOSS;default:return Eu()}}(Oc=jc||(jc={}))[Oc.OK=0]="OK",Oc[Oc.CANCELLED=1]="CANCELLED",Oc[Oc.UNKNOWN=2]="UNKNOWN",Oc[Oc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oc[Oc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oc[Oc.NOT_FOUND=5]="NOT_FOUND",Oc[Oc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oc[Oc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oc[Oc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oc[Oc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oc[Oc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oc[Oc.ABORTED=10]="ABORTED",Oc[Oc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oc[Oc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oc[Oc.INTERNAL=13]="INTERNAL",Oc[Oc.UNAVAILABLE=14]="UNAVAILABLE",Oc[Oc.DATA_LOSS=15]="DATA_LOSS";var Wc=function(){function e(){f(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return v(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return qc}},{key:"getOrCreateInstance",value:function(){return null===qc&&(qc=new e),qc}}]),e}(),qc=null,Gc=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Kc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Wu.min(),i,rc(),Gl(),tc())}}]),e}(),Kc=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,tc(),tc(),tc())}}]),e}(),Qc=v((function e(t,n,r,i){f(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),Yc=v((function e(t,n){f(this,e),this.targetId=t,this.Et=n})),$c=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ss.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Xc=function(){function e(){f(this,e),this.At=0,this.Rt=ef(),this.vt=Ss.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return v(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=tc(),t=tc(),n=tc();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Eu()}})),new Kc(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=ef()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),Jc=function(){function e(t){f(this,e),this.Ft=t,this.Bt=new Map,this.Lt=Gl(),this.qt=Zc(),this.Ut=new bs(Vu)}return v(e,[{key:"Kt",value:function(e){var t,n=S(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=S(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Eu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(El(a))if(0===r){var o=new Yu(a.path);this.Qt(n,o,Js.newNoDocument(o,Wu.min()))}else Cu(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=Wc.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&El(a.target)){var o=new Yu(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Js.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=tc();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Gc(e,n,this.Ut,this.Lt,r);return this.Lt=Gl(),this.qt=Zc(),this.Ut=new bs(Vu),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Xc,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new bs(Vu),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||wu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Xc),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function Zc(){return new ys(Yu.comparator)}function ef(){return new ys(Yu.comparator)}var tf={asc:"ASCENDING",desc:"DESCENDING"},nf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rf={and:"AND",or:"OR"},af=v((function e(t,n){f(this,e),this.databaseId=t,this.useProto3Json=n}));function of(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function uf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sf(e,t){return of(e,t.toTimestamp())}function lf(e){return Cu(!!e),Wu.fromTimestamp(function(e){var t=Cs(e);return new Hu(t.seconds,t.nanos)}(e))}function cf(e,t){return function(e){return new Gu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ff(e){var t=Gu.fromString(e);return Cu(Af(t)),t}function hf(e,t){return cf(e.databaseId,t.path)}function df(e,t){var n=ff(t);if(n.get(1)!==e.databaseId.projectId)throw new Nu(Iu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nu(Iu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yu(yf(n))}function pf(e,t){return cf(e.databaseId,t)}function vf(e){var t=ff(e);return 4===t.length?Gu.emptyPath():yf(t)}function mf(e){return new Gu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yf(e){return Cu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gf(e,t,n){return{name:hf(e,t),fields:n.value.mapValue.fields}}function kf(e,t){var n;if(t instanceof Nc)n={update:gf(e,t.key,t.value)};else if(t instanceof Lc)n={delete:hf(e,t.key)};else if(t instanceof Dc)n={update:gf(e,t.key,t.data),updateMask:Df(t.fieldMask)};else{if(!(t instanceof Mc))return Eu();n={verify:hf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof fc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mc)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Eu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Eu()}(e,t.precondition)),n}function bf(e,t){return{documents:[pf(e,t.path)]}}function wf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=pf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=pf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Nf(ol.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tf(e.field),direction:Sf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||ss(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xf(e){var t=vf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Cu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=_f(e);return t instanceof ol&&sl(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new nl(If(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return ss(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new Zs(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new Zs(n,t)}(n.endAt)),Tl(t,i,u,o,s,"F",l,c)}function _f(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=If(e.unaryFilter.field);return al.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=If(e.unaryFilter.field);return al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=If(e.unaryFilter.field);return al.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=If(e.unaryFilter.field);return al.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Eu()}}(e):void 0!==e.fieldFilter?function(e){return al.create(If(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Eu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ol.create(e.compositeFilter.filters.map((function(e){return _f(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Eu()}}(e.compositeFilter.op))}(e):Eu()}function Sf(e){return tf[e]}function Ef(e){return nf[e]}function Cf(e){return rf[e]}function Tf(e){return{fieldPath:e.canonicalString()}}function If(e){return Qu.fromServerFormat(e.fieldPath)}function Nf(e){return e instanceof al?function(e){if("=="===e.op){if(Gs(e.value))return{unaryFilter:{field:Tf(e.field),op:"IS_NAN"}};if(qs(e.value))return{unaryFilter:{field:Tf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gs(e.value))return{unaryFilter:{field:Tf(e.field),op:"IS_NOT_NAN"}};if(qs(e.value))return{unaryFilter:{field:Tf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tf(e.field),op:Ef(e.op),value:e.value}}}(e):e instanceof ol?function(e){var t=e.getFilters().map((function(e){return Nf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Cf(e.op),filters:t}}}(e):Eu()}function Df(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Af(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Pf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Wu.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ss.EMPTY_BYTE_STRING;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Rf=v((function e(t){f(this,e),this.se=t}));function jf(e){var t=xf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ll(t,t.limit,"L"):t}var Of=function(){function e(){f(this,e)}return v(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Ts(e.integerValue));else if("doubleValue"in e){var n=Ts(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),ls(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Is(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Ys(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Eu()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Yu.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();Of.pe=new Of;var Lf=function(){function e(){f(this,e),this.He=new Mf}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),as.resolve()}},{key:"getCollectionParents",value:function(e,t){return as.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return as.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return as.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return as.resolve(null)}},{key:"getIndexType",value:function(e,t){return as.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return as.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return as.resolve(null)}},{key:"getMinOffset",value:function(e,t){return as.resolve(Zu.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return as.resolve(Zu.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return as.resolve()}},{key:"updateIndexEntries",value:function(e,t){return as.resolve()}}]),e}(),Mf=function(){function e(){f(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bs(Gu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new bs(Gu.comparator)).toArray()}}]),e}();new Uint8Array(0);var Uf=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Uf.DEFAULT_COLLECTION_PERCENTILE=10,Uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uf.DEFAULT=new Uf(41943040,Uf.DEFAULT_COLLECTION_PERCENTILE,Uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uf.DISABLED=new Uf(-1,0,0);var Ff=function(){function e(t){f(this,e),this.Rn=t}return v(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}();var zf=function(){function e(){f(this,e),this.changes=new Wl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Js.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?as.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Vf=v((function e(t,n){f(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Bf=function(){function e(t,n,r,i){f(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Cc(r.mutation,e,xs.empty(),Hu.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,tc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tc(),i=$l();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ql();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=$l();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,tc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Gl(),a=Jl(),o=Jl();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Dc)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Cc(o.mutation,t,o.mutation.getFieldMask(),Hu.now())):a.set(t.key,xs.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Vf(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Jl(),i=new ys((function(e,t){return e-t})),a=tc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=S(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||xs.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||tc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,l=i.value,c=Xl();l.forEach((function(e){if(!a.has(e)){var n=Sc(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,c))};u.hasNext();)s();return as.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Yu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):as.resolve($l()),u=-1,s=a;return o.next((function(t){return as.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?as.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,tc())})).next((function(e){return{batchId:u,changes:Yl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Yu(t)).next((function(e){var t=Ql();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ql();return this.indexManager.getCollectionParents(e,i).next((function(o){return as.forEach(o,(function(o){var u=function(e,t){return new Cl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Js.newInvalidDocument(r)))}));var n=Ql();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Cc(a.mutation,i,xs.empty(),Hu.now()),zl(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Hf=function(){function e(t){f(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return as.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:lf(n.createTime)}),as.resolve()}},{key:"getNamedQuery",value:function(e,t){return as.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:jf(e.bundledQuery),readTime:lf(e.readTime)}}(t)),as.resolve()}}]),e}(),Wf=function(){function e(){f(this,e),this.overlays=new ys(Yu.comparator),this.ts=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return as.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=$l();return as.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),as.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),as.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=$l(),i=t.length+1,a=new Yu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return as.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ys((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=$l(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=$l(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return as.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new zc(t,n));var a=this.ts.get(t);void 0===a&&(a=tc(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),qf=function(){function e(){f(this,e),this.es=new bs(Gf.ns),this.ss=new bs(Gf.rs)}return v(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Gf(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Gf(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Yu(new Gu([])),r=new Gf(n,e),i=new Gf(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Yu(new Gu([])),n=new Gf(t,e),r=new Gf(t,e+1),i=tc();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Gf(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Gf=function(){function e(t,n){f(this,e),this.key=t,this.ds=n}return v(e,null,[{key:"ns",value:function(e,t){return Yu.comparator(e.key,t.key)||Vu(e.ds,t.ds)}},{key:"rs",value:function(e,t){return Vu(e.ds,t.ds)||Yu.comparator(e.key,t.key)}}]),e}(),Kf=function(){function e(t,n){f(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new bs(Gf.ns)}return v(e,[{key:"checkEmpty",value:function(e){return as.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Uc(i,t,n,r);this.mutationQueue.push(a);var o,u=S(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new Gf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return as.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return as.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return as.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return as.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return as.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Gf(t,0),i=new Gf(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),as.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bs(Vu);return t.forEach((function(e){var t=new Gf(e,0),i=new Gf(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),as.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Yu.isDocumentKey(i)||(i=i.child(""));var a=new Gf(new Yu(i),0),o=new bs(Vu);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),as.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Cu(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return as.forEach(t.mutations,(function(i){var a=new Gf(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Gf(t,0),r=this._s.firstAfterOrEqual(n);return as.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,as.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Qf=function(){function e(t){f(this,e),this.Ts=t,this.docs=new ys(Yu.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return as.resolve(n?n.document.mutableCopy():Js.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Js.newInvalidDocument(e))})),as.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Gl(),a=t.path,o=new Yu(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),l=s.key,c=s.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||es(Ju(c),n)<=0||(r.has(c.key)||zl(t,c))&&(i=i.insert(c.key,c.mutableCopy()))}return as.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Eu()}},{key:"Es",value:function(e,t){return as.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Yf(this)}},{key:"getSize",value:function(e){return as.resolve(this.size)}}]),e}(),Yf=function(e){y(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).Jn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),as.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(zf),$f=function(){function e(t){f(this,e),this.persistence=t,this.As=new Wl((function(e){return _l(e)}),Sl),this.lastRemoteSnapshotVersion=Wu.min(),this.highestTargetId=0,this.Rs=0,this.vs=new qf,this.targetCount=0,this.bs=Ff.vn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),as.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return as.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return as.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),as.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),as.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Ff(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,as.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),as.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,as.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),as.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return as.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return as.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),as.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),as.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),as.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return as.resolve(n)}},{key:"containsKey",value:function(e,t){return as.resolve(this.vs.containsKey(t))}}]),e}(),Xf=function(){function e(t,n){var r=this;f(this,e),this.Ps={},this.overlays={},this.Vs=new us(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new $f(this),this.indexManager=new Lf,this.remoteDocumentCache=new Qf((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Rf(n),this.xs=new Hf(this.serializer)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Wf,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new Kf(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;wu("MemoryPersistence","Starting transaction:",e);var i=new Jf(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return as.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Jf=function(e){y(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(ns),Zf=function(){function e(t){f(this,e),this.persistence=t,this.$s=new qf,this.Ms=null}return v(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Eu()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),as.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),as.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),as.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return as.forEach(this.Bs,(function(r){var i=Yu.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,Wu.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return as.or([function(){return as.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}();var eh=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return v(e,null,[{key:"Di",value:function(t,n){var r,i=tc(),a=tc(),o=S(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),th=function(){function e(){f(this,e),this.Ci=!1}return v(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(Nl(t))return as.resolve(null);var r=jl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ll(t,null,"F"),r=jl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=tc.apply(void 0,c(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Ll(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return Nl(t)||r.isEqual(Wu.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(bu()<=nn.DEBUG&&wu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fl(t)),i.Fi(e,o,t,Xu(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new bs(Bl(e));return t.forEach((function(t,r){zl(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return bu()<=nn.DEBUG&&wu("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.xi.getDocumentsMatchingQuery(e,t,Zu.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),nh=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new ys(Vu),this.qi=new Wl((function(e){return _l(e)}),Sl),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return v(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bf(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function rh(e,t,n,r){return new nh(e,t,n,r)}function ih(e,t){return ah.apply(this,arguments)}function ah(){return ah=We(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=tc(),s=S(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(l.batchId);var c,f=S(l.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=S(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=S(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ah.apply(this,arguments)}function oh(e,t){var n=Tu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=as.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Cu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=tc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function uh(e){var t=Tu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function sh(e,t){var n=Tu(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var l=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?l=l.withResumeToken(Ss.EMPTY_BYTE_STRING,Wu.min()).withLastLimboFreeSnapshotVersion(Wu.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(u,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,l,a)&&o.push(n.Ds.updateTargetData(e,l))}}));var u=Gl(),s=tc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lh(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(Wu.min())){var l=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return as.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function lh(e,t,n){var r=tc(),i=tc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gl();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Wu.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):wu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function ch(e,t){var n=Tu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function fh(e,t){var n=Tu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,as.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new Pf(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function hh(e,t,n){return dh.apply(this,arguments)}function dh(){return dh=We(Be().mark((function e(t,n,r){var i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Tu(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),os(e.t1)){e.next=12;break}throw e.t1;case 12:wu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),dh.apply(this,arguments)}function ph(e,t,n){var r=Tu(e),i=Wu.min(),a=tc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Tu(e),i=r.qi.get(n);return void 0!==i?as.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,jl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:Wu.min(),n?a:tc())})).next((function(e){return vh(r,Vl(t),e),{documents:e,Wi:a}}))}))}function vh(e,t,n){var r=e.Ui.get(t)||Wu.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}var mh=function(){function e(){f(this,e),this.activeTargetIds=rc()}return v(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yh=function(){function e(){f(this,e),this.Br=new mh,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new mh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),gh=function(){function e(){f(this,e)}return v(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kh=function(){function e(){var t=this;f(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return v(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){wu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=S(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){wu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=S(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bh=null;function wh(){return null===bh?bh=268435456+Math.round(2147483648*Math.random()):bh++,"0x"+bh.toString(16)}var xh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},_h=function(){function e(t){f(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return v(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),Sh="WebChannelConnection",Eh=function(e){y(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"lo",value:function(e,t,n,r){var i=wh();return new Promise((function(a,o){var u=new vu;u.setWithCredentials(!0),u.listenOnce(cu.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case lu.NO_ERROR:var t=u.getResponseJson();wu(Sh,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case lu.TIMEOUT:wu(Sh,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Nu(Iu.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:var n=u.getStatus();if(wu(Sh,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Iu).indexOf(t)>=0?t:Iu.UNKNOWN}(s.status);o(new Nu(l,s.message))}else o(new Nu(Iu.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Nu(Iu.UNAVAILABLE,"Connection failed."));break;default:Eu()}}finally{wu(Sh,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);wu(Sh,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=wh(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=uu(),o=su(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new du({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");wu(Sh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var l=a.createWebChannel(s,u),c=!1,f=!1,h=new _h({Wr:function(t){f?wu(Sh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(c||(wu(Sh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),c=!0),wu(Sh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Hr:function(){return l.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(l,pu.EventType.OPEN,(function(){f||wu(Sh,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(l,pu.EventType.CLOSE,(function(){f||(f=!0,wu(Sh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(l,pu.EventType.ERROR,(function(t){f||(f=!0,_u(Sh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new Nu(Iu.UNAVAILABLE,"The operation could not be completed")))})),d(l,pu.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Cu(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){wu(Sh,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=jc[e];if(void 0!==t)return Hc(t)}(u),c=o.message;void 0===s&&(s=Iu.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new Nu(s,c)),l.close()}else wu(Sh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,fu.STAT_EVENT,(function(t){t.stat===hu.PROXY?wu(Sh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===hu.NOPROXY&&wu(Sh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=wh(),o=this.ao(e,t);wu("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return wu("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw _u("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=xh[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function Ch(){return"undefined"!=typeof document?document:null}function Th(e){return new af(e,!0)}var Ih=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&wu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Nh=function(){function e(t,n,r,i,a,o,u,s){f(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Ih(t,n)}return v(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===Iu.RESOURCE_EXHAUSTED?(xu(n.toString()),xu("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===Iu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new Nu(Iu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(We(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return wu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(wu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Dh=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return v(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Eu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Cu(void 0===t||"string"==typeof t),Ss.fromBase64String(t||"")):(Cu(void 0===t||t instanceof Uint8Array),Ss.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Iu.UNKNOWN:Hc(e.code);return new Nu(t,e.message||"")}(o);n=new $c(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var l=df(e,s.document.name),c=lf(s.document.updateTime),f=s.document.createTime?lf(s.document.createTime):Wu.min(),h=new $s({mapValue:{fields:s.document.fields}}),d=Js.newFoundDocument(l,c,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Qc(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=df(e,m.document),g=m.readTime?lf(m.readTime):Wu.min(),k=Js.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Qc([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=df(e,w.document),_=w.removedTargetIds||[];n=new Qc([],_,x,null)}else{if(!("filter"in t))return Eu();t.filter;var S=t.filter;S.targetId;var E=S.count||0,C=new Vc(E),T=S.targetId;n=new Yc(T,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Wu.min():t.readTime?lf(t.readTime):Wu.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=mf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=El(r)?{documents:bf(e,r)}:{query:wf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=uf(e,t.resumeToken):t.snapshotVersion.compareTo(Wu.min())>0&&(n.readTime=of(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Eu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=mf(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(Nh),Ah=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return v(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,cr(g(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Cu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Cu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?lf(e.updateTime):lf(t);return n.isEqual(Wu.min())&&(n=lf(t)),new bc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=lf(e.commitTime);return this.listener.Zo(n,t)}return Cu(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=mf(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return kf(t.serializer,e)}))};this.Fo(n)}}]),n}(Nh),Ph=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return v(n,[{key:"nu",value:function(){if(this.eu)throw new Nu(Iu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Iu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Nu(Iu.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],l=o[1];return i.connection.fo(e,t,n,u,l,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Iu.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Nu(Iu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return v((function e(){f(this,e)}))}());var Rh=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return v(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(xu(t),this.ru=!1):wu("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),jh=v((function e(t,n,r,i,a){var o=this;f(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=qh(o),!e.t0){e.next=5;break}return wu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=We(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Tu(t)).du.add(4),e.next=4,Mh(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Oh(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Rh(r,i)}));function Oh(e){return Lh.apply(this,arguments)}function Lh(){return Lh=We(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qh(t)){e.next=18;break}n=S(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Lh.apply(this,arguments)}function Mh(e){return Uh.apply(this,arguments)}function Uh(){return Uh=We(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Uh.apply(this,arguments)}function Fh(e,t){var n=Tu(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),Wh(n)?Hh(n):bd(n).No()&&Vh(n,t))}function zh(e,t){var n=Tu(e),r=bd(n);n.fu.delete(t),r.No()&&Bh(n,t),0===n.fu.size&&(r.No()?r.$o():qh(n)&&n.mu.set("Unknown"))}function Vh(e,t){e.gu.Ot(t.targetId),bd(e).jo(t)}function Bh(e,t){e.gu.Ot(t),bd(e).Wo(t)}function Hh(e){e.gu=new Jc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),bd(e).start(),e.mu.ou()}function Wh(e){return qh(e)&&!bd(e).xo()&&e.fu.size>0}function qh(e){return 0===Tu(e).du.size}function Gh(e){e.gu=void 0}function Kh(e){return Qh.apply(this,arguments)}function Qh(){return Qh=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Vh(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Qh.apply(this,arguments)}function Yh(e,t){return $h.apply(this,arguments)}function $h(){return $h=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gh(t),Wh(t)?(t.mu.au(n),Hh(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),$h.apply(this,arguments)}function Xh(e,t,n){return Jh.apply(this,arguments)}function Jh(){return Jh=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof $c&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=We(Be().mark((function e(t,n){var r,i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=S(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),wu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Zh(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Qc?t.gu.Kt(n):n instanceof Yc?t.gu.Jt(n):t.gu.zt(n),r.isEqual(Wu.min())){e.next=29;break}return e.prev=14,e.next=17,uh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Ss.EMPTY_BYTE_STRING,n.snapshotVersion)),Bh(e,t);var r=new Pf(n.target,t,1,n.sequenceNumber);Vh(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),wu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Zh(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Jh.apply(this,arguments)}function Zh(e,t,n){return ed.apply(this,arguments)}function ed(){return ed=We(Be().mark((function e(t,n,r){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(os(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Mh(t);case 5:t.mu.set("Offline"),r||(r=function(){return uh(t.localStore)}),t.asyncQueue.enqueueRetryable(We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Oh(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ed.apply(this,arguments)}function td(e,t){return t().catch((function(n){return Zh(e,n,t)}))}function nd(e){return rd.apply(this,arguments)}function rd(){return rd=We(Be().mark((function e(t){var n,r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Tu(t),r=wd(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!id(n)){e.next=19;break}return e.prev=3,e.next=6,ch(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,ad(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Zh(n,e.t0);case 17:e.next=2;break;case 19:od(n)&&ud(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),rd.apply(this,arguments)}function id(e){return qh(e)&&e.lu.length<10}function ad(e,t){e.lu.push(t);var n=wd(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function od(e){return qh(e)&&!wd(e).xo()&&e.lu.length>0}function ud(e){wd(e).start()}function sd(e){return ld.apply(this,arguments)}function ld(){return ld=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wd(t).tu();case 1:case"end":return e.stop()}}),e)}))),ld.apply(this,arguments)}function cd(e){return fd.apply(this,arguments)}function fd(){return fd=We(Be().mark((function e(t){var n,r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wd(t),r=S(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),fd.apply(this,arguments)}function hd(e,t,n){return dd.apply(this,arguments)}function dd(){return dd=We(Be().mark((function e(t,n,r){var i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=Fc.from(i,n,r),e.next=3,td(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,nd(t);case 5:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}function pd(e,t){return vd.apply(this,arguments)}function vd(){return vd=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&wd(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bc(i=n.code)||i===Iu.ABORTED){e.next=7;break}return r=t.lu.shift(),wd(t).Oo(),e.next=5,td(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,nd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:od(t)&&ud(t);case 5:case"end":return e.stop()}}),e)}))),vd.apply(this,arguments)}function md(e,t){return yd.apply(this,arguments)}function yd(){return yd=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Tu(t)).asyncQueue.verifyOperationInProgress(),wu("RemoteStore","RemoteStore received new credentials"),i=qh(r),r.du.add(3),e.next=6,Mh(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Oh(r);case 12:case"end":return e.stop()}}),e)}))),yd.apply(this,arguments)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return kd=We(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tu(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Oh(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Mh(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function bd(e){return e.yu||(e.yu=function(e,t,n){var r=Tu(e);return r.nu(),new Dh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Kh.bind(null,e),Zr:Yh.bind(null,e),zo:Xh.bind(null,e)}),e.wu.push(function(){var t=We(Be().mark((function t(n){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),Wh(e)?Hh(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:Gh(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function wd(e){return e.pu||(e.pu=function(e,t,n){var r=Tu(e);return r.nu(),new Ah(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:sd.bind(null,e),Zr:pd.bind(null,e),Xo:cd.bind(null,e),Zo:hd.bind(null,e)}),e.wu.push(function(){var t=We(Be().mark((function t(n){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,nd(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(wu("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var xd=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Du,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nu(Iu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function _d(e,t){if(xu("AsyncQueue","".concat(t,": ").concat(e)),os(e))return new Nu(Iu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Sd=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||Yu.comparator(e.key,n.key)}:function(e,t){return Yu.comparator(e.key,t.key)},this.keyedMap=Ql(),this.sortedSet=new ys(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Ed=function(){function e(){f(this,e),this.Iu=new ys(Yu.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Eu():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Cd=function(){function e(t,n,r,i,a,o,u,s,l){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=l}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Sd.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Td=v((function e(){f(this,e),this.Eu=void 0,this.listeners=[]})),Id=v((function e(){f(this,e),this.queries=new Wl((function(e){return Ul(e)}),Ml),this.onlineState="Unknown",this.Au=new Set}));function Nd(e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=We(Be().mark((function e(t,n){var r,i,a,o,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Td),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=_d(e.t0,"Initialization of query '".concat(Fl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&Od(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Dd.apply(this,arguments)}function Ad(e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=We(Be().mark((function e(t,n){var r,i,a,o,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Rd(e,t){var n,r=Tu(e),i=!1,a=S(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var l,c=S(s.listeners);try{for(c.s();!(l=c.n()).done;){l.value.vu(o)&&(i=!0)}}catch(f){c.e(f)}finally{c.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Od(r)}function jd(e,t,n){var r=Tu(e),i=r.queries.get(t);if(i){var a,o=S(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Od(e){e.Au.forEach((function(e){e.next()}))}var Ld=function(){function e(t,n,r){f(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=S(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Cd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}();var Md=v((function e(t){f(this,e),this.key=t})),Ud=v((function e(t){f(this,e),this.key=t})),Fd=function(){function e(t,n){f(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=tc(),this.mutatedKeys=tc(),this.Ku=Bl(t),this.Gu=new Sd(this.Ku)}return v(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Ed,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),f=zl(n.query,t)?t:null,h=!!c&&n.mutatedKeys.has(c.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;c&&f?c.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(c,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||l&&n.Ku(f,l)<0)&&(u=!0)):!c&&f?(r.track({type:0,doc:f}),p=!0):c&&!f&&(r.track({type:1,doc:c}),p=!0,(s||l)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Eu()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Cd(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Ed,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=tc(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Ud(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Md(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=tc();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Cd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),zd=v((function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r})),Vd=v((function e(t){f(this,e),this.key=t,this.ec=!1})),Bd=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Wl((function(e){return Ul(e)}),Ml),this.ic=new Map,this.rc=new Set,this.oc=new ys(Yu.comparator),this.uc=new Map,this.cc=new qf,this.ac={},this.hc=new Map,this.lc=Ff.bn(),this.onlineState="Unknown",this.fc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function Hd(e,t){return Wd.apply(this,arguments)}function Wd(){return Wd=We(Be().mark((function e(t,n){var r,i,a,o,u,s;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gp(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,fh(r.localStore,jl(n));case 8:return u=e.sent,r.isPrimaryClient&&Fh(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,qd(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Wd.apply(this,arguments)}function qd(e,t,n,r,i){return Gd.apply(this,arguments)}function Gd(){return Gd=We(Be().mark((function e(t,n,r,i,a){var o,u,s,l,c,f;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=We(Be().mark((function e(t,n,r,i){var a,o,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,ph(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(cp(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ph(t.localStore,n,!0);case 3:return o=e.sent,u=new Fd(n,o.Wi),s=u.zu(o.documents),l=Kc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),c=u.applyChanges(s,t.isPrimaryClient,l),cp(t,r,c.Yu),f=new zd(n,r,u),e.abrupt("return",(t.sc.set(n,f),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Kd(e,t){return Qd.apply(this,arguments)}function Qd(){return Qd=We(Be().mark((function e(t,n){var r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tu(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Ml(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,hh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),zh(r.remoteStore,i.targetId),sp(r,i.targetId)})).catch(rs);case 9:e.next=14;break;case 11:return sp(r,i.targetId),e.next=14,hh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Qd.apply(this,arguments)}function Yd(e,t,n){return $d.apply(this,arguments)}function $d(){return $d=We(Be().mark((function e(t,n,r){var i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kp(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Tu(e),a=Hu.now(),o=t.reduce((function(e,t){return e.add(t.key)}),tc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Gl(),s=tc();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=S(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=Tc(l,n.get(l.key).overlayedDocument);null!=c&&u.push(new Dc(l.key,c,Xs(c.value.mapValue),wc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Yl(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new ys(Vu)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,dp(i,a.changes);case 9:return e.next=11,nd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=_d(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),$d.apply(this,arguments)}function Xd(e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tu(t),e.prev=1,e.next=4,sh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Cu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Cu(n.ec):e.removedDocuments.size>0&&(Cu(n.ec),n.ec=!1))})),e.next=8,dp(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,rs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Jd.apply(this,arguments)}function Zd(e,t,n){var r=Tu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Tu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=S(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Od(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ep(e,t,n){return tp.apply(this,arguments)}function tp(){return tp=We(Be().mark((function e(t,n,r){var i,a,o,u,s,l;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Tu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ys(Yu.comparator)).insert(o,Js.newNoDocument(o,Wu.min())),s=tc().add(o),l=new Gc(Wu.min(),new Map,new bs(Vu),u,s),e.next=9,Xd(i,l);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),hp(i),e.next=16;break;case 14:return e.next=16,hh(i.localStore,n,!1).then((function(){return sp(i,n,r)})).catch(rs);case 16:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e,t){return rp.apply(this,arguments)}function rp(){return rp=We(Be().mark((function e(t,n){var r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tu(t),i=n.batch.batchId,e.prev=1,e.next=4,oh(r.localStore,n);case 4:return a=e.sent,up(r,i,null),op(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,dp(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,rs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),rp.apply(this,arguments)}function ip(e,t,n){return ap.apply(this,arguments)}function ap(){return ap=We(Be().mark((function e(t,n,r){var i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tu(t),e.prev=1,e.next=4,function(e,t){var n=Tu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Cu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,up(i,n,r),op(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,dp(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,rs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ap.apply(this,arguments)}function op(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function up(e,t,n){var r=Tu(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function sp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=S(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||lp(e,t)}))}function lp(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(zh(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),hp(e))}function cp(e,t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Md?(e.cc.addReference(a.key,t),fp(e,a)):a instanceof Ud?(wu("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||lp(e,a.key)):Eu()}}catch(o){i.e(o)}finally{i.f()}}function fp(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(wu("SyncEngine","New document in limbo: "+n),e.rc.add(r),hp(e))}function hp(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Yu(Gu.fromString(t)),r=e.lc.next();e.uc.set(r,new Vd(n)),e.oc=e.oc.insert(n,r),Fh(e.remoteStore,new Pf(jl(Il(n.path)),r,2,us.ct))}}function dp(e,t,n){return pp.apply(this,arguments)}function pp(){return pp=We(Be().mark((function e(t,n,r){var i,a,o,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Tu(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=eh.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.zo(a),e.next=9,function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s,l,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return as.forEach(n,(function(t){return as.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return as.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),os(e.t0)){e.next=10;break}throw e.t0;case 10:wu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=S(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Li.get(u),l=s.snapshotVersion,c=s.withLastLimboFreeSnapshotVersion(l),r.Li=r.Li.insert(u,c))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function vp(e,t){return mp.apply(this,arguments)}function mp(){return mp=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Tu(t)).currentUser.isEqual(n)){e.next=11;break}return wu("SyncEngine","User change. New user:",n.toKey()),e.next=5,ih(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Nu(Iu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,dp(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}function yp(e,t){var n=Tu(e),r=n.uc.get(t);if(r&&r.ec)return tc().add(r.key);var i=tc(),a=n.ic.get(t);if(!a)return i;var o,u=S(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=n.sc.get(s);i=i.unionWith(l.view.Qu)}}catch(c){u.e(c)}finally{u.f()}return i}function gp(e){var t=Tu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ep.bind(null,t),t.nc.zo=Rd.bind(null,t.eventManager),t.nc.wc=jd.bind(null,t.eventManager),t}function kp(e){var t=Tu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=np.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ip.bind(null,t),t}var bp=function(){function e(){f(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return rh(this.persistence,new th,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Xf(Zf.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new yh}},{key:"terminate",value:function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wp=function(){function e(){f(this,e)}return v(e,[{key:"initialize",value:function(){var e=We(Be().mark((function e(t,n){var r=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Zd(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=vp.bind(null,this.syncEngine),e.next=12,gd(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Id}},{key:"createDatastore",value:function(e){var t,n=Th(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Eh(t));return function(e,t,n,r){return new Ph(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Zd(o.syncEngine,e,0)},a=kh.D()?new kh:new gh,new jh(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Bd(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=We(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tu(t),wu("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Mh(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var xp=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):xu("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),_p=function(){function e(t,n,r,i){var a=this;f(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yu.UNAUTHENTICATED,this.clientId=zu.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return wu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Nu(Iu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Du;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(We(Be().mark((function n(){var r;return Be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=_d(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Sp(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),wu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ih(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function Cp(e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Np(t);case 3:return r=e.sent,wu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return md(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return md(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Ip(e){return"FirebaseError"===e.name?e.code===Iu.FAILED_PRECONDITION||e.code===Iu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Np(e){return Dp.apply(this,arguments)}function Dp(){return Dp=We(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return wu("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Sp(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Ip(n=e.t0)){e.next=13;break}throw n;case 13:return _u("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Sp(t,new bp);case 16:e.next=21;break;case 18:return wu("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Sp(t,new bp);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),Dp.apply(this,arguments)}function Ap(e){return Pp.apply(this,arguments)}function Pp(){return Pp=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return wu("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Cp(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return wu("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Cp(t,new wp);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Rp(e){return Ap(e).then((function(e){return e.syncEngine}))}function jp(e){return Op.apply(this,arguments)}function Op(){return Op=We(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ap(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Hd.bind(null,n.syncEngine),r.onUnlisten=Kd.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Lp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Du;return e.asyncQueue.enqueueAndForget(We(Be().mark((function i(){return Be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xp({next:function(a){t.enqueueAndForget((function(){return Ad(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Nu(Iu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Nu(Iu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Ld(Il(n.path),a,{includeMetadataChanges:!0,xu:!0});return Nd(e,o)},i.next=3,jp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Mp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Du;return e.asyncQueue.enqueueAndForget(We(Be().mark((function i(){return Be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xp({next:function(n){t.enqueueAndForget((function(){return Ad(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Nu(Iu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ld(n,a,{includeMetadataChanges:!0,xu:!0});return Nd(e,o)},i.next=3,jp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Up=new Map;function Fp(e,t,n){if(!n)throw new Nu(Iu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zp(e){if(!Yu.isDocumentKey(e))throw new Nu(Iu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Vp(e){if(Yu.isDocumentKey(e))throw new Nu(Iu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Bp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Eu()}function Hp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nu(Iu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Bp(e);throw new Nu(Iu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Wp(e,t){if(t<=0)throw new Nu(Iu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var qp=function(){function e(t){var n;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Nu(Iu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nu(Iu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Nu(Iu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Gp=function(){function e(t,n,r,i){f(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qp({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new Nu(Iu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Nu(Iu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Pu;switch(e.type){case"firstParty":return new Lu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Nu(Iu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Up.get(e);t&&(wu("ComponentProvider","Removing Datastore"),Up.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Kp(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Hp(e,Gp))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&_u("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=yu.MOCK_USER;else{o=Ht(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Nu(Iu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yu(s)}e._authCredentials=new Ru(new Au(o,u))}}var Qp=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new $p(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Yp=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),$p=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,Il(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Qp(this.firestore,null,new Yu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Yp);function Xp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xt(e),Fp("collection","path",t),e instanceof Gp){var a=Gu.fromString.apply(Gu,[t].concat(r));return Vp(a),new $p(e,null,a)}if(!(e instanceof Qp||e instanceof $p))throw new Nu(Iu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gu.fromString.apply(Gu,[t].concat(r)));return Vp(o),new $p(e.firestore,null,o)}function Jp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xt(e),1===arguments.length&&(t=zu.A()),Fp("doc","path",t),e instanceof Gp){var a=Gu.fromString.apply(Gu,[t].concat(r));return zp(a),new Qp(e,null,new Yu(a))}if(!(e instanceof Qp||e instanceof $p))throw new Nu(Iu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gu.fromString.apply(Gu,[t].concat(r)));return zp(o),new Qp(e.firestore,e instanceof $p?e.converter:null,new Yu(o))}var Zp=function(){function e(){var t=this;f(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Ih(this,"async_queue_retry"),this.qc=function(){var e=Ch();e&&wu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=Ch();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return v(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new Du;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=We(Be().mark((function e(){var t=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),os(e.t0)){e.next=12;break}throw e.t0;case 12:wu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=xd.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Eu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=S(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=S(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function ev(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=S(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var tv=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Zp,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||rv(this),this._firestoreClient.terminate()}}]),n}(Gp);function nv(e){return e._firestoreClient||rv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rv(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ps(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new _p(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}var iv=function(){function e(t){f(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ss.fromBase64String(t))}catch(t){throw new Nu(Iu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ss.fromUint8Array(t))}}]),e}(),av=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qu(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ov=v((function e(t){f(this,e),this._methodName=t})),uv=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new Nu(Iu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Nu(Iu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Vu(this._lat,e._lat)||Vu(this._long,e._long)}}]),e}(),sv=/^__.*__$/,lv=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}]),e}(),cv=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function fv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Eu()}}var hv=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return Dv(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(fv(this.Yc)&&sv.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),dv=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Th(t)}return v(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new hv({Yc:e,methodName:t,oa:n,path:Qu.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function pv(e){var t=e._freezeSettings(),n=Th(e._databaseId);return new dv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vv(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);Cv("Data must be an object, but it was:",o,r);var u,s,l=Sv(r,o);if(a.merge)u=new xs(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var c,f=[],h=S(a.mergeFields);try{for(h.s();!(c=h.n()).done;){var d=Tv(t,c.value,n);if(!o.contains(d))throw new Nu(Iu.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Av(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new xs(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new lv(new $s(l),u,s)}var mv=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ov);function yv(e,t,n){return new hv({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var gv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).ca=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=yv(this,e,!0),n=this.ca.map((function(e){return _v(e,t)})),r=new hc(n);return new kc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ov),kv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).aa=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new mc(e.serializer,oc(e.serializer,this.aa));return new kc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ov);function bv(e,t,n,r){var i=e.ua(1,t,n);Cv("Data must be an object, but it was:",i,r);var a=[],o=$s.empty();vs(r,(function(e,r){var u=Nv(t,e,n);r=Xt(r);var s=i.na(u);if(r instanceof mv)a.push(u);else{var l=_v(r,s);null!=l&&(a.push(u),o.set(u,l))}}));var u=new xs(a);return new cv(o,u,i.fieldTransforms)}function wv(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[Tv(t,r,n)],s=[i];if(a.length%2!=0)throw new Nu(Iu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)u.push(Tv(t,a[l])),s.push(a[l+1]);for(var c=[],f=$s.empty(),h=u.length-1;h>=0;--h)if(!Av(c,u[h])){var d=u[h],p=s[h];p=Xt(p);var v=o.na(d);if(p instanceof mv)c.push(d);else{var m=_v(p,v);null!=m&&(c.push(d),f.set(d,m))}}var y=new xs(c);return new cv(f,y,o.fieldTransforms)}function xv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return _v(n,e.ua(r?4:3,t))}function _v(e,t){if(Ev(e=Xt(e)))return Cv("Unsupported field value:",t,e),Sv(e,t);if(e instanceof ov)return function(e,t){if(!fv(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=S(e);try{for(a.s();!(n=a.n()).done;){var o=_v(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Xt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return oc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Hu.fromDate(e);return{timestampValue:of(t.serializer,n)}}if(e instanceof Hu){var r=new Hu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:of(t.serializer,r)}}if(e instanceof uv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iv)return{bytesValue:uf(t.serializer,e._byteString)};if(e instanceof Qp){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:cf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(Bp(e)))}(e,t)}function Sv(e,t){var n={};return ms(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vs(e,(function(e,r){var i=_v(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ev(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hu||e instanceof uv||e instanceof iv||e instanceof Qp||e instanceof ov)}function Cv(e,t,n){if(!Ev(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Bp(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function Tv(e,t,n){if((t=Xt(t))instanceof av)return t._internalPath;if("string"==typeof t)return Nv(e,t);throw Dv("Field path arguments must be of type string or ",e,!1,void 0,n)}var Iv=new RegExp("[~\\*/\\[\\]]");function Nv(e,t,n){if(t.search(Iv)>=0)throw Dv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(av,c(t.split(".")))._internalPath}catch(r){throw Dv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Dv(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Nu(Iu.INVALID_ARGUMENT,u+e+s)}function Av(e,t){return e.some((function(e){return e.isEqual(t)}))}var Pv=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Qp(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(jv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Rv=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return cr(g(n.prototype),"data",this).call(this)}}]),n}(Pv);function jv(e,t){return"string"==typeof t?Nv(e,t):t instanceof av?t._internalPath:t._delegate._internalPath}function Ov(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Nu(Iu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lv=v((function e(){f(this,e)})),Mv=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n)}(Lv);function Uv(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Lv&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Vv})).length,n=e.filter((function(e){return e instanceof Fv})).length;if(t>1||t>0&&n>0)throw new Nu(Iu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=S(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Fv=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Qv(e._query,t),new Yp(e.firestore,e.converter,Ol(e._query,t))}},{key:"_parse",value:function(e){var t=pv(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Kv(o,a);var s,l=[],c=S(o);try{for(c.s();!(s=c.n()).done;){var f=s.value;l.push(Gv(r,e,f))}}catch(h){c.e(h)}finally{c.f()}u={arrayValue:{values:l}}}else u=Gv(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Kv(o,a),u=xv(n,"where",o,"in"===a||"not-in"===a);return al.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Mv);function zv(e,t,n){var r=t,i=jv("where",e);return Fv._create(i,r,n)}var Vv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return v(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ol.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=S(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Qv(r,a),r=Ol(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Yp(e.firestore,e.converter,Ol(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Lv);var Bv=function(e){y(n,e);var t=w(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new nl(t,n);return function(e,t){if(null===Dl(e)){var n=Al(e);null!==n&&Yv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Yp(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Cl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Mv);function Hv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jv("orderBy",e);return Bv._create(n,t)}var Wv=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return v(n,[{key:"_apply",value:function(e){return new Yp(e.firestore,e.converter,Ll(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Mv);function qv(e){return Wp("limit",e),Wv._create("limit",e,"F")}function Gv(e,t,n){if("string"==typeof(n=Xt(n))){if(""===n)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pl(t)&&-1!==n.indexOf("/"))throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Gu.fromString(n));if(!Yu.isDocumentKey(r))throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bs(e,new Yu(r))}if(n instanceof Qp)return Bs(e,n._key);throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Bp(n),"."))}function Kv(e,t){if(!Array.isArray(e)||0===e.length)throw new Nu(Iu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Qv(e,t){if(t.isInequality()){var n=Al(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Dl(e);null!==i&&Yv(e,r,i)}var a=function(e,t){var n,r=S(e);try{for(r.s();!(n=r.n()).done;){var i,a=S(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Nu(Iu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Nu(Iu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Yv(e,t,n){if(!n.isEqual(t))throw new Nu(Iu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var $v=function(){function e(){f(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ts(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Eu()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return vs(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new uv(Ts(e.latitude),Ts(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ds(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(As(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Cs(e);return new Hu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Gu.fromString(e);Cu(Af(n));var r=new Rs(n.get(1),n.get(3)),i=new Yu(n.popFirst(5));return r.isEqual(t)||xu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Xv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Jv=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Zv=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return v(n,[{key:"exists",value:function(){return cr(g(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new em(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(jv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Pv),em=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cr(g(n.prototype),"data",this).call(this,e)}}]),n}(Zv),tm=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jv(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new em(n._firestore,n._userDataWriter,r.key,r,new Jv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Nu(Iu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new em(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new em(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:nm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function nm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Eu()}}function rm(e){e=Hp(e,Qp);var t=Hp(e.firestore,tv);return Lp(nv(t),e._key).then((function(n){return lm(t,e,n)}))}var im=function(e){y(n,e);var t=w(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new iv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qp(this.firestore,null,t)}}]),n}($v);function am(e){e=Hp(e,Yp);var t=Hp(e.firestore,tv),n=nv(t),r=new im(t);return Ov(e._query),Mp(n,e._query).then((function(n){return new tm(t,r,e,n)}))}function om(e,t,n){e=Hp(e,Qp);var r=Hp(e.firestore,tv),i=Xv(e.converter,t,n);return sm(r,[vv(pv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,wc.none())])}function um(e,t,n){e=Hp(e,Qp);for(var r=Hp(e.firestore,tv),i=pv(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return sm(r,[("string"==typeof(t=Xt(t))||t instanceof av?wv(i,"updateDoc",e._key,t,n,o):bv(i,"updateDoc",e._key,t)).toMutation(e._key,wc.exists(!0))])}function sm(e,t){return function(e,t){var n=new Du;return e.asyncQueue.enqueueAndForget(We(Be().mark((function r(){return Be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Yd,r.next=3,Rp(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(nv(e),t)}function lm(e,t,n){var r=n.docs.get(t._key),i=new im(e);return new Zv(e,i,t._key,r,new Jv(n.hasPendingWrites,n.fromCache),t.converter)}function cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gv("arrayUnion",t)}function fm(e){return new kv("increment",e)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gu=e}(Wn),Fn(new Jt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new tv(new ju(e.getProvider("auth-internal")),new Uu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nu(Iu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Kn(mu,"3.10.1",e),Kn(mu,"3.10.1","esm2017")}();var hm,dm="firebasestorage.googleapis.com",pm="storageBucket",vm=function(e){y(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,n),(i=t.call(this,mm(e),"Firebase Storage: ".concat(r," (").concat(mm(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(b(i),n.prototype),i}return v(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return mm(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Gt);function mm(e){return"storage/"+e}function ym(){return new vm(hm.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function gm(){return new vm(hm.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function km(){return new vm(hm.CANCELED,"User canceled the upload/download.")}function bm(){return new vm(hm.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wm(e){return new vm(hm.INVALID_ARGUMENT,e)}function xm(){return new vm(hm.APP_DELETED,"The Firebase app was deleted.")}function _m(e,t){return new vm(hm.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Sm(e){throw new vm(hm.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(hm||(hm={}));var Em,Cm=function(){function e(t,n){f(this,e),this.bucket=t,this.path_=n}return v(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new vm(hm.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===dm?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],l=0;l<s.length;l++){var c=s[l],f=c.regex.exec(t);if(f){var h=f[c.indices.bucket],d=f[c.indices.path];d||(d=""),r=new e(h,d),c.postModify(r);break}}if(null==r)throw function(e){return new vm(hm.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Tm=function(){function e(t){f(this,e),this.promise_=Promise.reject(t)}return v(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Im(e){return"string"===typeof e||e instanceof String}function Nm(e){return Dm()&&e instanceof Blob}function Dm(){return"undefined"!==typeof Blob&&!Wt()}function Am(e,t,n,r){if(r<t)throw wm("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw wm("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Pm(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Rm(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function jm(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Em||(Em={}));var Om=function(){function e(t,n,r,i,a,o,u,s,l,c,h){var d=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];f(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return v(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=ym();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?xm():km());else i(gm())}};this.canceled_?t(0,new Lm(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(l)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void c.call.apply(c,[null,e].concat(n));var a;if(s()||o)return h(),void c.call.apply(c,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),l||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Lm(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Em.NO_ERROR,a=r.getStatus();if(!n||jm(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Em.ABORT;t(!1,new Lm(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Lm(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Lm=v((function e(t,n,r){f(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Mm(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Um(){for(var e=Mm(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Dm())return new Blob(n);throw new vm(hm.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Fm(e){if("undefined"===typeof atob)throw t="base-64",new vm(hm.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var zm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Vm=v((function e(t,n){f(this,e),this.data=t,this.contentType=n||null}));function Bm(e,t){switch(e){case zm.RAW:return new Vm(Hm(t));case zm.BASE64:case zm.BASE64URL:return new Vm(Wm(e,t));case zm.DATA_URL:return new Vm(function(e){var t=new qm(e);return t.base64?Wm(zm.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw _m(zm.DATA_URL,"Malformed data URL.")}return Hm(t)}(t.rest)}(t),new qm(t).contentType)}throw ym()}function Hm(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Wm(e,t){switch(e){case zm.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw _m(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case zm.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw _m(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Fm(t)}catch(l){if(l.message.includes("polyfill"))throw l;throw _m(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var qm=v((function e(t){f(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw _m(zm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Gm=function(){function e(t,n){f(this,e);var r=0,i="";Nm(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return v(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Nm(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Dm()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Um.apply(null,i))}var a=n.map((function(e){return Im(e)?Bm(zm.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Km(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Qm(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ym(e,t){return t}var $m=v((function e(t,n,r,i){f(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Ym})),Xm=null;function Jm(){if(Xm)return Xm;var e=[];e.push(new $m("bucket")),e.push(new $m("generation")),e.push(new $m("metageneration")),e.push(new $m("name","fullPath",!0));var t=new $m("name");t.xform=function(e,t){return function(e){return!Im(e)||e.length<2?e:Qm(e)}(t)},e.push(t);var n=new $m("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new $m("timeCreated")),e.push(new $m("updated")),e.push(new $m("md5Hash",null,!0)),e.push(new $m("cacheControl",null,!0)),e.push(new $m("contentDisposition",null,!0)),e.push(new $m("contentEncoding",null,!0)),e.push(new $m("contentLanguage",null,!0)),e.push(new $m("contentType",null,!0)),e.push(new $m("metadata","customMetadata",!0)),Xm=e}function Zm(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Cm(n,r);return t._makeStorageReference(i)}})}(r,e),r}function ey(e,t,n){var r=Km(t);return null===r?null:Zm(e,r,n)}function ty(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var ny=v((function e(t,n,r,i){f(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function ry(e){if(!e)throw ym()}function iy(e,t){return function(n,r){var i=ey(e,r,t);return ry(null!==i),i}}function ay(e,t){return function(n,r){var i=ey(e,r,t);return ry(null!==i),function(e,t,n,r){var i=Km(t);if(null===i)return null;if(!Im(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Pm("/b/"+o(i)+"/o/"+o(a),n,r)+Rm({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function oy(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new vm(hm.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new vm(hm.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new vm(hm.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new vm(hm.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function uy(e){var t=oy(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new vm(hm.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function sy(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ly(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=sy(t,r,i),l="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ty(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",c="\r\n--"+u+"--",f=Gm.getBlob(l,r,c);if(null===f)throw bm();var h={name:s.fullPath},d=Pm(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new ny(d,"POST",iy(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=oy(t),v}var cy=null,fy=function(){function e(){var t=this;f(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Em.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Em.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Em.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return v(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Sm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Sm("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Sm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Sm("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Sm("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),hy=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(fy);function dy(){return cy?cy():new hy}var py=function(){function e(t,n){f(this,e),this._service=t,this._location=n instanceof Cm?n:Cm.makeFromUrl(n,t.host)}return v(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Cm(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Qm(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Cm(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new vm(hm.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function vy(e,t,n){e._throwIfRoot("uploadBytes");var r=ly(e.storage,e._location,Jm(),new Gm(t,!0),n);return e.storage.makeRequestWithTokens(r,dy).then((function(t){return{metadata:t,ref:e}}))}function my(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Pm(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ny(r,"GET",ay(e,n),i);return a.errorHandler=uy(t),a}(e.storage,e._location,Jm());return e.storage.makeRequestWithTokens(t,dy).then((function(e){if(null===e)throw new vm(hm.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function yy(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Cm(e._location.bucket,n);return new py(e.storage,r)}function gy(e,t){if(e instanceof wy){var n=e;if(null==n._bucket)throw new vm(hm.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pm+"' property when initializing the app?");var r=new py(n,n._bucket);return null!=t?gy(r,t):r}return void 0!==t?yy(e,t):e}function ky(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof wy)return new py(e,t);throw wm("To use ref(service, url), the first argument must be a Storage instance.")}return gy(e,t)}function by(e,t){var n=null===t||void 0===t?void 0:t[pm];return null==n?null:Cm.makeFromBucketSpec(n,e)}var wy=function(){function e(t,n,r,i,a){f(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=dm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Cm.makeFromBucketSpec(i,this._host):by(this._host,this.app.options)}return v(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Cm.makeFromBucketSpec(this._url,e):this._bucket=by(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Am("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Am("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=We(Be().mark((function e(){var t,n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=We(Be().mark((function e(){var t,n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new py(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Tm(xm());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Rm(e.urlParams),s=e.url+u,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new Om(s,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),xy="@firebase/storage",_y="0.11.2",Sy="storage";function Ey(e,t,n){return vy(e=Xt(e),t,n)}function Cy(e){return my(e=Xt(e))}function Ty(e,t){return ky(e=Xt(e),t)}function Iy(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Ht(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Ny(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new wy(r,i,a,n,Wn)}Fn(new Jt(Sy,Ny,"PUBLIC").setMultipleInstances(!0)),Kn(xy,_y,""),Kn(xy,_y,"esm2017");var Dy=qn({apiKey:"AIzaSyAegBj5gvK08FHBAoB1B8FgSm_bgAGla5o",authDomain:"screenka-app.firebaseapp.com",projectId:"screenka-app",storageBucket:"screenka-app.appspot.com",messagingSenderId:"269459460789",appId:"1:269459460789:web:dd0c0760a3d01dcfd864fc",measurementId:"G-2VX4EY9R84"}),Ay=function(e,t){var n="string"==typeof e?e:t||"(default)",r=zn("object"==typeof e?e:Gn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=zt("firestore");i&&Kp.apply(void 0,[r].concat(c(i)))}return r}(Dy),Py=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn(),t=arguments.length>1?arguments[1]:void 0,n=zn(e=Xt(e),Sy).getImmediate({identifier:t}),r=zt("storage");return r&&Iy.apply(void 0,[n].concat(c(r))),n}(Dy);function Ry(e,t){return jy.apply(this,arguments)}function jy(){return(jy=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getDoc "+t+"/"+n),null!=t&&null!=n){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,e.next=6,rm(Jp(Ay,t,n));case 6:if(!(r=e.sent).exists()){e.next=14;break}if(null!=(i=r.data())){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",Ke({id:r.id},i));case 14:return e.abrupt("return",null);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(3),console.error("Error getting object document:",e.t0),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}var Oy=function(e){y(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n)}(_(Error));function Ly(e,t,n){return My.apply(this,arguments)}function My(){return My=We(Be().mark((function e(t,n,r){var i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getDocWhere from "+t+" => "+r),null!=t&&null!=n){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,i=Uv(Xp(Ay,t),zv(n,"==",r)),e.next=7,am(i);case 7:if(a=e.sent,o=[],a.forEach((function(e){var t=e.data();o.push(Ke({id:e.id},t))})),o.length>2&&new Oy,0!==o.length){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",o[0]);case 16:return e.prev=16,e.t0=e.catch(3),console.error("Error getting document:",e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[3,16]])}))),My.apply(this,arguments)}function Uy(e){return Fy.apply(this,arguments)}function Fy(){return Fy=We(Be().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:for(e.prev=2,n=s.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=s[i];return a=Uv.apply(void 0,[Xp(Ay,t)].concat(r)),e.next=7,am(a);case 7:return o=e.sent,u=[],o.forEach((function(e){var t=e.data();u.push(Ke({id:e.id},t))})),console.log("getDocs from "+t+". Count: "+u.length),e.abrupt("return",u);case 14:return e.prev=14,e.t0=e.catch(2),console.error("Error getting document:",e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[2,14]])}))),Fy.apply(this,arguments)}var zy=function(e,t){return console.log(e+"/"+t+" from Storage"),Cy(Ty(Py,e+"/"+t))},Vy={getHost:function(){var e=We(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Ry("hosts",t);case 4:return n=e.sent,e.abrupt("return",wt.fromDoc(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCurrentWeekNumber:function(e){return null==e?0:ct(e,$e())}},By={getHost:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,Ze(500);case 4:return e.abrupt("return",Pt.find((function(e){return e.id===t})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCurrentWeekNumber:function(e){return null==e?0:ct(e,St)}},Hy={getUser:function(){var e=We(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:if(!sessionStorage.getItem("users/"+t)){e.next=5;break}return n=JSON.parse(sessionStorage.getItem("users/"+t)),e.abrupt("return",xt.fromDoc(n));case 5:return e.next=7,Ry("users",t);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:return sessionStorage.setItem("users/"+t,JSON.stringify(r)),i=xt.fromDoc(r),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserByFunnyname:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",Ly("users","funnyname",t).then(xt.fromDoc));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeUserPreferences:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return console.log("user "+t+" change preferences"),e.abrupt("return",um(Jp(Ay,"users",t),"preferences",n).then((function(){if(sessionStorage.getItem("users/"+t)){var e=JSON.parse(sessionStorage.getItem("users/"+t)),r=xt.fromDoc(e);r.preferences=yt(n,r.preferences),sessionStorage.setItem("users/"+t,JSON.stringify(r))}})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),trySetUsername:function(){var e=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null==n||n.length<=3||n.length>20)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Hy.getUser(t);case 4:if(null!=(r=e.sent)){e.next=7;break}throw new Error("Wrong your fullname");case 7:if(r.hosts&&0!==r.hosts.length){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,Uy("users",zv("hosts","array-contains-any",r.hosts),zv("username","==",r.username));case 11:if((i=e.sent)&&0===i.length){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",um(Jp(Ay,"users",t),{username:n}).then((function(){if(sessionStorage.getItem("users/"+t)){var e=JSON.parse(sessionStorage.getItem("users/"+t)),r=xt.fromDoc(e);r.username=n,sessionStorage.setItem("users/"+t,JSON.stringify(r))}})).then((function(){return!0})));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),trySetPersonalizedApps:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&null!=n){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",um(Jp(Ay,"users",t),{personalized_apps:n}).then((function(){if(sessionStorage.getItem("users/"+t)){var e=JSON.parse(sessionStorage.getItem("users/"+t)),r=xt.fromDoc(e);r.personalized_apps=n,sessionStorage.setItem("users/"+t,JSON.stringify(r))}})).then((function(){return!0})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserSrcUrl:function(){var e=We(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:if(!(n=sessionStorage.getItem(t+"_src"))){e.next=5;break}return e.abrupt("return",new Promise((function(e){return e(n)})));case 5:return e.abrupt("return",(r=t,console.log("_user_src/"+r+".jpg"),Cy(Ty(Py,"_user_src/"+r+".jpg"))).then((function(e){return sessionStorage.setItem(t+"_src",e),e})).catch((function(e){if("storage/object-not-found"===e.code)return Xe("default_profile_picture.png");throw e})));case 6:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},Wy={getUser:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(1e3);case 2:if(null!=t){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",It.find((function(e){return e.fullname.toLowerCase()===t.toLowerCase()})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserByFunnyname:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(1e3);case 2:if(t){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",It.find((function(e){return e.funnyname.toLowerCase()===Ct.toLowerCase()})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeUserPreferences:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("user "+t+" change preferences"),e.next=3,Ze(500);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),trySetUsername:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null==n||n.length<=3||n.length>20)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Wy.getUser(t);case 4:if(null!=e.sent){e.next=7;break}throw new Error("Wrong your fullname");case 7:return e.next=9,Ze(500);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),trySetPersonalizedApps:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(1e3);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserSrcUrl:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe("default_profile_picture.png"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},qy={onWeekSnapshot:function(e,t,n){return e&&t?function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Xt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||ev(n[s])||(u=n[s],s++);var l,c,f,h={includeMetadataChanges:u.includeMetadataChanges};if(ev(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Qp)c=Hp(e.firestore,tv),f=Il(e._key.path),l={next:function(t){n[s]&&n[s](lm(c,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Hp(e,Yp);c=Hp(p.firestore,tv),f=p._query;var v=new im(c);l={next:function(e){n[s]&&n[s](new tm(c,v,p,e))},error:n[s+1],complete:n[s+2]},Ov(e._query)}return function(e,t,n,r){var i=new xp(r),a=new Ld(t,i,n);return e.asyncQueue.enqueueAndForget(We(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Nd,t.next=3,jp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(We(Be().mark((function t(){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ad,t.next=3,jp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(nv(c),f,h,l)}(Jp(Ay,"hosts",e,"weeks",t),(function(e){console.log("Week updated");var t=e.data();t.id=e.id,n(_t.fromDoc(t))})):function(){}},getWeek:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]&&s[2],null!=t&&(null!=n||r)){e.next=3;break}return e.abrupt("return",null);case 3:if(!r){e.next=12;break}return i=at(),a=$e(),e.next=8,Uy("hosts/".concat(t,"/weeks"),zv("start_date",">=",i),zv("start_date","<=",a),Hv("start_date","desc"),qv(1));case 8:if(0!==(o=e.sent).length){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",_t.fromDoc(o.at(0)));case 12:return e.next=14,Ry("hosts/".concat(t,"/weeks"),n);case 14:return u=e.sent,e.abrupt("return",_t.fromDoc(u));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getHostLastWeekName:function(){var e=We(Be().mark((function e(t){var n,r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return(r=$e()).setDate(r.getDate()-7),i=at(r),e.next=7,Uy("hosts/".concat(t,"/weeks"),zv("start_date",">=",i),zv("start_date","<=",r),Hv("start_date","desc"),qv(1));case 7:if(a=e.sent,!((null===(n=a)||void 0===n?void 0:n.length)<1)){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",a.at(0).id);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),trySetHostWeekScreenkaView:function(){var e=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i["screenka_views.".concat(r)]={view_date:Hu.fromDate($e())},e.next=3,um(Jp(Ay,"hosts/".concat(t,"/weeks/").concat(n)),i);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},Gy={onWeekSnapshot:function(e,t,n){var r=!0;function i(){return(i=We(Be().mark((function i(){var a;return Be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r){i.next=19;break}return i.next=3,Gy.getWeek(e,t);case 3:return a=i.sent,a=Object.assign({},a),n(a),i.next=8,Gy.getWeek(e,t);case 8:return a=i.sent,a=Object.assign({},a),i.next=12,Ze(3e3);case 12:a.today_apps_counts=vt({Spotify:2,Maps:1,Safari:1,Photos:1}),a.latest_post={user:"Tola Bajka",date:St},a.today_participants=[Et,"Mia Muller","Tola Bajka"],n(a),r=!1,i.next=0;break;case 19:case"end":return i.stop()}}),i)})))).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r=!1}},getWeek:function(){var e=We(Be().mark((function e(t,n){var r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>2&&void 0!==r[2]&&r[2],e.next=3,Ze(500);case 3:return e.abrupt("return",Dt[0]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getHostLastWeekName:function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(1e3);case 2:return e.abrupt("return",Dt[0].name);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),trySetHostWeekScreenkaView:function(){var e=We(Be().mark((function e(t,n,r){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},Ky={getPost:function(){var e=We(Be().mark((function e(t,n){var r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ry("users/".concat(t,"/posts"),n);case 2:if(r=e.sent,(i=bt.fromDoc(r)).permissions.me){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getPostAndTrySetView:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:null,t&&n){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Ry("users/".concat(t,"/posts"),n);case 5:if(i=e.sent,(a=bt.fromDoc(i)).permissions.me){e.next=9;break}return e.abrupt("return",null);case 9:if(r){e.next=11;break}return e.abrupt("return",a);case 11:if(null==a||t===r||null!=a.view){e.next=15;break}return e.next=14,um(Jp(Ay,"users/".concat(t,"/posts"),n),{view:r});case 14:a.view=r;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserCurrentDayRandomPost:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s,l,c,f=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:null,i=f.length>3&&void 0!==f[3]?f[3]:[],null!=t&&null!=n){e.next=4;break}return e.abrupt("return",null);case 4:return(a=$e()).setHours(0,0,0,0),o=a,u=$e(),s=[zv("upload_date",">=",o),zv("upload_date","<=",u),zv("host_id","==",n),zv("permissions.me","==",!0)],null!==r&&s.push(zv("permissions.friends","==",r)),i&&i.length>0&&s.push(zv("app","in",i)),e.next=13,Uy.apply(void 0,["users/".concat(t,"/posts")].concat(s,[qv(10)]));case 13:return l=e.sent,c=pt(l),e.abrupt("return",bt.fromDoc(c));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserLatestPost:function(){var e=We(Be().mark((function e(t,n,r){var i,a,o,u=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u.length>3&&void 0!==u[3]?u[3]:[],null!=t&&null!=n){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Uy("users/".concat(t,"/posts"),zv("host_id","==",n),Hv("upload_date","desc"),qv(1));case 5:if(a=e.sent,(o=bt.fromDoc(null===a||void 0===a?void 0:a.at(0))).permissions.me){e.next=9;break}return e.abrupt("return",null);case 9:if(!r||o.permissions.friends){e.next=11;break}return e.abrupt("return",null);case 11:if(i.includes(o.app)){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getPostTicketsUsed:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ky.getUserCurrentDayPosts(t,n,!0).then((function(e){return e.length})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserCurrentDayPosts:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:null,t){e.next=3;break}return e.abrupt("return",[]);case 3:return i=new Date($e().setHours(0,0,0,0)),a=$e(),o=[zv("upload_date",">=",i),zv("upload_date","<=",a),zv("permissions.me","==",!0)],n&&o.push(zv("host_id","==",n)),null!==r&&o.push(zv("permissions.screenka","==",r)),o.push(Hv("upload_date"),qv(20)),e.next=11,Uy.apply(void 0,["users/".concat(t,"/posts")].concat(o));case 11:return u=e.sent,e.abrupt("return",u?u.map((function(e){return bt.fromDoc(e)})):[]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserCurrentWeekPosts:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return i=at(),a=$e(),r=[zv("upload_date",">=",i),zv("upload_date","<=",a),zv("permissions.me","==",!0)],null!==n&&r.push(zv("host_id","==",n)),r.push(Hv("upload_date"),qv(30)),e.next=8,Uy.apply(void 0,["users/".concat(t,"/posts")].concat(c(r)));case 8:return o=e.sent,e.abrupt("return",o?o.map((function(e){return bt.fromDoc(e)})):[]);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserPastWeekPosts:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s,l=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:null,i=!(l.length>3&&void 0!==l[3])||l[3],a=l.length>4&&void 0!==l[4]?l[4]:[],o=l.length>5&&void 0!==l[5]&&l[5],null!=t&&null!=n){e.next=6;break}return e.abrupt("return",null);case 6:return n&&(u=[zv("week_name","==",n)]),null!==r&&u.push(zv("host_id","==",r)),u.push(zv("permissions.me","==",!0)),i&&u.push(zv("permissions.friends","==",!0)),o&&u.push(zv("view","==",null)),a&&a.length>0&&u.push(zv("app","in",a)),u.push(Hv("upload_date"),qv(30)),e.next=15,Uy.apply(void 0,["users/".concat(t,"/posts")].concat(c(u)));case 15:return s=e.sent,e.abrupt("return",s?s.map((function(e){return bt.fromDoc(e)})):[]);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserYesterdayRandomPost:function(){var e=We(Be().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:null,t){e.next=3;break}return e.abrupt("return",null);case 3:return(r=$e()).setDate(r.getDate()-1),r.setHours(0,0,0,0),(i=new Date(r.getTime())).setHours(23,59,59),a=[zv("upload_date",">=",r),zv("upload_date","<=",i),zv("permissions.me","==",!0)],n&&a.push(zv("host_id","==",n)),e.next=12,Uy.apply(void 0,["users/".concat(t,"/posts")].concat(a,[qv(10)]));case 12:return o=e.sent,u=pt(o),e.abrupt("return",bt.fromDoc(u));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPathPostContentUrl:function(){var e=We(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return",null);case 2:if(!(r=sessionStorage.getItem(n))){e.next=5;break}return e.abrupt("return",new Promise((function(e){return e(r)})));case 5:return e.abrupt("return",zy(t,n).then((function(e){return sessionStorage.setItem(n,e),e})).catch((function(e){if("storage/object-not-found"===e.code)return Xe("no_picture.png");throw e})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),changePostPermissions:function(){var e=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",null);case 2:return console.log("post "+n+" change permissions"),i={},null!=r.me&&(i["permissions.me"]=r.me),null!=r.friends&&(i["permissions.friends"]=r.friends),null!=r.screenka&&(i["permissions.screenka"]=r.screenka),e.abrupt("return",um(Jp(Ay,"users",t,"posts",n),i));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),postPost:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s,l=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:null,i=function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&void 0!==n&&n.content){e.next=2;break}throw new Error("No content");case 2:if(n.permissions.me){e.next=4;break}throw new Error("No pemissions");case 4:if(localStorage.getItem("recent_upload_date")!==dt(n.upload_date)){e.next=7;break}throw new Error("Wait 1 minute before next upload...");case 7:localStorage.setItem("recent_upload_date",dt(n.upload_date));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=We(Be().mark((function e(){var i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!(r.size>4e6)){e.next=4;break}throw new Error("Please upload a file smaller than 4MB");case 4:return i=dt(n.upload_date)+(n.context?"_"+n.context.replace(/[^a-z0-9]/gi,"_").toLowerCase().substring(0,25):""),n.content=i,a=Ty(Py,t+"/"+i),e.abrupt("return",Ey(a,r));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=We(Be().mark((function e(){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dt(n.upload_date),s=r,e.abrupt("return",om(Jp(Ay,"users",t,"posts",r),n.toDoc()));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=We(Be().mark((function e(){var r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.host_id,i=n.week_name,null!=r&&i){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:if(n.permissions.friends||n.permissions.screenka){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return(a={}).latest_post={user:t,date:$e()},a["day_participants.".concat(nt($e()))]=cm(t),a["day_apps_counts.".concat(nt($e()),".").concat(n.app)]=fm(1),e.abrupt("return",um(Jp(Ay,"hosts",r,"weeks",i),a));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=null,e.abrupt("return",i().then(a).then(o).then(u).then((function(){return s})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Qy={getPost:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(1e3);case 2:return e.abrupt("return",Tt.get(t).find((function(e){return e.id===n})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getPostAndTrySetView:function(){var e=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(1e3);case 2:return i=Tt.get(t).find((function(e){return e.id===n})),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getUserCurrentDayRandomPost:function(){var e=We(Be().mark((function e(t,n){var r,i=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>2&&void 0!==i[2]?i[2]:null,i.length>3&&void 0!==i[3]?i[3]:[],e.next=4,Qy.getUserCurrentDayPosts(t,null);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return r.sort((function(){return.5-Math.random()})),e.abrupt("return",null===r||void 0===r?void 0:r.at(0));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserLatestPost:function(){var e=We(Be().mark((function e(t,n){var r,i=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>2&&void 0!==i[2]?i[2]:[],e.next=3,Qy.getUserCurrentDayPosts(t);case 3:return null===(r=e.sent)||void 0===r||r.sort((function(e,t){return e.upload_date-t.upload_date})),e.abrupt("return",null===r||void 0===r?void 0:r[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getPostTicketsUsed:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qy.getUserCurrentDayPosts(t,null);case 2:return e.abrupt("return",e.sent.filter((function(e){return!0===e.permissions.screenka})).length);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserCurrentDayPosts:function(){var e=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(500);case 2:if(null!=t){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",null===(i=Tt.get(t))||void 0===i?void 0:i.filter((function(e){return ot(e.upload_date,St)})).filter((function(e){return!0===e.permissions.me})).sort((function(e,t){return t.upload_date-e.upload_date})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getUserCurrentWeekPosts:function(){var e=We(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",null===(r=Tt.get(t))||void 0===r?void 0:r.filter((function(e){return ut(e.upload_date,St)})).filter((function(e){return!0===e.permissions.me&&e.host_id===n})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserPastWeekPosts:function(){var e=We(Be().mark((function e(t,n){var r,i,a=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:null,a.length>3?a[3]:void 0,a.length>4&&void 0!==a[4]?a[4]:[],a.length>5?a[5]:void 0,e.next=6,Ze(1e3);case 6:if(null!=t&&null!=i&&null!=n){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",null===(r=Tt.get(t))||void 0===r?void 0:r.filter((function(e){return e.host_id===i&&e.week_name===n})));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUserYesterdayRandomPost:function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(500);case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getPathPostContentUrl:function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe("no_picture.png"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),changePostPermissions:function(){var e=We(Be().mark((function e(t,n,r){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Ze(200);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),postPost:function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:null,i=function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!(r.size>4e6)){e.next=4;break}throw new Error("Please upload a file smaller than 4MB");case 4:return e.abrupt("return",Promise.resolve());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=dt(n.upload_date),u=t,e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=null,null!==n&&void 0!==n&&n.content){e.next=7;break}throw new Error;case 7:return e.next=9,Ze(1e3);case 9:return e.abrupt("return",i().then(a).then(o).then((function(){return u})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};function Yy(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var $y=0;function Xy(e){return"__private_"+$y+++"_"+e}var Jy=0,Zy=1,eg=2,tg={None:0,Informative:1,Interactive:2,Full:3},ng=0,rg=1,ig=2,ag=3,og=4,ug=5,sg=Xy("experience"),lg=v((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tg.None,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),Object.defineProperty(this,sg,{writable:!0,value:void 0}),this.reload_views_count=0,this.checkPermissions=function(e){var t=e.me,r=e.friends,i=e.screenka;return n.for===Jy&&!0===t||n.for===Zy&&!0===r||n.for===eg&&!0===i},this.isTime=function(){return!1},this.toString=function(){return n.name.replace("-","").replace(" ","").toLowerCase()},this.getSubtitle=function(){return""},this.getNote=function(){return null},this.isAvailable=function(e,t){return!!t&&(e>=n.fromWeekNumber&&n.checkPermissions(t))},this.isInformative=function(){return[tg.Informative,tg.Full].includes(Yy(n,sg)[sg])},this.isInteractive=function(){return[tg.Interactive,tg.Full].includes(Yy(n,sg)[sg])},this.name=t,this.description=r,this.for=i,this.fromWeekNumber=a,Yy(this,sg)[sg]=o,this.max_views=u,this.reset_views_after=s}));lg.canInteract=function(e,t){if(!e||!e.isInteractive())return!1;if(!e.isTime(t))return!1;if(null==e.max_views||null==e.reset_views_after)return!0;if(e.reset_views_after===ug)return e.max_views>lg.reload_views_count;if(e.max_views>1){var n=fg(e).getItem("".concat(e,"_count"));if(!n||Number(n)<e.max_views)return!0}return cg(e)},lg.setInteraction=function(e){if(!e||!e.isInteractive())return!1;if(e.reset_views_after===ug)return 0===lg.reload_views_count++;var t=fg(e);if(e.max_views&&t.setItem("".concat(e,"_view"),$e()),e.max_views&&e.max_views>1){var n=cg(e),r=t.getItem("".concat(e,"_count"));return t.setItem("".concat(e,"_count"),r&&!n?Number(r)+1:1),!r||n}return!1};var cg=function(e){var t=fg(e).getItem("".concat(e,"_view"));switch(t=new Date(t),e.reset_views_after){case rg:return!ut(t,$e());case ig:return!ot(t,$e());case ag:return!ft(t,15);case ng:return!0;case og:return null!==t;default:return!1}},fg=function(e){return e.reset_views_after===og?sessionStorage:localStorage},hg=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,u,s){var l;return f(this,n),(l=t.call(this,e,r,i,0,a,u,s)).isTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.isTime?l.isTime(e):null},l.isTime="function"===typeof o?o:null,l}return v(n)}(lg),dg=function(e){y(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24,u=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7?arguments[7]:void 0;return f(this,n),(i=t.call(this,e,u,s,l,c,1,null===r?ig:rg)).isTime=function(){return function(e,t,n){return null==e?st(t,n):!!it(e)&&!!st(t,n)}(i.weekDay,i.fromHour,i.toHour)},i.isAfterTime=function(){return function(e,t){return!(null!=e&&!it(e))&&$e().getHours()>=t}(i.weekDay,i.toHour)},i.getSubtitle=function(){if(null===i.weekDay&&0===i.fromHour&&24===i.toHour)return"*";var e=null!=i.weekDay?tt(i.weekDay).substring(0,3).toUpperCase():"*";return 24===i.toHour?0===i.fromHour?"".concat(e," *"):"".concat(e," ").concat(i.fromHour,":00"):"".concat(e," ").concat(i.fromHour," - ").concat(i.toHour)},i.getNote=function(){return null===i.weekDay&&0===i.fromHour&&24===i.toHour?"* - 24/7 event":0===i.fromHour&&24===i.toHour?"* - all-day event":null===i.weekDay?"* - daily event":null},i.weekDay=r,i.fromHour=a,i.toHour=o,i}return v(n)}(lg),pg=0,vg=1,mg=2,yg=3,gg="none",kg="string",bg="long_string",wg="url",xg="path",_g=v((function e(t,n,r,i,a){var o=this;f(this,e),this.getGroup=function(){return o.label/10|0},this.toString=function(){return o.name},this.valueOf=function(){return o.name},this.name=t,this.miniDescription=n,this.description=r,this.format=i,this.label=a}));_g.Default=new _g("Default","","",gg,100);var Sg={Word:new _g("Word","","write down a word, a pharse or an emoji that describes your day.",kg,1),Sentence:new _g("Sentence","","write a sentence, quote, feeling or a thought that is on your mind.",bg,2),Notes:new _g("Notes","note","write longer about anything.",bg,3),Photos:new _g("Photos","photo, video","share a photo from your gallery.",xg,4),Safari:new _g("Safari","page","read some interesting content? saw some pretty layout? Share a website!",wg,5),Maps:new _g("Maps","place","recommend new places you recently visited, your favorite spots to hang out.",kg,11),News:new _g("News","story","tell others what happened in the world recently, something new - around you.",bg,12),Camera:new _g("Camera","photo, video","share your photographic sessions. Selfies, portraits, panoramas etc.",xg,13),Contacts:new _g("Contacts","person","suggest a friend you want to add to the community!",wg,18),Ideas:new _g("Ideas","idea","suggest a new week motive, new app to add, a special event or an additional app features.",bg,19),Diary:new _g("Diary","note","describe your day. Your thoughts about how it is now.",bg,21),Dreams:new _g("Dreams","story","confess your dreams.",bg,22),Spotify:new _g("Spotify","song, podcast","share your favorite song or podcast.",wg,22),Youtube:new _g("Youtube","video, short","share a video that makes you happy!",wg,23),Netflix:new _g("Netflix","movie, tv series","share the title of a movie or TV series you watched recently.",wg,24),Instagram:new _g("Instagram","post, account","paste the URL of your favorite account or post on Instagram.",wg,25),Pinterest:new _g("Pinterest","post, account","share recipes, ideas for the home, style inspiration, and other ideas to experiment with.",wg,26),LouisVuitton:new _g("Louis Vuitton","collection","share collections from the fashion world.",xg,27),DonutekGng:new _g("DonutekGng","pic","share some brudy rodzinne.~",xg,30),Default:new _g("Default","","",gg,100)},Eg=[Sg.Notes,Sg.Photos,Sg.Safari],Cg={ClearMind:new dg("Clear-Mind",et.Monday,8,24," - oczy\u015b\u0107 sw\xf3j umys\u0142. To nowy tydzie\u0144, nowy motyw i nowe doznania. Upload czas start!",Jy,1,tg.Informative),OhPreview:new dg("Oh-Preview",et.Wednesday,20,22," - OH! To podgl\u0105d poprzedniego tygodnia jednego z uczestnik\xf3w.",Zy,2,tg.Full),ThrowBack:new dg("Throw-Back",et.Thursday,20,22," - OW! Cofnijmy si\u0119 do twojego poprzedniego tygodnia...",Zy,2,tg.Full),DeadLine:new dg("Dead-Line",et.Saturday,20,24," - upload's OFF, Screenka Tygodnia ju\u017c w drodze! W mi\u0119dzyczasie mo\u017cesz powspomina\u0107 sw\xf3j tydzie\u0144.",eg,1,tg.Informative),DeadLineForMe:new dg("Dead-Line",et.Saturday,20,24," - upload's OFF, w tym czasie mo\u017cesz powspomina\u0107 sw\xf3j tydzie\u0144.",Jy,1,tg.Informative),WeekUploads:new dg("Week Uploads",et.Saturday,20,24," - powspominaj sw\xf3j tydzie\u0144.",Jy,1,tg.Interactive),STHere:new dg("ST-Here",et.Sunday,8,24," - przeczytaj najnowsze wydanie Screenki Tygodnia! Powspominaj tydzie\u0144 sw\xf3j i innych. Oczy\u015b\u0107 sw\xf3j umys\u0142 przed nowym...",eg,2,tg.Informative),STHereForMe:new dg("ST-Here",et.Sunday,0,24," - dzie\u0144 relaksu. Powspominaj ten tydzie\u0144 i oczy\u015b\u0107 sw\xf3j umys\u0142 przed nowym...",Jy,0,tg.Informative),WeekUploads2:new dg("Week Uploads 2",et.Sunday,0,24," - powspominaj sw\xf3j tydzie\u0144 drugi raz.",Jy,1,tg.Interactive),MorningShot:new dg("Morning-Shot",null,8,12," - wake up! Jeden z twoich wczorajszych post\xf3w, na dzie\u0144 dobry.",Jy,1,tg.Full),OneShot:new dg("One-Shot",null,19,20," - wieczorny podgl\u0105d jedenego z dzisiejszych post\xf3w uczestnik\xf3w.",Zy,1,tg.Full),DayUploads:new dg("Day Uploads",null,22,24," - powspominaj sw\xf3j dzie\u0144, na koniec dnia.",Jy,0,tg.Interactive),Upload:new hg("Upload","- uchwy\u0107 chwil\u0119.",Jy,tg.Interactive,(function(){return!Cg.DeadLine.isTime()&&!Cg.STHere.isTime()&&(!it(et.Monday)||Cg.ClearMind.isTime())})),UploadNow:new hg("Upload-Now","- przejrzyj to, co w\u0142a\u015bnie doda\u0142e\u015b.",Jy,tg.Interactive,(function(){return Cg.Upload.isTime()}),1,ng),RnShot:new hg("Rn-Shot","- z ostatniej chwili! Najnowszy post innego uczestnika do 15min po jego dodaniu.",Zy,tg.Full,(function(e){return e&&ft(e.date,15)}),1,ag),ManageUploads:new hg("Manage Uploads","- zarz\u0105dzaj swoimi uploadami.",Jy,tg.Interactive,(function(){return!0})),Screenka:new hg("Screenka Tygodnia","- w sk\xf3rcie ST, lokalna gazeta cotygodniowych wspomnie\u0144.",eg,tg.Interactive,(function(e){var t;return e&&(Cg.STHere.isTime()||(null===(t=e.week)||void 0===t?void 0:t.force_st))}),1,rg)},Tg={getAvailableDayEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.values(Cg).filter((function(e){return e.constructor===dg})),i=Ig(r,e,t,n);return i.filter((function(e,t){return i.findIndex((function(t){return t.name===e.name}))===t}))},getAvailableCustomEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.values(Cg).filter((function(e){return e.constructor===hg}));return Ig(r,e,t,n)}},Ig=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?e:e.filter((function(e){return e.isAvailable(t,n)}))},Ng={getApp:function(e){var t=Object.values(Sg).find((function(t){return t.name===e}));return t||(t=_g.Default),t},getBuildInApps:function(){return Eg}},Dg=!1,Ag=t.createContext(),Pg=function(e){var n,r,i=e.children,a=e.demo,o=function(e){return e?Wy:Hy}(a),u=o.getUser,l=o.getUserByFunnyname,f=o.getUserSrcUrl,h=o.trySetUsername,d=o.trySetPersonalizedApps,p=o.changeUserPreferences,v=function(e){return e?By:Vy}(a),m=v.getHost,y=v.getCurrentWeekNumber,g=function(e){return e?Gy:qy}(a),k=g.getWeek,b=g.trySetHostWeekScreenkaView,w=g.onWeekSnapshot,x=g.getHostLastWeekName,_=function(e){return e?Qy:Ky}(a),S=_.getUserCurrentDayPosts,E=_.getUserCurrentWeekPosts,C=_.getPostTicketsUsed,T=_.changePostPermissions,I=_.postPost,N=_.getUserLatestPost,D=_.getUserCurrentDayRandomPost,A=_.getUserPastWeekPosts,P=_.getPost,R=_.getPostAndTrySetView,j=_.getPathPostContentUrl,O=_.getUserYesterdayRandomPost,L=Tg,M=L.getAvailableDayEvents,U=L.getAvailableCustomEvents,F=Ng,z=F.getApp,V=F.getBuildInApps,B=s((0,t.useState)(Dg),2),H=B[0],W=B[1],q=s((0,t.useState)(Dg),2),G=q[0],K=q[1],Q=s((0,t.useState)(Dg),2),Y=Q[0],$=Q[1],X=H?H.fullname:H,J=G?G.id:G,Z=G?G.subscribers:G,ee=Y?Y.name:Y,te=H===Dg,ne=G===Dg,re=Y===Dg,ie=(0,t.useMemo)((function(){return te||ne||re}),[te,ne,re]),ae=(0,t.useRef)(null),oe=(0,t.useRef)(null),ue=function(){return oe.current},se=(0,t.useRef)(null),le=(0,t.useRef)([]),ce=function(e,t){e&&t&&(oe.current=t.id,se.current=t.popular_apps,le.current=t.getFriends(e.fullname))},fe=(0,t.useRef)(0),he=(0,t.useRef)(0),de=function(){return he.current},pe=(0,t.useRef)(null),ve=(0,t.useRef)(null);(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(){var t,n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("funnyname"),e.next=3,l(t);case 3:if((n=e.sent)&&n.preferences.me){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();H===Dg&&e().then(W)}),[]),(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,m(null===t||void 0===t||null===(n=t.hosts)||void 0===n?void 0:n.at(0));case 4:if((r=e.sent)&&r.subscribers.has(t.fullname)){e.next=7;break}return e.abrupt("return",null);case 7:return t.preferences.friends&&(null==(i=r.subscribers.get(t.fullname).leave_date)||i>$e())&&ce(t,r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();H!==Dg&&G===Dg&&e(H).then(K)}),[X]),(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(t,n){var r,i,a;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){var e=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t.fullname,n.id);case 2:return i=e.sent,he.current=null!==r&&void 0!==r&&r.max_tickets?r.max_tickets:null!==n&&void 0!==n&&n.max_tickets?n.max_tickets:0,fe.current=Math.max(he.current-i,0),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),t&&n){e.next=3;break}return e.abrupt("return",null);case 3:if(!(null==(i=n.subscribers.get(t.fullname).join_date)||i>$e())){e.next=6;break}return e.abrupt("return",null);case 6:if(a=k(n.id,null,!0),!t.preferences.screenka){e.next=10;break}return e.next=10,r(t,n,a);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();H!==Dg&&G!==Dg&&Y===Dg&&e(H,G).then($)}),[J]),(0,t.useEffect)((function(){if(G&&Y){var e=w(G.id,Y.name,$);return function(){return e()}}}),[J,ee]);var me=(0,t.useMemo)((function(){var e;if(!G||!H||null===G||void 0===G||!G.subscribers||null===H||void 0===H||!H.fullname||null===G||void 0===G||null===(e=G.subscribers)||void 0===e||!e.has(H.fullname))return!0;var t=G.subscribers.get(H.fullname);return!(null==t.leave_date||t.leave_date>$e())}),[X,Z]),ye=(0,t.useMemo)((function(){if(!G||!H||!G.subscribers||!H.fullname||!G.subscribers.has(H.fullname))return!0;var e=G.subscribers.get(H.fullname);return!(null!=e.join_date&&e.join_date<$e()&&!(null!=e.leave_date&&e.leave_date<$e()))}),[X,Z]),ge=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t).then((function(e){return null!=e&&(ae.current=e,!0)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(ae.current.fullname,t).then((function(e){return ae.current.username=t,e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(ae.current.fullname,t).then((function(e){return ae.current.personalized_apps=t,e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me&&(t.friends=!0),ye&&(t.screenka=!0),e.abrupt("return",p(H.fullname,t).then((function(){var e=Ke({},H);e.preferences=t,e.preferences.me?W(e):W(null)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=We(Be().mark((function e(t,n){var r,i,a,o,u=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){return le.current.includes(e)},r(n)||n===H.fullname){e.next=3;break}return e.abrupt("return",null);case 3:for(i=u.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=u[o];return e.abrupt("return",t.apply(void 0,[n].concat(a)));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(u,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(f,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(N,t,oe.current,!0,[].concat(c(H.personalized_apps),c(se.current))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(D,t,oe.current,!0,[].concat(c(H.personalized_apps),c(se.current))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(A,t,n,oe.current,!0,[].concat(c(H.personalized_apps),c(se.current)),!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=We(Be().mark((function e(t){var n,r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(r.length>1&&void 0!==r[1]?r[1]:null)&&Je()?null:oe.current,e.abrupt("return",S(t,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=We(Be().mark((function e(t){var n,r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(r.length>1&&void 0!==r[1]?r[1]:null)&&Je()?null:oe.current,e.abrupt("return",E(t,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=(0,t.useMemo)((function(){return y(null===G||void 0===G?void 0:G.start_date)}),[null===G||void 0===G?void 0:G.start_date]),Ae=function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",b(t,n,H.fullname));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pe=function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(oe.current));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=We(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return e.filter((function(e){return e.permissions.screenka})).length},e.abrupt("return",S(t,n).then((function(e){pe.current=e,fe.current=Math.max(de()-r(e),0)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),null!=pe.current){e.next=4;break}return e.next=4,t(H.fullname,null===G||void 0===G?void 0:G.id);case 4:return e.abrupt("return",pe.current.filter((function(e){return!0===e.permissions.me})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t,n).then((function(e){ve.current=e})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),null!=ve.current){e.next=4;break}return e.next=4,t(H.fullname,G.id);case 4:return e.abrupt("return",ve.current.filter((function(e){return!0===e.permissions.me})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=We(Be().mark((function e(t){var n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue(),e.abrupt("return",A(H.fullname,t,n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(H.fullname,G.id));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=We(Be().mark((function e(){var t,n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Re();case 4:return t=e.sent,n={},null===t||void 0===t||t.forEach((function(e){n[e.app]=(n[e.app]||0)+1})),e.abrupt("return",new Map(Object.entries(n)));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(H.fullname,t,n).then((function(){null!=pe.current&&(pe.current=pe.current.map((function(e){return e.id===t&&(e.permissions=yt(n,e.permissions)),e}))),null!=ve.current&&(ve.current=ve.current.map((function(e){return e.id===t&&(e.permissions=yt(n,e.permissions)),e})))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=s((0,t.useState)([]),2),Ve=Fe[0],He=Fe[1],qe=function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G&&(t.host_id=G.id),Y&&(t.week_name=Y.name),t.upload_date=$e(),t.permissions={me:t.permissions.me&&H.preferences.me,friends:t.permissions.friends&&!me&&H.preferences.friends,screenka:t.permissions.screenka&&!ye&&H.preferences.screenka&&fe.current>0},t.week_tag=t.week_tag&&t.week_name,e.abrupt("return",I(H.fullname,t,n).then((function(e){fe.current=Math.max(fe.current-1,0),t.id=e,null!=pe.current&&pe.current.push(t),null!=ve.current&&ve.current.push(t),He([].concat(c(Ve),[t]))})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=s((0,t.useState)(),2),Qe=Ge[0],Ye=Ge[1],Xe=function(){var e=We(Be().mark((function e(t,n){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R(t,n,H.fullname));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Je=function(){return!!H&&(null===G||void 0===G?void 0:G.fullname)===H.fullname},Ze=(0,t.useMemo)((function(){if(!H)return[];var e={me:H.preferences.me,friends:H.preferences.friends&&!me,screenka:H.preferences.screenka&&!ye};return M(De,e)}),[De,null===H||void 0===H?void 0:H.preferences,me,ye]),et=(0,t.useMemo)((function(){return M(De,{friends:me,screenka:ye}).filter((function(e){return!Ze.map((function(e){return e.name})).includes(e.name)}))}),[De,me,ye]),tt=(0,t.useMemo)((function(){if(!H)return[];var e={me:H.preferences.me,friends:H.preferences.friends&&!me,screenka:H.preferences.screenka&&!ye};return U(De,e)}),[De,null===H||void 0===H?void 0:H.preferences,me,ye]),nt={user:H,host:null!==H&&void 0!==H&&null!==(n=H.preferences)&&void 0!==n&&n.me?G:null,week:null!==H&&void 0!==H&&null!==(r=H.preferences)&&void 0!==r&&r.me?Y:null,friendsDisabled:me,screenkaDisabled:ye,AM_I_HOST:Je,GET_HOST_ID:function(){return Je()?G.id:null},UserService:{getTempMe:function(){return ae.current},trySetMyUsername:ke,trySetMyPersonalizedApps:be,changeMyPreferences:we,tryLogMeInTemporarly:ge,saveMe:function(){if(!ae.current)throw new Error("Cannot save. User is null");localStorage.setItem("funnyname",ae.current.funnyname),p(ae.current.fullname,{me:!0,friends:!0,screenka:!0}),ae.current.preferences={me:!0,friends:!0,screenka:!0},$(Dg),K(Dg),W(ae.current)},getFriend:_e,getFriendSrcUrl:Se,getUserUsername:function(e){return u(e).then((function(e){return null===e||void 0===e?void 0:e.username}))},getUserSrcUrl:f},HostService:{weekNumber:De,getMyHostId:ue,getMyFriends:function(){return le.current},getMyFriendsWithHostId:function(){return[le.current,oe.current]},getMyGroups:function(){return null===G||void 0===G?void 0:G.getMyGroups(null===H||void 0===H?void 0:H.fullname)},getHostPersonalizedApps:function(e){return m(e).then((function(e){return e?e.personalized_apps:[]}))}},WeekService:{getMyHostLastWeekName:Pe,trySetMyScreenkaView:Ae,getWeekAppsCounts:function(e,t){return k(e,t).then((function(e){return e?e.apps_counts:new Map}))}},PostService:{getMyPastWeekPosts:Oe,getMyDayUploads:Re,getMyWeekUploads:je,getMyYesterdayRandomPost:Le,hideIfAppsState:Qe,getTickets:function(){return fe.current},getMaxTickets:de,getMyAppsCounts:Me,getPostAndTrySetMyView:Xe,myRecentlyAddedPosts:Ve,setHideIfAppsState:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((function(t){return!e.personalized_apps.includes(t)}));Ye(t)},postMyPost:qe,changeMyPostPermissions:Ue,resetMyRecentlyAddedPosts:function(){return He([])},getFriendLatestPost:Ee,getFriendCurrentDayRandomPost:Ce,getFriendPastWeekPosts:Te,getUserCurrentDayPostsHOST:Ie,getUserCurrentWeekPostsHOST:Ne,getPost:P,getPathPostContentUrl:j},AppService:{getApp:z,getBuildInApps:V},EventService:{myDayEvents:Ze,disabledDayEvents:et,myCustomEvents:tt,getMyInteractiveEvent:function(e){return[].concat(c(Ze),c(tt)).find((function(t){return t.toString()===e&&t.isInteractive()}))}}};return(0,ze.jsx)(Ag.Provider,{value:nt,children:ie?(0,ze.jsx)(kt,{logo:!0}):i})},Rg=function(e){var n=e.onTempLogin,r=(0,t.useContext)(Ag),i=r.user,a=r.UserService,o=s((0,t.useState)(Xe("default_profile_picture.png")),2),u=o[0],l=o[1],c=(0,t.useRef)(),f=s((0,t.useState)(!1),2),h=f[0],d=f[1],p=s((0,t.useState)(!1),2),v=p[0],m=p[1];(0,t.useEffect)((function(){var e=setTimeout((function(){c.current.value=localStorage.getItem("funnyname"),i&&a.getUserSrcUrl(i.fullname).then(l)}),500);return function(){return clearTimeout(e)}}),[]);var y=function(){var e=We(Be().mark((function e(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!0),a.tryLogMeInTemporarly(c.current.value).then((function(e){d(!e),e&&n()})).catch((function(e){e instanceof Oy?window.alert("Multiple users with same username. Contact the host."):window.alert(e.message)})).then((function(){return m(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ze.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,ze.jsx)("div",{className:"login flex-center",children:(0,ze.jsxs)("div",{className:"login-user",children:[(0,ze.jsx)("img",{src:u,alt:"profile"}),(0,ze.jsxs)("div",{children:[(0,ze.jsx)("h4",{children:"Enter Secret Name:"}),(0,ze.jsx)(Qe,{autofocus:!0,reff:c,onEnter:y,isRed:h,isLoading:v})]})]})}),(0,ze.jsx)("footer",{className:"center",children:"Tip: Click enter while typing"})]})},jg=function(e){var t=e.value,n=e.orange,r=e.onClick,i=void 0===r?void 0:r,a=function(e){return"string"===typeof e&&1===e.length};return(0,ze.jsxs)("span",{onClick:i,className:"noti-dot noselect"+(n?" bcolor-orange":" bcolor-red")+(i?" clickable":""),children:[a(t)&&(0,ze.jsx)("div",{style:"*"===t?{fontSize:"27px",paddingTop:"7px"}:{fontSize:"27px",marginTop:"-3px"},children:t}),!a(t)&&(0,ze.jsx)("div",{children:t})]})},Og=function(e){var t=e.application,n=void 0===t?_g.Default:t,r=e.isUploadMode,i=void 0!==r&&r,a=e.notificationText,o=void 0===a?null:a,u=e.disabled,s=void 0!==u&&u,l=e.notificationOrange,c=void 0!==l&&l,f=e.onClick,h=e.height,d=void 0===h?70:h;return null!=n&&"object"===typeof n&&n.constructor===_g||(n=_g.Default),(0,ze.jsxs)("div",{className:"shadow fromdown"+(s?" opacity":"")+(!i&&f?" clickable":""),style:{position:"relative",height:d+"px",borderRadius:Math.ceil(13*d/60)+"px"},onClick:s||i?void 0:f,children:[(0,ze.jsx)("img",{src:Je(n.name,d),alt:n.name,style:{height:d+"px",borderRadius:Math.ceil(13*d/60)+"px"}}),(null!=o||i)&&(0,ze.jsx)(jg,{onClick:s?void 0:f,orange:c,value:i?"+":o})]})},Lg=Og,Mg=function e(t){var n=t.defaultChecked,r=t.checked,i=t.disabled,a=t.onChange,o=t.name,u=void 0===o?"":o,s=t.mini,l=t.children,c=t.hide;return i=i||!a,l?(0,ze.jsxs)("span",{style:{display:"flex",marginTop:"-5px",opacity:c?"0":r?"0.8":"0.6"},children:[(0,ze.jsx)(e,{defaultChecked:n,checked:r,disabled:i,onChange:a,name:u,mini:s}),(0,ze.jsx)("span",{className:i?" opacity":"",style:{margin:"0 0 0 5px",fontSize:s?"15px":"20px"},children:l})]}):(0,ze.jsxs)("label",{className:"container"+(s?" mini":""),children:[(0,ze.jsx)("input",{type:"checkbox",name:u,defaultChecked:n,checked:r,disabled:i,onChange:a}),(0,ze.jsx)("span",{className:"checkmark"+(s?" mini":"")})]})},Ug=function(e){var t=e.onClick,n=e.style;return(0,ze.jsx)("button",{className:"button-close bcolor-dark-gray",style:n,onClick:t,children:(0,ze.jsx)("div",{className:"noselect",children:"+"})})},Fg=function(e){var t=e.onClick,n=e.disabled;return(0,ze.jsx)("button",{disabled:n,className:"button-next focus",onClick:t,children:"NEXT"})},zg=function(e){var t=e.onClick,n=e.focus,r=e.disabled,i=e.children,a=ge();return(0,ze.jsxs)("span",{className:"button-page"+(!r&&n?" color-green-highlight":"")+(r&&!i?" opacity":""),onClick:r?void 0:function(){t?t():a(1)},style:Ke({float:"right"},r?{cursor:"default"}:{}),children:[i,(0,ze.jsx)("span",{style:null!=i&&r?{opacity:0}:void 0,className:"arrow",children:">"})]})},Vg=function(e){var t=e.disabled,n=e.onClick,r=void 0===n?null:n,i=e.alert,a=void 0!==i&&i,o=e.children,u=ge();return(0,ze.jsxs)("span",{className:"button-page"+(t?" opacity":""),onClick:t?void 0:function(){a&&!window.confirm("Are you sure you want to leave?")||(r?r():u(-1))},style:t?{cursor:"default"}:void 0,children:[(0,ze.jsx)("span",{style:null!=o&&t?{opacity:0}:void 0,className:"arrow",children:"<"}),o]})},Bg=function(e){var n=e.onSetup,r=(0,t.useContext)(Ag),i=r.UserService,a=r.HostService,o=r.AppService,u=s((0,t.useState)(Xe("default_profile_picture.png")),2),l=u[0],c=u[1],f=s((0,t.useState)(null),2),h=f[0],d=f[1],p=s((0,t.useState)(null),2),v=p[0],m=p[1],y=s((0,t.useState)(!0),2),g=y[0],k=y[1],b=s((0,t.useState)(!1),2),w=b[0],x=b[1];(0,t.useEffect)((function(){i.getUserSrcUrl(i.getTempMe().fullname).then(c),_(i.getTempMe()).then((function(e){d(e);var t=S(i.getTempMe(),e);m(t),k(!1)}))}),[]),(0,t.useEffect)((function(){g||(E.current.value=i.getTempMe().username)}),[g]);var _=function(){var e=We(Be().mark((function e(t){var n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Set,null!=t.hosts){e.next=3;break}throw new Error("me.hosts error");case 3:r=0;case 4:if(!(r<t.hosts.length)){e.next=12;break}return e.next=7,a.getHostPersonalizedApps(t.hosts[r]);case 7:e.sent.forEach((function(e){n.add(e)}));case 9:r++,e.next=4;break;case 12:return e.abrupt("return",Array.from(n));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){var n=new Array(t.length).fill(!1);return t.forEach((function(t,r){e.personalized_apps.includes(t)&&(n[r]=!0)})),n},E=(0,t.useRef)(),C=s((0,t.useState)(!1),2),T=C[0],I=C[1],N=s((0,t.useState)(!1),2),D=N[0],A=N[1],P=s((0,t.useState)(!1),2),R=P[0],j=P[1],O=function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),t=[],h.forEach((function(e,n){v[n]&&t.push(e)})),!(t.length>0||window.confirm("You haven't selected any app you're interested in. Continue?"))){e.next=6;break}return e.next=6,i.trySetMyPersonalizedApps(t).then((function(e){e&&(i.saveMe(),n())}));case 6:x(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?(0,ze.jsx)(kt,{}):(0,ze.jsxs)("div",{className:"setup noscroll",children:[(0,ze.jsxs)("h2",{className:"color-gray-solid",style:{marginLeft:"15px"},children:["Welcome, ",i.getTempMe().getName(),"!",(0,ze.jsx)("span",{role:"img","aria-label":"emoji",children:" \u270b\ud83c\udffc"})]}),(0,ze.jsxs)("div",{className:"setup-user",children:[(0,ze.jsx)("img",{src:l,alt:"profile"}),(0,ze.jsxs)("div",{children:[(0,ze.jsx)("h4",{children:"Change Your Username:"}),(0,ze.jsx)(Qe,{reff:E,readOnly:R,onEnter:function(){A(!0),E.current.blur(),i.trySetMyUsername(E.current.value).then((function(e){I(!e),e&&j(!0),A(!1)}))},isRed:T,isInputLoading:D})]})]}),(null===h||void 0===h?void 0:h.length)>0&&(0,ze.jsxs)("div",{className:"setup-apps",children:[(0,ze.jsx)("h4",{children:"Select apps you interested in:"}),(0,ze.jsx)("div",{className:"setup-apps-list",children:h.map((function(e,t){var n=o.getApp(e);return(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Mg,{disabled:w,defaultChecked:null!==v&&v[t],onChange:function(e){return function(e,t){v[e]!==t&&m(v.map((function(t,n){return n===e?!t:t})))}(t,e.target.checked)}}),(0,ze.jsx)(Og,{application:n},e),(0,ze.jsxs)("div",{className:"setup-app-description",children:[(0,ze.jsx)("div",{children:(0,ze.jsx)("b",{children:n.name})}),(0,ze.jsxs)("span",{className:"small",children:["- ",n.description," "]})]})]},t)}))})]}),(0,ze.jsx)("div",{className:"flex-center-v",children:(0,ze.jsx)(Fg,{disabled:w,onClick:O})})]})},Hg=function(){var e=ge(),n=s((0,t.useState)(!1),2),r=n[0],i=n[1];return(0,ze.jsxs)("div",{children:[!r&&(0,ze.jsx)(Rg,{onTempLogin:function(){return i(!0)}}),r&&(0,ze.jsx)(Bg,{onSetup:function(){e("/",{replace:!0})}})]})},Wg=function(e){var n=(0,t.useRef)(e);(0,t.useEffect)((function(){n.current=e}),[e]),(0,t.useEffect)((function(){var e=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[])},qg=function(e){var t=e.className,n=void 0===t?"":t,r=e.bold,i=e.underline,a=e.red,o=void 0!==a&&a,u=e.orange,s=void 0!==u&&u,l=e.nocolor,c=void 0!==l&&l,f=e.onClick,h=e.disabled,d=void 0!==h&&h,p=e.active,v=void 0===p||p,m=e.children;return c=c||!f,(0,ze.jsx)("span",{className:"A noselect "+n+(c?"":o?" color-red ":s?" color-orange ":" color ")+(i?" underline":" ")+(d||!v?" opacity":"")+(f?"":" noclick"),style:r?{fontWeight:"bold"}:{},onClick:!f||d?void 0:function(){return f()},children:m})},Gg=function(e){var t=e.title,n=e.subtitle,r=e.image,i=e.children,a=e.footer,o=e.onClose,u=e.footerCenter,s=e.maxHeight;return(0,ze.jsxs)("div",{className:"bottom-tab bcolor-dark-gray-solid",style:s?{height:"calc(100% + (-100px))",minHeight:"400px"}:{minHeight:"350px"},children:[(0,ze.jsxs)("div",{className:"head",children:[r&&(0,ze.jsx)("img",{src:r,alt:"main",style:{marginBottom:"5px"}}),(0,ze.jsxs)("h3",{style:r?{marginBottom:"5px"}:{},className:"color-white",children:[t,r?(0,ze.jsx)("br",{}):"",(0,ze.jsxs)("span",{style:r?{marginTop:"0"}:{},className:r?"subtitle":"subtitle opacity",children:[" ",n]})]})]}),i&&(0,ze.jsx)("div",{className:"bottom-tab-content",children:i}),a&&(0,ze.jsx)("footer",{className:"light",children:a}),u&&(0,ze.jsx)("footer",{className:"light center",children:u}),(0,ze.jsx)("div",{className:"bottom-tab-close",children:(0,ze.jsx)(Ug,{onClick:o})})]})},Kg=function(e){var t=e.onClick,n=e.disabled,r=e.tickets,i=e.noTicketAnimation,a=void 0!==i&&i,o=e.options,u=o.lock,s=o.orange,l=o.hashtag?"UPLO#D":"UPLOAD";return(0,ze.jsx)(Qg,{text:l,className:s?"bcolor-orange":void 0,style:u?{color:"#050509"}:void 0,onClick:t,disabled:n,tickets:r,noTicketAnimation:a})},Qg=function(e){var t=e.text,n=void 0===t?"UPLOAD":t,r=e.className,i=void 0===r?"":r,a=e.style,o=e.onClick,u=e.disabled,s=e.tickets,l=e.noTicketAnimation,c=void 0!==l&&l;return(0,ze.jsxs)("button",{disabled:u,className:"upload "+i+(u?c?" focus opacity ":" bcolor-gray":" focus"),style:a,onClick:o,children:[c&&n,!c&&!u&&(s>0?n:"".concat(n,"*")),!c&&u&&(0,ze.jsxs)("h5",{children:[(0,ze.jsx)("span",{role:"img","aria-label":"ticket",children:"\ud83c\udf9f\ufe0f"}),"x",s]})]})},Yg=function(e){var n=e.onClose,r=(0,t.useContext)(Ag),i=r.friendsDisabled,a=r.screenkaDisabled,o=r.UserService,u=r.user,l=r.HostService,c=(0,t.useRef)(u),f=s((0,t.useState)(),2),h=f[0],d=f[1],p=s((0,t.useState)(),2),v=p[0],m=p[1],y=s((0,t.useState)(),2),g=y[0],k=y[1],b=s((0,t.useState)(!1),2),w=b[0],x=b[1],_=s((0,t.useState)(!1),2),S=_[0],E=_[1],C=(0,t.useRef)(l.getMyGroups());(0,t.useEffect)((function(){w||(d(c.current.preferences.me),m(c.current.preferences.friends),k(c.current.preferences.screenka))}),[w]);return(0,t.useEffect)((function(){!h&&v&&m(!1),!h&&g&&k(!1)}),[h,v,g]),(0,ze.jsxs)(Gg,{maxHeight:!0,onClose:S?function(){}:n,title:"Screenka",subtitle:"app-merger",children:[(0,ze.jsxs)("h4",{className:w&&!h?"text-shine":"",style:{fontWeight:"bold",marginTop:"30px",textAlign:"center"},children:[(0,ze.jsx)(qg,{active:h,onClick:!S&&w?function(){return d(!h)}:void 0,children:"You."}),(0,ze.jsx)(qg,{active:v,onClick:S||!w||i?void 0:function(){v||d(!0),m(!v)},disabled:i,children:" Friends."}),(0,ze.jsx)(qg,{active:g,onClick:S||!w||a?void 0:function(){g||d(!0),k(!g)},disabled:a,children:" and Screenka Tygodnia."})]}),(0,ze.jsxs)("div",{className:"margin",style:{marginTop:"auto"},children:[(0,ze.jsx)("div",{children:(0,ze.jsxs)("span",{className:"small",style:h?void 0:{opacity:0},children:[(0,ze.jsx)("b",{children:"You. "})," Capture the happiness. Upload posts and preview them at the end of the day."]})}),!i&&(0,ze.jsx)("div",{children:(0,ze.jsxs)("span",{className:"small",style:v&&h?void 0:{opacity:0},children:[(0,ze.jsx)("b",{children:"Friends. "})," Have fun with your friends. Participate in the events during the week. ",C.current?(0,ze.jsxs)("span",{children:["Your groups: ",(0,ze.jsx)("span",{style:{fontStyle:"italic"},children:C.current.join(", ")})]}):""]})}),!a&&(0,ze.jsxs)("div",{children:[" ",(0,ze.jsxs)("span",{className:"small",style:g&&h?void 0:{opacity:0},children:[(0,ze.jsx)("b",{children:"Screenka Tygodnia. "}),"Join the story. Submit posts to the weekly gazette."]})]})]}),(0,ze.jsxs)("footer",{className:"center",style:{marginTop:0},children:["You can change the tagline by your own.",!(c.current.preferences.me===h&&c.current.preferences.friends===v&&c.current.preferences.screenka===g)&&(0,ze.jsxs)(qg,{disabled:S,onClick:function(){E(!0),Promise.all([o.changeMyPreferences({me:h,friends:v,screenka:g}),Ze(1e3)]).then((function(){return n()}))},bold:!0,children:[(0,ze.jsx)("br",{})," Change "]}),(0,ze.jsxs)(qg,{className:c.current.preferences.me||w?void 0:"text-shine",onClick:function(){return x(!w)},disabled:S,children:[" ",w?"Cancel":"Edit"]})]})]})},$g=function(e){var t=e.app,n=e.onClose,r=e.totalUploads;return(0,ze.jsx)(Gg,{onClose:n,title:t.name,subtitle:"app",footer:"Total uploads: ".concat(r),children:(0,ze.jsx)("h4",{children:" - "+t.description})})},Xg=function(e){var n=e.app,r=(e.appType,e.onClose),i=(0,t.useContext)(Ag),a=i.PostService,o=i.user,u=(i.week,i.screenkaDisabled),l=o,c=s((0,t.useState)(),2),f=c[0],h=c[1],d=(0,t.useRef)(),p=(0,t.useRef)(),v=s((0,t.useState)(!1),2),m=v[0],y=v[1],g=s((0,t.useState)(a.getTickets()),2),k=g[0],b=g[1],w=(0,t.useRef)(a.getTickets()),x=s((0,t.useState)(!1),2),_=x[0],S=x[1];Wg((function(e){e.preventDefault(),e.returnValue=""}));var E=(0,t.useRef)(null);return(0,ze.jsxs)(Gg,{onClose:m?function(){}:r,title:n.name,subtitle:n.miniDescription,footerCenter:w.current>0||!l.preferences.screenka||u?"You can manage uploads till end of the day.":"You can manage tickets later.",maxHeight:!0,children:[(0,ze.jsx)("h4",{children:" - "+n.description}),(0,ze.jsxs)("div",{style:{marginTop:"auto"},className:"margin",children:[n.format===kg&&(0,ze.jsx)("h2",{style:{textAlign:"center"},children:f}),n.format===kg&&(0,ze.jsx)(Qe,{isRed:_,isLoading:m,onChange:function(e){E.current&&clearTimeout(E.current),E.current=setTimeout((function(){h(e.target.value)}),1e3)},reff:d,placeholder:"content..."}),n.format===bg&&(0,ze.jsx)(Qe,{isRed:_,isLoading:m,reff:d,placeholder:"content...",longer:!0}),n.format===wg&&(0,ze.jsx)(Qe,{isRed:_,isLoading:m,reff:d,placeholder:"content...",paste:!0}),n.format===xg&&(0,ze.jsx)(Qe,{isRed:_,isLoading:m,onChange:function(e){var t=e.target.files[0];d.current=t,d.current&&(d.current.value=null===t||void 0===t?void 0:t.name)},file:!0}),(0,ze.jsx)(Qe,{isLoading:m,reff:p,placeholder:"context... (optional)",longer:!0}),(0,ze.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,ze.jsx)(Kg,{onClick:function(){var e;_&&S(!1),y(!0);var t=n.format===xg?d.current:null,i=new bt(null,null,null,null,n.name,null===(e=d.current)||void 0===e?void 0:e.value,p.current.value,{me:!0,friends:!0,screenka:!0});Promise.all([a.postMyPost(i,t),Ze(1500)]).then((function(){return b(Math.max(0,k-1))})).then((function(){return Ze(1e3)})).then(r).catch((function(e){e.message&&window.alert(e.message),S(!0)})).then((function(){return y(!1)}))},disabled:m,tickets:k,noTicketAnimation:!l.preferences.screenka||u,options:{}})}),!u&&l.preferences.screenka&&w.current<=0&&(0,ze.jsx)("footer",{className:"light center",style:{marginBottom:"0px"},children:"* - upload without ticket."})]})]})},Jg=function(e){var t=e.event,n=e.onClose;return(0,ze.jsx)(Gg,{onClose:n,title:t.name,subtitle:t.getSubtitle(),footer:t.getNote(),children:(0,ze.jsx)("h4",{style:{fontSize:"19px"},children:t.description})})},Zg=function(e){var n=e.user_fullname,r=e.since_week,i=e.onClose,a=(0,t.useContext)(Ag),o=a.UserService,u=a.AM_I_HOST,l=a.GET_HOST_ID,c=ge(),f=s((0,t.useState)(Xe("default_profile_picture.png")),2),h=f[0],d=f[1],p=s((0,t.useState)(null),2),v=p[0],m=p[1];(0,t.useEffect)((function(){o.getFriendSrcUrl(n).then((function(e){return e?d(e):null})),o.getFriend(n).then(m)}),[]);return(0,ze.jsx)(Gg,{title:mt(n),subtitle:"Also known as ".concat(v?v.username:"____ ___"),footer:"Since: #".concat(r," week"),image:h,onClose:i,children:u()&&(0,ze.jsxs)("div",{children:[(0,ze.jsx)(qg,{bold:!0,onClick:function(){c("/posts/".concat(n,"/").concat(l(),"/dayuploads"))},children:"DAY"}),",",(0,ze.jsx)(qg,{bold:!0,onClick:function(){c("/posts/".concat(n,"/").concat(l(),"/weekuploads"))},children:" WEEK"})]})})},ek=t.createContext(),tk=function(e){var n=e.children,r=s((0,t.useState)(null),2),i=r[0],a=r[1],o=function(){null!==i&&a(null)},u={setBottomTab:function(e){a(e)},closeBottomTab:o,isBottomTab:function(){return null!==i},getObject:function(){return null===i||void 0===i?void 0:i.object},equalObject:function(e){return(null===i||void 0===i?void 0:i.object)===e}};return(0,ze.jsxs)(ek.Provider,{value:u,children:[(0,ze.jsx)("div",{onClick:function(){return o()},children:n}),i&&0===i.id&&(0,ze.jsx)($g,{app:i.object,totalUploads:i.total_uploads,onClose:function(){return a(null)}}),i&&1===i.id&&(0,ze.jsx)(Xg,{app:i.object,appType:i.app_type,onClose:function(){return a(null)}}),i&&2===i.id&&(0,ze.jsx)(Zg,{user_fullname:i.object,since_week:i.since_week,role:i.role,onClose:function(){return a(null)}}),i&&3===i.id&&(0,ze.jsx)(Jg,{event:i.object,onClose:function(){return a(null)}}),i&&4===i.id&&(0,ze.jsx)(Yg,{onClose:function(){return a(null)}})]})},nk=function(e){var t=e.style,n=e.disabled,r=e.onClick,i=e.text;return(0,ze.jsx)("button",{disabled:n,className:"bcolor-blue button-week-uploads shadow",style:t,onClick:r,children:(0,ze.jsx)("h2",{style:{margin:"5px",fontSize:"30px",lineHeight:"28px",color:"white"},children:i.toUpperCase()})})},rk=function(e){var t=e.style,n=e.onClick,r=e.text;return(0,ze.jsx)("button",{className:"bcolor-orange button-week-uploads shadow",style:t,onClick:n,children:(0,ze.jsx)("h2",{style:{margin:"5px",fontSize:"30px",lineHeight:"28px",color:"white"},children:r.toUpperCase()})})},ik=function(e){var t=e.style,n=e.onClick,r=e.disabled;return(0,ze.jsxs)("button",{className:"button-screenka focus shadow ",style:t,onClick:n,disabled:r,children:[(0,ze.jsx)("img",{src:Xe("screenka-border-top.png"),alt:"decorative drawing"}),(0,ze.jsxs)("h2",{children:["SCREENKA",(0,ze.jsx)("span",{}),(0,ze.jsx)("br",{}),(0,ze.jsx)("span",{}),"TYGODNIA"]}),(0,ze.jsx)("img",{src:Xe("screenka-border-bottom.png"),alt:"decorative drawing"})]})},ak=function(e){var t=e.style,n=e.onClick,r=e.isRotate,i=void 0!==r&&r,a=e.disabled;return(0,ze.jsx)("button",{disabled:a,className:"bcolor-dark-gray-solid"+(i?" button-plus-red":"")+" button-plus shadow"+(a?" opacity":""),style:t,onClick:n,children:(0,ze.jsx)("div",{className:i?"rotate":"",children:"+"})})},ok=function(e){var t=e.apps,n=e.notificationCountsMap,r=void 0===n?new Map:n,i=e.disabled,a=e.appHeight,o=void 0===a?70:a,u=e.onAppClick,s=void 0===u?null:u,l=e.appClassName,c=void 0===l?"":l,f=e.specialAppName,h=void 0===f?null:f,d=e.specialClassName,p=void 0===d?"":d,v=e.notSpecialClassName,m=void 0===v?"":v,y=e.orangeAppNames,g=void 0===y?[]:y,k=e.isUploadMode,b=void 0!==k&&k;if(t&&r)return(0,ze.jsx)("div",{className:"app-conteiner"+(i?" opacity noclick":""),style:{gridTemplateColumns:"repeat(auto-fill, "+o+"px)"},children:t.map((function(e,t){return(0,ze.jsx)("div",{className:c+" "+(n=e.name,null===h?"":h===n?p:m),children:(0,ze.jsx)(Lg,{onClick:s?function(){return s(e)}:void 0,isUploadMode:b,notificationText:r.get(e.name),notificationOrange:g.includes(e.name),application:e,height:o})},t);var n}))})},uk=function(e){var n=e.user_fullname,r=e.count,i=void 0===r?null:r,a=e.onClick,o=e.height,u=void 0===o?32:o,l=e.disabled,c=(0,t.useContext)(Ag).UserService,f=s((0,t.useState)(Xe("default_profile_picture.png")),2),h=f[0],d=f[1];return(0,t.useEffect)((function(){null==i&&c.getUserSrcUrl(n).then(d)}),[n]),null!=i?(0,ze.jsx)("span",{className:"fromdown clickable "+(l?"opacity":""),children:(0,ze.jsx)("div",{onClick:l?void 0:a,className:"shadow bcolor-dark-gray text",style:{height:u+"px",width:u+"px",borderRadius:Math.floor(u/2)+"px"},children:(0,ze.jsxs)("span",{style:{position:"absolute",fontSize:"18px",top:"10px",left:"10px",fontWeight:"bold"},children:["+",i]})})}):(0,ze.jsx)("span",{className:"fromdown clickable "+(l?"opacity":""),children:(0,ze.jsx)("img",{alt:"user",onClick:l?void 0:a,className:"shadow",style:{height:u+"px",width:u+"px",borderRadius:Math.floor(u/2)+"px"},src:h})})},sk=function(e){var t=e.user_fullnames,n=e.more,r=void 0===n?0:n,i=e.userHeight,a=void 0===i?30:i,o=e.onUserClick,u=void 0===o?function(){}:o,s=e.userClassName,l=void 0===s?"":s,c=e.specialUserFullname,f=void 0===c?null:c,h=e.specialClassName,d=void 0===h?"":h,p=e.notSpecialClassName,v=void 0===p?"":p,m=function(){return null===f?"":f===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)?d:v};return(0,ze.jsxs)("div",{className:"home-user-conteiner",children:[r>0&&(0,ze.jsx)("div",{className:l+" "+m(),children:(0,ze.jsx)(uk,{count:r,height:a})}),t.map((function(e){return(0,ze.jsx)("div",{className:l+" "+m(e),children:(0,ze.jsx)(uk,{user_fullname:e,height:a,onClick:function(){return u(e)}})},e)}))]})},lk="rnshot",ck="uploadnow",fk="screenkatygodnia",hk="upload",dk="manageuploads",pk=70,vk={height:"70px",borderRadius:"15px"},mk=function(e){var n=e.onAboutWeekClick,r=(0,t.useContext)(Ag),i=r.user,a=r.host,o=r.week,u=r.HostService,l=r.PostService,f=r.EventService,h=r.AppService,d=(0,t.useContext)(ek),p=d.setBottomTab,v=d.isBottomTab,m=d.getObject,y=ge(),g=null!=a,k=(0,t.useMemo)((function(){if(!g)return h.getBuildInApps();var e=[].concat(c(a.popular_apps),c(i.personalized_apps),c(i.super_personalized_apps));return o&&null!=(null===o||void 0===o?void 0:o.extra_apps)&&(e=e.concat(o.extra_apps)),o&&null!=(null===o||void 0===o?void 0:o.blocked_apps)&&(e=e.filter((function(e){return!o.blocked_apps.includes(e)}))),e=e.map((function(e){return h.getApp(e)})),e.sort((function(e,t){return e.label-t.label})),e}),[g]),b=s((0,t.useState)(k),2),w=b[0],x=b[1],_=s((0,t.useState)(0),2),S=_[0],E=_[1],C=s((0,t.useState)([]),2),T=C[0],I=C[1],N=s((0,t.useState)(new Map),2),D=N[0],A=N[1],P=s((0,t.useState)(!1),2),R=P[0],j=P[1],O=(0,t.useMemo)((function(){var e;return null===(e=f.myDayEvents.filter((function(e){return e.isInteractive()&&e.isTime()})))||void 0===e?void 0:e.at(0)}),[f.myDayEvents]),L=(0,t.useMemo)((function(){return!lg.canInteract(O)}),[O]),M=s((0,t.useState)(null),2),U=M[0],F=M[1],z=l.myRecentlyAddedPosts.length>0?c(l.myRecentlyAddedPosts):null,V=s((0,t.useState)(!1),2),B=V[0],H=V[1],W=(0,t.useMemo)((function(){return f.getMyInteractiveEvent(lk)}),[f.getMyInteractiveEvent]),q=(0,t.useMemo)((function(){return f.getMyInteractiveEvent(ck)}),[f.getMyInteractiveEvent]),G=(0,t.useMemo)((function(){return f.getMyInteractiveEvent(fk)}),[f.getMyInteractiveEvent]),K=(0,t.useMemo)((function(){return f.getMyInteractiveEvent(hk)}),[f.getMyInteractiveEvent]),Q=(0,t.useMemo)((function(){return f.getMyInteractiveEvent(dk)}),[f.getMyInteractiveEvent]);(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(t,n,r){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:i=r.filter((function(e){return n.includes(e)})),r.includes(t.fullname)&&i.push(t.fullname),I(i),E(r.length);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();e(i,u.getMyFriends(),null===o||void 0===o?void 0:o.today_participants)}),[null===o||void 0===o?void 0:o.today_participants]),(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(t,n){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return");case 2:if(null!=(r=null===n||void 0===n?void 0:n.user)){e.next=5;break}return e.abrupt("return");case 5:if(r!==t){e.next=7;break}return e.abrupt("return");case 7:if(lg.canInteract(W,{date:null===n||void 0===n?void 0:n.date})){e.next=9;break}return e.abrupt("return");case 9:if(u.getMyFriends().includes(r)){e.next=11;break}return e.abrupt("return");case 11:l.getFriendLatestPost(r).then((function(e){e&&F({user_fullname:r,post_id:e.id,app:e.app})}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();W&&e(i.fullname,o.latest_post)}),[null===o||void 0===o?void 0:o.latest_post,W]);var Y=(0,t.useMemo)((function(){return z?z.map((function(e){return e.app})):U?[U.app]:[]}),[U,z]);(0,t.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=k;if(t&&e){t=c(t).sort((function(t,n){return 100*(e.get(n.name)||0-e.get(t.name)||0)+(t.label-n.label)}));var n=c(t);n=n.filter((function(e){return function(e,t){var n=e.find((function(e){return e.getGroup()===t.getGroup()}));return n===t}(t,e)}));var r=6-(n=n.slice(0,6)).length;t.every((function(e){return 0!==r&&(n.includes(e)||(n.push(e),r--),!0)})),n.sort((function(e,t){return e.label-t.label})),x(n)}}(D)}),[D]),(0,t.useEffect)((function(){o&&A(o.today_apps_counts)}),[null===o||void 0===o?void 0:o.today_apps_counts]);var $=function(){var e=We(Be().mark((function e(){var t,n,r=arguments;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],o||!i||!(!v()&&R||t)){e.next=7;break}return e.next=4,l.getMyAppsCounts();case 4:n=e.sent,A(n),0!==n.size&&(E(1),I([i.fullname]));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){$(!0)}),[]),(0,t.useEffect)((function(){$()}),[v()]);var X=(0,t.useMemo)((function(){return!G||!lg.canInteract(G,{week:o})}),[null===a||void 0===a?void 0:a.id,G]);(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(t){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G.isTime({week:t})){e.next=5;break}if(X){e.next=4;break}return e.next=4,Ze(2e3);case 4:H(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();o&&G&&e(o)}),[o,G]);var J=(0,t.useMemo)((function(){return R?k:w.slice(0,6)}),[R,w]),Z=(0,t.useMemo)((function(){return"home-blur-dark-pre "+(v()?"home-blur-dark":"")}),[v]),ee=(0,t.useMemo)((function(){var e,t;return(null===(e=m())||void 0===e?void 0:e.constructor)===_g?m().name:(null===(t=m())||void 0===t?void 0:t.constructor)===xt?m().fullname:m()?"other":null}),[m()]);return(0,ze.jsxs)("div",{className:"home "+(v()?"noclick":""),children:[(0,ze.jsx)("div",{className:Z,children:(0,ze.jsxs)("h1",{className:"home-title",children:[(0,ze.jsx)("span",{children:"WEEK"}),(0,ze.jsxs)(zg,{disabled:null==o||null==u.weekNumber,onClick:n,children:["#",u.weekNumber?u.weekNumber:0]})]})}),z&&(0,ze.jsx)("div",{className:Z+" home-button-effect",style:v()||R?{height:"0px",marginBottom:"0px",overflow:"hidden"}:{height:"70px"},children:(0,ze.jsx)(rk,{onClick:function(){if(i||!q){var e=z.map((function(e){return"/post/".concat(i.fullname,"/").concat(e.id,"/").concat(q)}));y(e[0],{state:{nextPages:e.slice(1),showMyRefPosts:!0,showFriendsRefPosts:!1}})}},style:vk,text:"UPLOAD NOW"})}),O&&(0,ze.jsx)("div",{className:Z+" home-button-effect",style:v()||R?{height:"0px",marginBottom:"0px",overflow:"hidden"}:{height:"70px"},children:(0,ze.jsx)(nk,{disabled:L,onClick:function(){var e;(e=O)&&y("/dayevent/".concat(e.toString()))},style:vk,text:O.name.toUpperCase()})}),B&&(!O||L)&&(0,ze.jsx)("div",{className:Z+" home-button-effect",style:v()||R?{height:"0px",marginBottom:"0px",overflow:"hidden"}:{height:"70px"},children:(0,ze.jsx)(ik,{disabled:X,onClick:function(){if(null!=a){var e=localStorage.getItem("screenka_count_"+a.id),t="Are you sure you want to see this content?";e&&0===Number(e)&&(t="You will see this content for the last time. Continue?"),t="You can see this content only once. Continue?",window.confirm(t)&&y("/screenka/"+a.id)}},style:vk})}),U&&(0,ze.jsx)("div",{className:Z+" home-button-effect",style:v()||R?{height:"0px",marginBottom:"0px",overflow:"hidden"}:{height:"70px"},children:(0,ze.jsx)(rk,{onClick:function(){y("/post/".concat(U.user_fullname,"/").concat(U.post_id,"/").concat(W),{state:{showMyRefPosts:!0,showFriendsRefPosts:!1}})},style:vk,text:"RIGHT NOW!"})}),(0,ze.jsx)("div",{className:Z,children:(0,ze.jsx)(ak,{disabled:!K||!K.isTime(),style:vk,onClick:function(){return j(!R)},isRotate:R})}),(0,ze.jsx)(ok,{apps:J,notificationCountsMap:D,disabled:!i.preferences.me,appHeight:pk,onAppClick:function(e){p(R?{id:1,object:e,app_type:function(e,t){return t?t.personalized_apps.includes(e.name)?pg:t.popular_apps.includes(e.name)?vg:t.group_apps.includes(e.name)?mg:yg:vg}(e,a)}:{id:0,object:e,total_uploads:D.get(e.name)?D.get(e.name):0})},appClassName:"home-blur-dark-pre",specialAppName:ee,notSpecialClassName:"home-blur-dark",orangeAppNames:Y,isUploadMode:R}),i.preferences.me&&!R&&(0,ze.jsx)(sk,{user_fullnames:T,more:S-T.length,userHeight:32,onUserClick:function(e){if(null==a)p({id:2,object:e,since_week:0});else{var t,n,r=ct(a.start_date,null===(t=a.subscribers.get(e))||void 0===t?void 0:t.join_date);p({id:2,object:e,since_week:r,role:null===(n=a.subscribers.get(e))||void 0===n?void 0:n.role})}},userClassName:"home-blur-dark-pre",specialUserFullname:ee,notSpecialClassName:"home-blur-dark"}),!R&&v()&&(0,ze.jsx)("div",{style:{height:"290px"}}),!R&&!v()&&(0,ze.jsx)("footer",{className:"center "+(i.preferences.me?"":" text-shine"),children:(0,ze.jsx)(qg,{nocolor:!0,onClick:function(){return p({id:4})},children:"SCREENKA \u24c7"})}),R&&Q&&(0,ze.jsx)("footer",{className:"center",children:(0,ze.jsx)(qg,{underline:!0,onClick:function(){return y("/uploads/manage")},children:"manage uploads"})})]})},yk=function(e){var t=e.children,n=e.style;return(0,ze.jsx)("div",{className:"scrolldiv-pre",children:(0,ze.jsx)("div",{className:"noscroll scrolldiv",style:n,children:t})})},gk=function(e){var n=e.children,r=e.disabled,i=e.onClick,a=void 0===i?void 0:i,o=e.orange,u=void 0!==o&&o,l=e.style,c=s((0,t.useState)(!1),2),f=c[0],h=c[1];return(0,ze.jsx)("span",{className:"noselect circle"+(r?" bcolor-dark-gray-solid":" color-black clickable"+(u?" bcolor-orange":" bcolor-green-solid"))+(f?" opacity":""),onClick:r?void 0:a||function(){return h(!f)},style:l,children:n})},kk=function(e){var n,r,i,a,o=e.onClose,u=(0,t.useContext)(ek),l=u.setBottomTab,c=u.isBottomTab,f=(0,t.useContext)(Ag),h=f.week,d=f.HostService,p=f.EventService,v=(0,t.useMemo)((function(){return Object.entries(et).map((function(e){var t=s(e,2),n=t[0],r=t[1];return{day_name:n,events:p.myDayEvents.filter((function(e){return e.weekDay===r})).filter((function(e){return e.isInformative()})),disabled_events:p.disabledDayEvents.filter((function(e){return e.weekDay===r})).filter((function(e){return e.isInformative()}))}}))}),[null===(n=p.myDayEvents)||void 0===n?void 0:n.length,null===(r=p.disabledDayEvents)||void 0===r?void 0:r.length]),m=(0,t.useMemo)((function(){return p.myDayEvents.filter((function(e){return null===e.weekDay})).filter((function(e){return e.isInformative()}))}),[null===(i=p.myDayEvents)||void 0===i?void 0:i.length]),y=(0,t.useMemo)((function(){return p.disabledDayEvents.filter((function(e){return null===e.weekDay})).filter((function(e){return e.isInformative()}))}),[null===(a=p.disabledDayEvents)||void 0===a?void 0:a.length]),g=(0,t.useMemo)((function(){return p.myCustomEvents.filter((function(e){return e.isInformative()}))}),[p.myCustomEvents]),k=s((0,t.useState)(!0),2),b=k[0],w=k[1],x=function(e){if(b||!h)return e.charAt(0);var t=at(h.start_date);return t.setDate(t.getDate()+et[e]),t.getDate()},_=(0,t.useMemo)((function(){if(!h)return"";var e=at(h.start_date),t=rt[e.getMonth()].toUpperCase()+" "+e.getFullYear();return(0,ze.jsxs)("footer",{children:[t,(0,ze.jsx)("br",{}),"TOTAL UPLOADS: ",h.total_uploads]})}),[null===h||void 0===h?void 0:h.total_uploads]);return(0,ze.jsxs)("div",{className:"aweek "+(c()?"noclick aweek-blur-dark":""),children:[(0,ze.jsx)(yk,{children:(0,ze.jsxs)("h1",{children:[(0,ze.jsx)(Vg,{onClick:o,children:"#"+(d.weekNumber?d.weekNumber:0)}),(0,ze.jsx)("span",{className:"color-blue-highlight",children:h?h.name.toUpperCase():"WEEK"}),h&&(0,ze.jsx)("span",{role:"img","aria-label":"emoji",children:h.emoji})]})}),(0,ze.jsx)("div",{className:"description initial-letter",children:h?h.description:""}),(0,ze.jsxs)("div",{className:"aweek-calendar",children:[(0,ze.jsxs)("div",{className:"aweek-rows",children:[v.map((function(e){var t=e.day_name,n=e.events,r=e.disabled_events;return(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{children:[n.map((function(e,i){return(0,ze.jsxs)(qg,{active:!e.isAfterTime(),onClick:it(et[t])?function(){return l({id:3,object:e})}:void 0,children:[0!==i&&", ",e.name.toUpperCase(),n.length>0&&r.length>0&&", "]},i)})),r.map((function(e,t){return(0,ze.jsxs)(qg,{disabled:!0,children:[0!==t&&", ",e.name.toUpperCase()]},t)}))]}),(0,ze.jsx)(gk,{disabled:!it(et[t]),onClick:h&&it(et[t])?function(){return w(!b)}:void 0,children:x(t)})]},t)})),(0,ze.jsxs)("div",{children:[(0,ze.jsx)("div",{}),(0,ze.jsx)(gk,{style:{opacity:"0"},disabled:!0})]}),(m.length>0||y.length>0)&&(0,ze.jsxs)("div",{style:{maxWidth:"100%"},children:[m.map((function(e,t){return(0,ze.jsxs)(qg,{active:!e.isAfterTime(),onClick:function(){return l({id:3,object:e})},children:[0!==t&&", ",e.name.toUpperCase(),m.length>0&&y.length>0&&", "]},t)})),y.map((function(e,t){return(0,ze.jsxs)(qg,{disabled:!0,children:[0!==t&&", ",e.name.toUpperCase()]},t)})),(0,ze.jsx)(gk,{})]}),g.length>0&&(0,ze.jsxs)("div",{children:[g.map((function(e,t){return(0,ze.jsxs)(qg,{orange:!0,onClick:function(){return l({id:3,object:e})},children:[0!==t&&", ",e.name.toUpperCase()]},t)})),(0,ze.jsx)(gk,{orange:!0})]})]}),(0,ze.jsx)("div",{className:"bcolor-dark-gray-solid"})]}),_]})},bk=function(){var e=ge(),n=(0,t.useContext)(Ag).user,r=s((0,t.useState)(!1),2),i=r[0],a=r[1],o=s((0,t.useState)(!1),2),u=o[0],l=o[1];return(0,t.useEffect)((function(){var e=setTimeout((function(){l(i)}),200);return function(){return clearTimeout(e)}}),[i]),(0,t.useEffect)((function(){null!=n||e("/login",{replace:!0})}),[n]),(0,ze.jsx)("div",{className:"start",children:(0,ze.jsx)(tk,{children:(0,ze.jsxs)("div",{className:"start-pages",style:u&&i?{transform:"translateX(-50%)"}:{},children:[(0,ze.jsx)("div",{children:n&&(0,ze.jsx)(mk,{onAboutWeekClick:function(){return a(!0)}})}),(0,ze.jsx)("div",{children:(i||u)&&(0,ze.jsx)(kk,{onClose:function(){return a(!1)}})})]})})})},wk=function(e){var t=e.goback,n=void 0!==t&&t,r=ge();return(0,ze.jsx)("div",{children:(0,ze.jsxs)("div",{className:"centered",style:{textAlign:"center",lineHeight:"0"},children:[(0,ze.jsx)("div",{className:"opacity",children:"Nothing to show."}),(0,ze.jsx)("br",{}),n&&(0,ze.jsx)(qg,{onClick:function(){return r(-1)},children:"go back"})]})})},xk=function(e){var n=e.post,r=void 0===n?null:n,i=e.id,a=e.user_fullname,o=e.onLoad,u=e.hideNickname,l=void 0!==u&&u,c=e.trySetView,f=e.content_only,h=e.content_toggled,d=(0,t.useContext)(Ag),p=d.PostService,v=d.UserService,m=d.AppService,y=s((0,t.useState)(r),2),g=y[0],k=y[1];(0,t.useEffect)((function(){r||(k(null),(c?p.getPostAndTrySetMyView:p.getPost)(a,i).then((function(e){return o&&o(e),e})).then(k))}),[r,a,i]);var b=s((0,t.useState)(null),2),w=b[0],x=b[1];(0,t.useEffect)((function(){l||v.getUserUsername(a).then(x)}),[l,a]);var _=f||h,S=s((0,t.useState)(!1),2),E=S[0],C=S[1];(0,t.useEffect)((function(){if(g&&!E&&!_){var e=setTimeout((function(){var e;null!==(e=p.hideIfAppsState)&&void 0!==e&&e.includes(g.app)&&C(!0)}),500);return function(){return clearTimeout(e)}}}),[null===g||void 0===g?void 0:g.app]);var T=s((0,t.useState)(!_),2),I=T[0],N=T[1];(0,t.useEffect)((function(){_||N(!0)}),[r,i,a]);var D=s((0,t.useState)(""),2),A=D[0],P=D[1];(0,t.useEffect)((function(){var e=function(){var e=We(Be().mark((function e(t){var n,r,i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:n=m.getApp(t.app),r=t.content,e.t0=null===n||void 0===n?void 0:n.format,e.next=e.t0===bg?6:e.t0===kg?7:e.t0===wg?8:e.t0===xg?11:15;break;case 6:return e.abrupt("return",(0,ze.jsx)("h4",{children:r}));case 7:case 10:return e.abrupt("return",(0,ze.jsx)("h3",{children:r}));case 8:if(null===r||void 0===r||!r.startsWith("https://")){e.next=10;break}return e.abrupt("return",(0,ze.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:"OPEN LINK"}));case 11:return e.next=13,p.getPathPostContentUrl(a,r);case 13:return i=e.sent,e.abrupt("return",(0,ze.jsx)("img",{alt:"post content",src:i}));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();I||E||e(g).then(P)}),[I,E,g]);var R=s((0,t.useState)(f||h),2),j=R[0],O=R[1];return(0,ze.jsxs)("div",{className:"pre-pre-post",children:[!l&&(0,ze.jsxs)("div",{className:"nickname",children:[(0,ze.jsx)(uk,{user_fullname:a}),(0,ze.jsx)("h4",{className:"color-gray",children:w||"_______"})]}),(0,ze.jsxs)("div",{className:"bcolor-dark-gray post",children:[j&&(0,ze.jsxs)("div",{className:"pre-fullcontent",children:[!f&&(0,ze.jsx)(Ug,{style:{position:"absolute",top:"10px",right:"10px"},onClick:function(){O(!j)}}),(0,ze.jsx)("div",{className:"fullcontent",children:(0,ze.jsx)("div",{className:"scroll",children:null!==A?A:(0,ze.jsx)(wk,{})})})]}),!f&&(0,ze.jsxs)("div",{style:j?{opacity:0,pointerEvents:"none"}:{},children:[(0,ze.jsxs)("h3",{className:"date",children:[null!==g&&void 0!==g&&g.week_name?g.week_name.toUpperCase()+" | ":"",function(){if(!g)return"------- --:--";var e=g.upload_date;return"".concat(nt(e).toUpperCase()," ").concat(lt(e))}()]}),(0,ze.jsxs)("div",{className:"head",children:[(0,ze.jsx)(Lg,{application:m.getApp(null===g||void 0===g?void 0:g.app),notificationText:null!==g&&void 0!==g&&g.top_number?"#"+g.top_number:null!==g&&void 0!==g&&g.is_highlighted?"*":null}),E&&(0,ze.jsx)(qg,{bold:!0,onClick:function(){E&&C(!1)},children:"tap"})]}),(0,ze.jsxs)("div",{className:"pre-body",style:E?{height:"0px"}:{},children:[(0,ze.jsxs)("div",{className:"body",style:I?{opacity:"0",pointerEvents:"none"}:{},children:[(0,ze.jsx)("div",{className:"bcolor content flex-center noselect clickable",onClick:f?void 0:function(){O(!j)},children:null!==A?A:(0,ze.jsx)(wk,{})}),(0,ze.jsxs)("h4",{children:[null===g||void 0===g?void 0:g.context,null!==g&&void 0!==g&&g.week_tag&&g.week_name?" #".concat(g.week_name.replace(" ","")):""]})]}),I&&(0,ze.jsx)(qg,{bold:!0,className:"centered",onClick:function(){I&&N(!1)},children:"tap"})]})]})]})]})},_k=function(e){var n=e.host_id,r=e.week_name,i=(0,t.useContext)(Ag),a=i.WeekService,o=i.AppService,u=s((0,t.useState)(new Map),2),l=u[0],c=u[1];(0,t.useEffect)((function(){r&&n&&a.getWeekAppsCounts(n,r).then((function(e){return c(e)}))}),[r,n]);var f=(0,t.useMemo)((function(){for(var e=Array.from(l).sort((function(e,t){return t[1]-e[1]})).slice(0,6).map((function(e){var t=s(e,1)[0];return o.getApp(t)}));6>e.length;)e.push(_g.Default);return e}),[l]);return(0,ze.jsx)("div",{style:{padding:"10px"},children:(0,ze.jsx)(ok,{apps:f,notificationCountsMap:l})})},Sk=function(e){var n=e.onLoad;return(0,t.useEffect)((function(){var e=setTimeout((function(){return n("First Week")}),1e3);return function(){return clearTimeout(e)}}),[]),(0,ze.jsxs)("div",{className:"Screenka",children:[(0,ze.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,ze.jsxs)("h1",{style:{opacity:"0.2"},children:["Screenka",(0,ze.jsx)("br",{}),"Tygodnia"]}),(0,ze.jsxs)("h1",{children:["Screenka",(0,ze.jsx)("br",{}),"Tygodnia"]}),(0,ze.jsxs)("h1",{style:{opacity:"0.2"},children:["Screenka",(0,ze.jsx)("br",{}),"Tygodnia"]})]}),(0,ze.jsxs)("h5",{style:{textAlign:"center",opacity:"0.6"},children:["#1 GLASSY WEEK",(0,ze.jsx)("br",{}),"APRIL 2023"]}),(0,ze.jsx)("br",{}),"      ",(0,ze.jsx)("br",{}),(0,ze.jsx)("h3",{children:"Witamy! Nastepny tydzien za nami, a co za tym idzie kolejne wydanie Screenki! Kazdy w okularach? Nie sadzilismy ze u wszystkich tak zle ze wzrokiem..."}),(0,ze.jsx)("h2",{children:"Oto nasze wyniki:"}),(0,ze.jsx)("br",{}),(0,ze.jsx)("br",{}),(0,ze.jsx)("br",{}),(0,ze.jsx)("h2",{children:"Poniedzia\u0142ek"}),(0,ze.jsx)("h4",{children:"A wszystko zacz\u0119lo sie od..."}),(0,ze.jsx)("footer",{style:{marginTop:"50px"},children:"Screenka Tygodnia \u2122"})]})},Ek=function(){return(0,ze.jsxs)("div",{className:"Screenka",children:[(0,ze.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,ze.jsxs)("h1",{style:{opacity:"0.2",marginRight:"3px"},children:["Screenka",(0,ze.jsx)("br",{}),"Tygodnia"]}),(0,ze.jsxs)("h1",{children:["Screenka",(0,ze.jsx)("br",{}),"Tygodnia"]}),(0,ze.jsxs)("h1",{style:{opacity:"0.2",marginLeft:"3px"},children:["Screenka",(0,ze.jsx)("br",{}),"Tygodnia"]})]}),(0,ze.jsxs)("h5",{style:{textAlign:"center",opacity:"0.6"},children:["#1 GLASSY WEEK",(0,ze.jsx)("br",{}),"APRIL 2023"]}),(0,ze.jsx)("br",{}),"      ",(0,ze.jsx)("br",{}),(0,ze.jsx)("h3",{children:"Witamy! Nastepny tydzien za nami, a co za tym idzie kolejne wydanie Screenki! Kazdy w okularach? Nie sadzilismy ze u wszystkich tak zle ze wzrokiem..."}),(0,ze.jsx)("br",{}),(0,ze.jsx)("h2",{children:"Oto nasze wyniki:"}),(0,ze.jsx)(_k,{host_id:"-1",week_name:"Glassy Week"}),(0,ze.jsx)("br",{}),(0,ze.jsx)("br",{}),(0,ze.jsx)("h2",{children:"Poniedzia\u0142ek"}),(0,ze.jsx)("h4",{children:"A wszystko zacz\u0119lo sie od..."}),(0,ze.jsx)(xk,{id:"dsnanaaiaocsn",user_fullname:Et}),(0,ze.jsx)("h4",{children:"To co dzis przygotowalismy jest genialne! SmiSAMdiasmd isamdsa iasmd isadasnd ldsanf mdsafsadvinafdsg agf lorem"}),(0,ze.jsx)(xk,{id:"123123",user_fullname:"Tola Bajka"}),(0,ze.jsx)("footer",{style:{marginTop:"50px"},children:"Screenka Tygodnia \u2122"})]})},Ck=function(){var e=ke().host_id,n=ge(),r=(0,t.useContext)(Ag),i=r.user,a=r.week,o=r.WeekService,u=r.PostService,s=r.HostService,l=r.EventService,c=function(){var t=We(Be().mark((function t(r){var c,f;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r===(null===a||void 0===a?void 0:a.name)){t.next=3;break}return n("/"),t.abrupt("return");case 3:if(f=l.getMyInteractiveEvent("screenkatygodnia"),lg.canInteract(f,{week:a})){t.next=7;break}return n("/"),t.abrupt("return");case 7:if(i&&null!==(c=i.hosts)&&void 0!==c&&c.includes(e)){t.next=10;break}return n("/"),t.abrupt("return");case 10:return s.getHostPersonalizedApps(e).then((function(e){u.setHideIfAppsState(i,e)})),t.abrupt("return",setTimeout((function(){lg.setInteraction(f)&&o.trySetMyScreenkaView(e,r).then((function(e){return console.log(e?"Screenka View has been set":"Screenka View hasnt been set")}))}),3e3));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,ze.jsx)("div",{className:"noselect",children:function(){switch(e){case"-1":return(0,ze.jsx)(Ek,{});case"0":return(0,ze.jsx)(Sk,{onLoad:c});default:return(0,ze.jsx)(wk,{})}}()})},Tk="rnshot",Ik="oneshot",Nk="morningshot",Dk="uploadnow",Ak=function(){var e,n,r,i=me(),a=null===(e=i.state)||void 0===e?void 0:e.nextPages,o=null===(n=i.state)||void 0===n?void 0:n.tokenizePage,u=null===(r=i.state)||void 0===r?void 0:r.token,s=ge(),l=ke(),c=l.user_fullname,f=l.id,h=l.event,d=(0,t.useContext)(Ag),p=d.EventService,v=d.PostService,m=(0,t.useMemo)((function(){return p.getMyInteractiveEvent(h)}),[h]);(0,t.useEffect)((function(){c&&f||s("/")}),[c,f]);var y=(0,t.useMemo)((function(){return m?m.name.toUpperCase():"User Post:"}),[m]);return(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("h2",{children:[(0,ze.jsx)(Vg,{alert:(null===a||void 0===a?void 0:a.length)>0,onClick:o?function(){return s(o,{replace:!0,state:{token:!0}})}:void 0}),y,(null===a||void 0===a?void 0:a.length)>0&&(0,ze.jsx)(zg,{focus:!0,onClick:function(){s(a[0],{replace:!0,state:{token:!0,nextPages:a.slice(1)}})}})]}),(0,ze.jsx)(xk,{id:f,user_fullname:c,trySetView:null!==m&&(null===m||void 0===m?void 0:m.toString())!==Dk,onLoad:function(e){if(h){var t={};if((null===m||void 0===m?void 0:m.toString())===Tk&&(t.date=e.upload_date),u||lg.canInteract(m,t)){if(!u)switch(null===m||void 0===m?void 0:m.toString()){case Tk:case Nk:case Ik:lg.setInteraction(m);break;case Dk:lg.setInteraction(m),v.resetMyRecentlyAddedPosts();break;default:return void s("/")}}else s("/")}}})]})},Pk=function(e){var n,r=e.post,i=e.crossed_eye_only,a=void 0!==i&&i,o=e.no_eyes,u=void 0!==o&&o,l=e.hourDate,c=void 0!==l&&l,f=e.pretty_date,h=void 0!==f&&f,d=e.checkboxDisabled,p=e.uncheckedCheckboxDisabled,v=e.defaultChecked,m=void 0===v?null:v,y=e.onCheckboxChange,g=void 0===y?function(){}:y,k=e.onCheckboxChangeDelay,b=void 0===k?function(){}:k,w=(e.edit,e.onEdit,e.delete_),x=void 0!==w&&w,_=e.onDelete,S=void 0===_?function(){}:_,E=e.preview,C=void 0!==E&&E,T=e.onPreview,I=void 0===T?function(){}:T,N=(0,t.useContext)(Ag).AppService,D=function(){return null!==m?m:r.permissions.screenka},A=s((0,t.useState)(),2),P=A[0],R=A[1],j=P?P.target.checked:D(),O=(0,t.useRef)(D()),L=(0,t.useRef)(null);return(0,t.useEffect)((function(){null!==L.current&&clearTimeout(L.current),O.current!==j&&(L.current=setTimeout((function(){O.current=j,b(P)}),3e3))}),[j]),(0,ze.jsxs)("div",{className:"mini-post-pre",children:[(0,ze.jsx)(Mg,{name:r.id,disabled:d||!j&&p,checked:j,onChange:function(e){e.target.id=r.id,g(e),R(e)}}),(0,ze.jsxs)("div",{className:"mini-post",children:[(0,ze.jsx)(Lg,{application:N.getApp(r.app),height:50}),(0,ze.jsxs)("div",{className:"text",children:[(0,ze.jsx)("span",{children:(0,ze.jsx)("b",{children:r.app})}),r.context&&(0,ze.jsx)(yk,{children:(0,ze.jsx)("span",{children:r.context})})]}),(0,ze.jsxs)("div",{className:"infos abs",children:[C&&(0,ze.jsx)("div",{children:(0,ze.jsx)(qg,{onClick:function(){return I(r.id)},children:"Link"})}),x&&(0,ze.jsx)("div",{children:(0,ze.jsx)(qg,{red:!0,onClick:function(){return S(r.id)},children:"Delete"})}),!u&&(null==r.view||!a)&&(0,ze.jsx)("img",{alt:"view",style:{height:"16px",filter:"invert(0.6)"},src:Xe(null!=r.view?"view16.png":"no_view16.png")}),(0,ze.jsx)("div",{className:h&&c&&ft(r.upload_date,15)?"color-orange":void 0,children:!0===c?lt(r.upload_date,h):null===(n=nt(r.upload_date))||void 0===n?void 0:n.slice(0,3).toUpperCase()})]})]})]})},Rk=function(e){var n=e.posts,r=e.title,i=e.checkboxesDisabled,a=void 0!==i&&i,o=e.maxChecks,u=void 0===o?null:o,l=e.customCheckboxes,c=void 0!==l&&l,f=e.onPostCheckboxChange,h=void 0===f?function(){}:f,d=e.onPostCheckboxChangeDelay,p=void 0===d?function(){}:d,v=e.hourDate,m=e.pretty_date,y=void 0!==m&&m,g=e.preview,k=void 0!==g&&g,b=e.onPostPreview,w=e.edit,x=void 0!==w&&w,_=e.onPostEdit,S=e.delete_,E=void 0!==S&&S,C=e.onPostDelete,T=e.hideFooter,I=void 0!==T&&T,N=e.hideTickets,D=void 0!==N&&N,A=e.crossed_eye_only,P=void 0!==A&&A,R=e.no_crossed_eye_funny_info,j=void 0!==R&&R,O=e.no_eyes,L=void 0!==O&&O,M=s((0,t.useState)(0),2),U=M[0],F=M[1];(0,t.useEffect)((function(){F(!n||c?0:n.filter((function(e){return!0===e.permissions.screenka})).length)}),[null===n||void 0===n?void 0:n.length]);var z=function(e){e.target.checked?F(U+1):F(U-1),h(e)};return null===n?(0,ze.jsx)(kt,{}):0===n.length?(0,ze.jsx)(wk,{}):(0,ze.jsxs)("div",{className:"miniposts",children:[(0,ze.jsxs)("div",{className:"miniposts-legend",children:[r&&(0,ze.jsx)("h4",{style:{position:"absolute",marginTop:"0px",top:0,left:"50%",transform:"translate(-50%,0)"},children:r}),!c&&!D&&(0,ze.jsxs)("div",{className:"bar "+(a?"opacity":""),children:[(0,ze.jsx)("span",{style:{fontSize:"30px"},role:"img","aria-label":"ticket",children:"\ud83c\udf9f\ufe0f"}),(0,ze.jsx)("h5",{children:u?"".concat(U,"/").concat(u," used"):"".concat(U," used")})]}),c&&!D&&(0,ze.jsxs)("div",{className:"bar "+(a?"opacity":""),children:[(0,ze.jsxs)("h4",{children:["Choose up to ",u||0,":"]}),(0,ze.jsxs)("h5",{children:[U," checked"]})]})]}),null===n&&(0,ze.jsx)(kt,{}),0===(null===n||void 0===n?void 0:n.length)&&(0,ze.jsx)(wk,{}),(null===n||void 0===n?void 0:n.length)>0&&(0,ze.jsxs)("div",{className:"miniposts-list noscroll",children:[null===n||void 0===n?void 0:n.map((function(e,t){return(0,ze.jsx)(Pk,{post:e,hourDate:v,no_eyes:L,crossed_eye_only:P,uncheckedCheckboxDisabled:U>=u,checkboxDisabled:a||!u,defaultChecked:!c&&null,onCheckboxChange:z,onCheckboxChangeDelay:p,edit:x,delete_:E,preview:k,onEdit:function(){return _(e.id)},onDelete:function(){return C(e.id)},onPreview:function(){return b(e.id)},pretty_date:y},e.id)})),!c&&!I&&!D&&(P||!j)&&(0,ze.jsxs)("footer",{className:"center"+(a?" opacity":""),children:["Uploads with tickets will apply for",(0,ze.jsx)("br",{}),"Screenka Tygodnia \u2122"]}),!I&&!P&&j&&(0,ze.jsxs)("footer",{className:"center",children:["Kto zobaczy\u0142, ten zobaczy\u0142.",(0,ze.jsx)("br",{}),"Teraz p\xf3jdzie w niepami\u0119\u0107. ",(0,ze.jsx)("span",{role:"img","aria-label":"ghost",children:"\ud83d\udc7b"})]})]})]})},jk="dayuploads",Ok="weekuploads",Lk="manageuploads",Mk=function(){var e,n=ge(),r=(0,t.useContext)(Ag),i=r.user,a=r.PostService,o=r.screenkaDisabled,u=r.EventService,l=ke().type,f=me(),h=null===(e=f.state)||void 0===e?void 0:e.token,d=s((0,t.useState)(null),2),p=d[0],v=d[1];(0,t.useEffect)((function(){var e=u.getMyInteractiveEvent("week"===l?Ok:"day"===l?jk:"manage"===l?Lk:null);h||lg.canInteract(e)?function(e){switch(e.toString()){case Lk:return a.getMyDayUploads().then((function(e){var t=c(e);return t.reverse(),t}));case jk:return a.getMyDayUploads();case Ok:return a.getMyWeekUploads();default:return Promise.reject()}}(e).then((function(t){v(t),(null===t||void 0===t?void 0:t.length)>0&&!h&&lg.setInteraction(e)})).catch((function(){return n("/")})):n("/")}),[]);return(0,ze.jsxs)("div",{children:["manage"===l&&(0,ze.jsxs)("h2",{children:[" ",(0,ze.jsx)(Vg,{}),"Manage Uploads:"]}),"day"===l&&(0,ze.jsxs)("h2",{children:[" ",(0,ze.jsx)(Vg,{}),"Your Day Uploads:"]}),"week"===l&&(0,ze.jsxs)("h2",{children:[" ",(0,ze.jsx)(Vg,{})," Your Week Uploads:"]}),(0,ze.jsx)(Rk,{posts:p,checkboxesDisabled:!i.preferences.screenka||o||"manage"!==l,maxChecks:"manage"===l?a.getMaxTickets():null,onPostCheckboxChangeDelay:function(e){a.changeMyPostPermissions(e.target.id,{screenka:e.target.checked})},hourDate:"day"===l||"manage"===l,pretty_date:"manage"===l,preview:"day"===l||"week"===l,onPostPreview:function(e){n("/post/".concat(i.fullname,"/").concat(e),{state:{tokenizePage:f.pathname,showMyRefPosts:"manage"!==l,showFriendsRefPosts:"week"===l}})},delete_:"manage"===l,onPostDelete:function(e){p.find((function(t){return t.id===e}))&&window.confirm("Are you sure you want to delete this upload?")&&Promise.all([a.changeMyPostPermissions(e,{me:!1,friends:!1,screenka:!1}),Ze(100)]).then((function(){return v(p.filter((function(t){return t.id!==e})))}))},hideTickets:!i.preferences.screenka,crossed_eye_only:"manage"===l,no_crossed_eye_funny_info:"week"===l,no_eyes:"day"===l})]})},Uk=function(e){var n=e.children,r=e.onDemo,i=me(),a=ge(),o=(0,t.useRef)(i.pathname.startsWith("/demo"));return(0,t.useEffect)((function(){if(o.current){r();var e=setTimeout((function(){localStorage.setItem("funnyname",Ct)}),500);return function(){return clearTimeout(e)}}}),[]),(0,t.useEffect)((function(){o.current&&!i.pathname.startsWith("/demo")&&a("/demo".concat(i.pathname),{replace:!0,state:i.state})}),[a,i.pathname]),o.current?(0,ze.jsxs)(Pg,{demo:!0,children:[n,(0,ze.jsx)("h2",{className:"noselect",style:{position:"fixed",left:"10px",top:"13px",margin:0,opacity:"0.3",zIndex:-10},children:"DEMO"})]}):(0,ze.jsx)(Pg,{children:n})},Fk="dayuploads",zk="weekuploads",Vk=function(){var e=ke(),n=e.user_fullname,r=e.host_id,i=e.event,a=ge(),o=me(),u=(0,t.useContext)(Ag),l=u.AM_I_HOST,c=u.PostService,f=s((0,t.useState)(null),2),h=f[0],d=f[1];(0,t.useEffect)((function(){if(l||n)switch(i.toString()){case Fk:c.getUserCurrentDayPostsHOST(n,r).then((function(e){return null==e?a("/"):d(e)}));break;case zk:c.getUserCurrentWeekPostsHOST(n,r).then((function(e){return null==e?a("/"):d(e)}));break;default:a("/")}else a("/")}),[]);return(0,ze.jsxs)("div",{children:[i.toString()===Fk&&(0,ze.jsxs)("h2",{children:[" ",(0,ze.jsx)(Vg,{}),"User Day Uploads:"]}),i.toString()===zk&&(0,ze.jsxs)("h2",{children:[" ",(0,ze.jsx)(Vg,{}),"User Week Uploads:"]}),(0,ze.jsx)(Rk,{posts:h,title:n,checkboxesDisabled:!0,preview:!0,onPostPreview:function(e){a("/post/".concat(n,"/").concat(e),{state:{tokenizePage:o.pathname,showMyRefPosts:!0,showFriendsRefPosts:!0}})},hideFooter:!0})]})},Bk="dayuploads",Hk="weekuploads",Wk="weekuploads2",qk="oneshot",Gk="morningshot",Kk="ohpreview",Qk="throwback",Yk=function(){var e=ke().event,n=ge(),r=(0,t.useContext)(Ag),i=r.user,a=r.HostService,o=r.PostService,u=r.WeekService,l=r.EventService,c=s((0,t.useState)(!1),2),f=c[0],h=c[1];(0,t.useEffect)((function(){var t=l.getMyInteractiveEvent(e);if(lg.canInteract(t)){var r=setTimeout(We(Be().mark((function e(){var r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:null==(r=e.sent)?h(!0):(r.options=Ke({replace:!0},r.options),n(r.to,r.options));case 4:case"end":return e.stop()}}),e)}))),1e3);return function(){return clearTimeout(r)}}n("/")}),[]);var d=function(){var e=We(Be().mark((function e(t){var n,r,l,c;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=We(Be().mark((function e(){var t,n,r,i,u,l,c,f,h;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.getMyFriendsWithHostId(),n=s(t,1),r=n[0],i=r.sort((function(){return.5-Math.random()})),u=[],l=S(i),e.prev=4,l.s();case 6:if((c=l.n()).done){e.next=16;break}return f=c.value,e.next=10,o.getFriendCurrentDayRandomPost(f);case 10:if((h=e.sent)&&u.push("/post/".concat(f,"/").concat(h.id,"/").concat(qk)),!(u.length>=3)){e.next=14;break}return e.abrupt("break",16);case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),l.e(e.t0);case 21:return e.prev=21,l.f(),e.finish(21);case 24:if(0!==u.length){e.next=26;break}return e.abrupt("return",null);case 26:return e.abrupt("return",{to:u[0],options:{state:{nextPages:u.slice(1),showMyRefPosts:!0}}});case 27:case"end":return e.stop()}}),e,null,[[4,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=We(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getMyYesterdayRandomPost();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{to:"/post/".concat(i.fullname,"/").concat(t.id,"/").concat(Gk),options:{state:{showMyRefPosts:!0,showFriendsRefPosts:!0}}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=We(Be().mark((function e(){var t,n,r,i,o,l;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getMyFriendsWithHostId(),n=s(t,2),r=n[0],i=n[1],o=pt(r),e.next=4,u.getMyHostLastWeekName();case 4:return l=e.sent,e.abrupt("return",{to:"/posts/".concat(o,"/").concat(i,"/").concat(l,"/").concat(Kk)});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=We(Be().mark((function e(){var t,n;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getMyHostId(),e.next=3,u.getMyHostLastWeekName();case 3:return n=e.sent,e.abrupt("return",{to:"/posts/".concat(i.fullname,"/").concat(t,"/").concat(n,"/").concat(Qk)});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=t.toString(),e.next=e.t0===Bk?7:e.t0===Hk?8:e.t0===Wk?9:e.t0===qk?10:e.t0===Gk?11:e.t0===Kk?12:e.t0===Qk?13:14;break;case 7:return e.abrupt("return",{to:"/uploads/day"});case 8:case 9:return e.abrupt("return",{to:"/uploads/week"});case 10:return e.abrupt("return",n());case 11:return e.abrupt("return",r());case 12:return e.abrupt("return",l());case 13:return e.abrupt("return",c());case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return f?(0,ze.jsx)(wk,{goback:!0}):(0,ze.jsx)("div",{})},$k="throwback",Xk="ohpreview",Jk=function(){var e,n,r=ke(),i=r.user_fullname,a=r.host_id,o=r.week_name,u=r.event,l=ge(),c=(0,t.useContext)(Ag),f=c.EventService,h=c.PostService,d=null===(e=me().state)||void 0===e?void 0:e.token,p=(0,t.useMemo)((function(){return f.getMyInteractiveEvent(u)}),[u]),v=s((0,t.useState)(null),2),m=v[0],y=v[1],g=(0,t.useRef)(new Map),k=s((0,t.useState)(0),2),b=k[0],w=k[1];(0,t.useEffect)((function(){if(i&&a&&o)if(d||lg.canInteract(p))switch(p.toString()){case $k:h.getMyPastWeekPosts(o).then((function(e){return null==e?l("/"):y(e)}));break;case Xk:h.getFriendPastWeekPosts(i,o).then((function(e){return null==e?l("/"):y(e)}));break;default:return void l("/")}else l("/");else l("/")}),[]);var x=null!==m;(0,t.useEffect)((function(){x&&m.length>0&&!d&&lg.setInteraction(p)}),[x]);return(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("h2",{children:[" ",(0,ze.jsx)(Vg,{}),null===(n=p.name)||void 0===n?void 0:n.toUpperCase(),(0,ze.jsx)(zg,{focus:!0,disabled:0===b,onClick:function(){var e=Array.from(g.current.keys()).map((function(e){return"/post/".concat(i,"/").concat(e,"/").concat(p)}));return l(e[0],{replace:!0,state:{token:!0,nextPages:e.slice(1),showMyRefPosts:!0,showFriendsRefPosts:!0}})}})]}),(0,ze.jsx)(Rk,{posts:m,title:"".concat(o),no_eyes:!0,maxChecks:3,customCheckboxes:!0,onPostCheckboxChange:function(e){g.current.has(e.target.name)?g.current.delete(e.target.name):g.current.set(e.target.name,e.target.checked),w(g.current.size)}})]})},Zk=function(){var e=ge(),n=(0,t.useContext)(Ag).user;return(0,t.useEffect)((function(){n&&e("/")}),[]),(0,ze.jsxs)("div",{className:"flex-center",style:{alignItems:"center",textAlign:"center"},children:[(0,ze.jsx)("img",{className:"noselect opacity",alt:"add to home screen",src:Xe("add_to_home_screen.png"),style:{objectFit:"cover",height:"100px",width:"100px",marginBottom:"30px"}}),(0,ze.jsxs)("div",{children:[(0,ze.jsx)("h4",{children:"1. Add to Home Screen"}),(0,ze.jsxs)("h4",{children:["2. ",(0,ze.jsx)(qg,{onClick:function(){return e("/login")},children:"Login"})]})]})]})},eb=function(){return(0,ze.jsx)("div",{})},tb=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=function(e){return n?"/demo".concat(e):e};return(0,ze.jsx)("div",{className:"app-flex-center-v",children:(0,ze.jsx)("div",{className:"app-max-mobile",children:(0,ze.jsx)(Me,{basename:"/",children:(0,ze.jsx)(Uk,{onDemo:function(){return r(!0)},children:(0,ze.jsxs)(je,{children:[(0,ze.jsx)(Pe,{exact:!0,path:i("/"),element:(0,ze.jsx)(bk,{})}),(0,ze.jsx)(Pe,{path:i("/login"),element:(0,ze.jsx)(Hg,{})}),(0,ze.jsx)(Pe,{path:i("/bookmark"),element:(0,ze.jsx)(Zk,{})}),(0,ze.jsx)(Pe,{path:i("/playground"),element:(0,ze.jsx)(eb,{})}),(0,ze.jsx)(Pe,{path:i("/dayevent/:event"),element:(0,ze.jsx)(Yk,{})}),(0,ze.jsx)(Pe,{path:i("/uploads/:type"),element:(0,ze.jsx)(Mk,{})}),(0,ze.jsx)(Pe,{path:i("/screenka/:host_id"),element:(0,ze.jsx)(Ck,{})}),(0,ze.jsx)(Pe,{path:i("/post/:user_fullname/:id"),element:(0,ze.jsx)(Ak,{})})," ",(0,ze.jsx)(Pe,{path:i("/post/:user_fullname/:id/:event"),element:(0,ze.jsx)(Ak,{})}),(0,ze.jsx)(Pe,{path:i("/posts/:user_fullname/:host_id/:event"),element:(0,ze.jsx)(Vk,{})})," ",(0,ze.jsx)(Pe,{path:i("/posts/:user_fullname/:host_id/:week_name/:event"),element:(0,ze.jsx)(Jk,{})}),(0,ze.jsx)(Pe,{path:"*",element:(0,ze.jsx)(Ve,{})})]})})})})})};r.createRoot(document.getElementById("root")).render((0,ze.jsx)(t.StrictMode,{children:(0,ze.jsx)(tb,{})}))}()}();
//# sourceMappingURL=main.147873bb.js.map